"object"!=typeof window.JAK&&(window.JAK={NAME:"JAK",_idCnt:0});JAK.idGenerator=function(){this._idCnt=1E7>this._idCnt?this._idCnt:0;var a="m"+(new Date).getTime().toString(16)+"m"+this._idCnt.toString(16);this._idCnt++;return a};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});Date.now||(Date.now=function(){return+new Date});
Object.create||(Object.create=function(a){if(1<arguments.length)throw Error("Object.create polyfill only accepts the first parameter");var b=function(){};b.prototype=a;return new b});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=b||0;for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});Array.indexOf||(Array.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});
Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a,b){var c=this.length,d=void 0===b?c-1:b;for(0>d&&(d+=c);-1<d;d--)if(d in this&&this[d]===a)return d;return-1});Array.lastIndexOf||(Array.lastIndexOf=function(a,b,c){return 2<arguments.length?Array.prototype.lastIndexOf.call(a,b,c):Array.prototype.lastIndexOf.call(a,b)});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=this.length,d=0;d<c;d++)d in this&&a.call(b,this[d],d,this)});
Array.forEach||(Array.forEach=function(a,b,c){Array.prototype.forEach.call(a,b,c)});Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=this.length,d=0;d<c;d++)if(d in this&&!a.call(b,this[d],d,this))return!1;return!0});Array.every||(Array.every=function(a,b,c){return Array.prototype.every.call(a,b,c)});Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=this.length,d=0;d<c;d++)if(d in this&&a.call(b,this[d],d,this))return!0;return!1});
Array.some||(Array.some=function(a,b,c){return Array.prototype.some.call(a,b,c)});Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=this.length,d=Array(c),e=0;e<c;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d});Array.map||(Array.map=function(a,b,c){return Array.prototype.map.call(a,b,c)});Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var c=this.length,d=[],e=0;e<c;e++)if(e in this){var f=this[e];a.call(b,f,e,this)&&d.push(f)}return d});
Array.filter||(Array.filter=function(a,b,c){return Array.prototype.filter.call(a,b,c)});String.prototype.lpad=function(a,b){for(var c=a||"0",d=b||2,e="";e.length<d-this.length;)e+=c;e=e.substring(0,d-this.length);return e+this.toString()};String.prototype.rpad=function(a,b){for(var c=a||"0",d=b||2,e="";e.length<d-this.length;)e+=c;e=e.substring(0,d-this.length);return this.toString()+e};String.prototype.trim=function(){return this.match(/^\s*([\s\S]*?)\s*$/)[1]};String.trim||(String.trim=function(a){return String.prototype.trim.call(a)});
String.prototype.CS_ALPHABET="0123456789A\u00c1BC\u010cD\u010eE\u011a\u00c9FGHCHI\u00cdJKLMN\u0147O\u00d3PQR\u0158S\u0160T\u0164U\u00da\u016eVWXY\u00ddZ\u017da\u00e1bc\u010dd\u010fe\u011b\u00e9fghchi\u00edjklmn\u0148o\u00f3pqr\u0159s\u0161t\u0165u\u00fa\u016fvwxy\u00fdz\u017e";
String.prototype.localeCSCompare=function(a){a+="";if(this+""===a)return 0;if(this.length<a.length)return-a.localeCSCompare(this);for(var b=0,c=0,d=a.length,e="",f="",g=0,h=0;b<d;){e=a.charAt(b);f=this.charAt(c);if("c"==f.toLowerCase()&&(g=this.substring(c,c+2),"ch"==g||"CH"==g))c++,f=g;if("c"==e.toLowerCase()&&(g=a.substring(b,b+2),"ch"==g||"CH"==g))b++,e=g;g=this.CS_ALPHABET.indexOf(e);h=this.CS_ALPHABET.indexOf(f);if(e!=f)break;b++;c++}return b==d?1:g==h?f.localeCompare(e):-1==h?-1:-1==g?1:h-g};
Date.prototype.toISOString||function(){function a(a){a=String(a);1===a.length&&(a="0"+a);return a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}}();Date.prototype._dayNames="Pond\u011bl\u00ed \u00dater\u00fd St\u0159eda \u010ctvrtek P\u00e1tek Sobota Ned\u011ble".split(" ");
Date.prototype._dayNamesShort="Po \u00dat St \u010ct P\u00e1 So Ne".split(" ");Date.prototype._monthNames="Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec".split(" ");Date.prototype._monthNamesShort="Led \u00dano B\u0159e Dub Kv\u011b \u010cer \u010crc Srp Z\u00e1\u0159 \u0158\u00edj Lis Pro".split(" ");
Date.prototype.format=function(a){for(var b={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},c="",d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d)d=!1,c+=f;else switch(f){case "\\":d?(d=!1,c+=f):d=!0;break;case "d":c+=this.getDate().toString().lpad();break;case "j":c+=this.getDate();break;case "w":c+=this.getDay();break;case "N":c+=this.getDay()||7;break;case "S":f=this.getDate();c+=b[f]||"th";break;case "D":c+=this._dayNamesShort[(this.getDay()||7)-1];break;case "l":c+=this._dayNames[(this.getDay()||
7)-1];break;case "z":var g=this.getTime(),f=new Date(g);f.setDate(1);f.setMonth(0);f=g-f.getTime();c+=f/864E5;break;case "W":var f=new Date(this.getFullYear(),this.getMonth(),this.getDate()),h=f.getDay()||7;f.setDate(f.getDate()+(4-h));g=f.getFullYear();h=Math.floor((f.getTime()-(new Date(g,0,1,-6)).getTime())/864E5);c+=(1+Math.floor(h/7)).toString().lpad();break;case "m":c+=(this.getMonth()+1).toString().lpad();break;case "n":c+=this.getMonth()+1;break;case "M":c+=this._monthNamesShort[this.getMonth()];
break;case "F":c+=this._monthNames[this.getMonth()];break;case "t":var g=this.getTime(),k=this.getMonth(),f=new Date(g);do h=f.getDate(),g+=864E5,f=new Date(g);while(k==f.getMonth());c+=h;break;case "L":f=new Date(this.getTime());f.setDate(1);f.setMonth(1);f.setDate(29);c+=1==f.getMonth()?"1":"0";break;case "Y":c+=this.getFullYear().toString().lpad();break;case "y":c+=this.getFullYear().toString().lpad().substring(2);break;case "a":c+=12>this.getHours()?"am":"pm";break;case "A":c+=12>this.getHours()?
"AM":"PM";break;case "G":c+=this.getHours();break;case "H":c+=this.getHours().toString().lpad();break;case "g":c+=this.getHours()%12;break;case "h":c+=(this.getHours()%12).toString().lpad();break;case "i":c+=this.getMinutes().toString().lpad();break;case "s":c+=this.getSeconds().toString().lpad();break;case "Z":c+=-60*this.getTimezoneOffset();break;case "O":case "P":g=this.getTimezoneOffset()/-60;h=Math.abs(g).toString().lpad();"P"==f&&(h+=":");h+="00";c+=(0<=g?"+":"-")+h;break;case "U":c+=this.getTime()/
1E3;break;case "u":c+="0";break;case "c":c+=arguments.callee.call(this,"Y-m-d")+"T"+arguments.callee.call(this,"H:i:sP");break;case "r":c+=arguments.callee.call(this,"D, j M Y H:i:s O");break;default:c+=f}}return c};
window.JSON||function(){var a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b="[",c;for(c in a)b+="\\"+c;var b=b+"]",b=RegExp(b,"g"),d=function(c){return'"'+c.replace(b,function(b){return a[b]})+'"'},e=function(a,b,c,e){var m=Array(e+1).join(c);if(null===a)return"null";switch(typeof a){case "string":return d(a);case "boolean":case "number":return a.toString();case "object":var l="";if(a instanceof Date)l=d(a.toISOString());else if(a instanceof Array){for(var l=l+"[",
n=0;n<a.length;n++){var q=a[n];0<n&&(l+=",",c.length&&(l+="\n"+m+c));l+=arguments.callee(q,b,c,e+1)}1<a.length&&c.length&&(l+="\n"+m);l+="]"}else{var l=l+"{",n=0,r;for(r in a)q=a[r],0<n&&(l+=","),c.length&&(l+="\n"+m+c),l+=d(r)+":"+arguments.callee(q,b,c,e+1),n++;0<n&&c.length&&(l+="\n"+m);l+="}"}return l;default:return"undefined"}};window.JSON={parse:function(a){return eval("("+a+")")},stringify:function(a,b,c){var d="";"number"==typeof c&&1<c?d=Array(c+1).join(" "):"string"==typeof c&&(d=c);return e(a,
b,d,0)}}}();JAK.ClassMaker={};JAK.ClassMaker.VERSION="5.1";JAK.ClassMaker.NAME="JAK.ClassMaker";JAK.ClassMaker.makeClass=function(a){a=this._makeDefaultParams(a);return this._addConstructorProperties(function(){this.$constructor&&this.$constructor.apply(this,arguments)},a)};
JAK.ClassMaker.makeSingleton=function(a){a=this._makeDefaultParams(a);var b=function(){throw Error("Cannot instantiate singleton class");};b._instance=null;b.getInstance=this._getInstance;return this._addConstructorProperties(b,a)};JAK.ClassMaker.makeInterface=function(a){a=this._makeDefaultParams(a);return this._addConstructorProperties(function(){throw Error("Cannot instantiate interface");},a)};
JAK.ClassMaker.makeStatic=function(a){a=this._makeDefaultParams(a);var b={};b.VERSION=a.VERSION;b.NAME=a.NAME;return b};
JAK.ClassMaker._makeDefaultParams=function(a){if("EXTEND"in a){if(!a.EXTEND)throw Error("Cannot extend non-exist class");if(!("NAME"in a.EXTEND))throw Error("Cannot extend non-JAK class");}a.NAME=a.NAME||!1;a.VERSION=a.VERSION||"1.0";a.EXTEND=a.EXTEND||!1;a.IMPLEMENT=a.IMPLEMENT||[];a.DEPEND=a.DEPEND||[];a.IMPLEMENT instanceof Array||(a.IMPLEMENT=[a.IMPLEMENT]);this._preMakeTests(a);return a};
JAK.ClassMaker._preMakeTests=function(a){if(!a.NAME)throw Error("No NAME passed to JAK.ClassMaker.makeClass()");var b=!1;if(b=this._testDepend(a.DEPEND))throw Error("Dependency error in class "+a.NAME+" ("+b+")");};JAK.ClassMaker._addConstructorProperties=function(a,b){for(var c in b)a[c]=b[c];this._setInheritance(a);a.prototype.constructor=a;a.prototype.$super=this._$super;return a};
JAK.ClassMaker._getInstance=function(){this._instance||(this._instance=Object.create(this.prototype),"$constructor"in this.prototype&&this._instance.$constructor());return this._instance};JAK.ClassMaker._setInheritance=function(a){a.EXTEND&&this._makeInheritance(a,a.EXTEND);for(var b=0;b<a.IMPLEMENT.length;b++)this._makeInheritance(a,a.IMPLEMENT[b],!0)};
JAK.ClassMaker._makeInheritance=function(a,b,c){for(var d in b.prototype){var e=b.prototype[d];"function"==typeof e&&!e.owner&&(e.owner=b)}if(c)for(d in b.prototype)a.prototype[d]="object"==typeof b.prototype[d]?JSON.parse(JSON.stringify(b.prototype[d])):b.prototype[d];else for(d in a.prototype=Object.create(b.prototype),b.prototype)"object"==typeof b.prototype[d]&&(a.prototype[d]=JSON.parse(JSON.stringify(b.prototype[d])))};
JAK.ClassMaker._testDepend=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.sClass)return"Unsatisfied dependency";if(!c.ver)return"Version not specified in dependency";var d=c.sClass.VERSION.split(".")[0],e=c.ver.split(".")[0];if(d!=e)return"Version conflict in "+c.sClass.NAME}return!1};
JAK.ClassMaker._$super=function(){var a=arguments.callee.caller;if(!a)throw Error("Function.prototype.caller not supported");var b=a.owner||this.constructor,c=!1,d;for(d in b.prototype)if(b.prototype[d]==a){c=d;break}if(!c)throw Error("Cannot find supplied method in constructor");a=b.EXTEND;if(!a)throw Error("No super-class available");if(!a.prototype[c])throw Error("Super-class doesn't have method '"+c+"'");return a.prototype[c].apply(this,arguments)};
JAK.Events=JAK.ClassMaker.makeStatic({NAME:"JAK.Events",VERSION:"3.3"});JAK.Events._events={};JAK.Events._domReadyCallbacks=[];
JAK.Events.onDomReady=function(a,b){var c="function"==typeof b?b:a[b];a&&(c=c.bind(a));if("complete"==document.readyState)return setTimeout(c,0);if(!this._domReadyCallbacks.length){var d=function(){for(;this._domReadyCallbacks.length;)this._domReadyCallbacks.shift()()},d=d.bind(this);window.addEventListener?window.addEventListener("DOMContentLoaded",d):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&d()})}this._domReadyCallbacks.push(c)};
JAK.Events.addListener=function(a,b,c,d,e){c=c||window;e=e||!1;var f=JAK.idGenerator(),g=c;if(d)if("string"==typeof d){if("function"!=typeof c[d])throw Error("Events.addListener: arguments[3] must be method of arguments[2]");g=function(b){c[d](b,a,f)}}else g=function(b){d.call(c,b,a,f)};else"function"==typeof c?g=function(b){c(b,a,f)}:document.addEventListener||(g=function(a){c.handleEvent(a)});this._addListener(a,b,g,e);this._events[f]={elm:a,type:b,action:g,capture:e};return f};
JAK.Events._addListener=function(a,b,c,d){b=b.split(" ");for(var e=0;e<b.length;e++){var f=b[e];document.addEventListener?a.addEventListener(f,c,d):a.attachEvent("on"+f,c)}};JAK.Events.removeListener=function(a){if(!(a in this._events))throw Error("Cannot remove non-existent event ID '"+a+"'");var b=this._events[a];this._removeListener(b.elm,b.type,b.action,b.capture);delete this._events[a]};
JAK.Events._removeListener=function(a,b,c,d){b=b.split(" ");for(var e=0;e<b.length;e++){var f=b[e];document.removeEventListener?a.removeEventListener(f,c,d):a.detachEvent("on"+f,c)}};JAK.Events.removeListeners=function(a){for(;a.length;)this.removeListener(a.shift())};JAK.Events.removeAllListeners=function(){for(var a in this._events)this.removeListener(a)};JAK.Events.stopEvent=function(a){a=a||window.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};
JAK.Events.cancelDef=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1};JAK.Events.getTarget=function(a){a=a||window.event;return a.target||a.srcElement};JAK.Browser=JAK.ClassMaker.makeStatic({NAME:"JAK.Browser",VERSION:"3.0"});JAK.Browser.platform="";JAK.Browser.client="";JAK.Browser.version=0;JAK.Browser.agent="";JAK.Browser.mouse={};
JAK.Browser._getPlatform=function(){return-1!=this._agent.indexOf("iPhone")||-1!=this._agent.indexOf("iPod")||-1!=this._agent.indexOf("iPad")?"ios":-1!=this._agent.indexOf("Android")?"and":-1!=this._agent.indexOf("X11")||-1!=this._agent.indexOf("Linux")?"nix":-1!=this._agent.indexOf("Mac")?"mac":-1!=this._agent.indexOf("Win")?"win":"oth"};
JAK.Browser._getClient=function(){return window.opera?"opera":window.chrome?"chrome":document.attachEvent&&"undefined"!=typeof navigator.systemLanguage?"ie":document.getAnonymousElementByAttribute?"gecko":-1!=this._agent.indexOf("KHTML")?"KDE"==this._vendor?"konqueror":-1!=this._vendor.indexOf("Apple")?"safari":"oth":"oth"};
JAK.Browser._getMouse=function(){var a,b;"ie"==JAK.Browser.client&&9>parseFloat(JAK.Browser.version)?(a=1,b=4):"konqueror"==JAK.Browser.client?4>parseFloat(JAK.Browser.version)?(a=1,b=4):(a=0,b=1):"opera"==JAK.Browser.client&&7<JAK.Browser.version&&9>JAK.Browser.version?(a=1,b=4):"safari"==JAK.Browser.client?b=2<parseInt(JAK.Browser.version)?a=0:a=1:(a=0,b=1);return{left:a,right:2,middle:b}};
JAK.Browser._getVersion=function(){var a="_get_"+this.client+"_ver";return"function"==typeof this[a]?this[a]():0};JAK.Browser._get_ie_ver=function(){return"undefined"!=typeof Function.prototype.call?"draggable"in document.createElement("div")?"10":document.addEventListener?"9":"[object JSON]"===Object.prototype.toString.call(window.JSON)?"8":window.XMLHttpRequest?"7":"object"==typeof document.doctype?"6":"5.5":"5.0"};
JAK.Browser._get_opera_ver=function(){return window.opera.version?window.opera.version():document.createComment?"7":"6"};JAK.Browser._get_gecko_ver=function(){return"textOverflow"in document.createElement("div").style?"7":window.EventSource?"6":"onloadend"in new XMLHttpRequest?"5":history.pushState?"4":void 0===document.getBoxObjectFor?"3.6":navigator.geolocation?"3.5":document.getElementsByClassName?"3":window.external?"2":"1.5"};
JAK.Browser._get_konqueror_ver=function(){var a=this._agent.indexOf("KHTML")+6,a=this._agent.substring(a),b=a.indexOf(" ");return a.substring(0,b-2)};JAK.Browser._get_safari_ver=function(){var a=this._agent.match(/version\/([0-9]+)/i);return a?a[1]:"3"};JAK.Browser._get_chrome_ver=function(){var a=this._agent.match(/Chrome\/([0-9]+)/i);return a?a[1]:null};
JAK.Browser.isOld=function(){if("ie"==this.client&&5.5>=parseFloat(this.version)||"opera"==this.client&&9.5>parseFloat(this.version)||"gecko"==this.client&&2>parseFloat(this.version)||"konqueror"==this.client&&3.5>parseFloat(this.version)||!document.documentElement||!document.documentElement.addEventListener&&!document.documentElement.attachEvent)return!0;var a=function(){};return!a.call||!a.apply?!0:!1};
JAK.Browser.getBrowser=function(){this._agent=this.agent=navigator.userAgent;this._platform=navigator.platform;this._vendor=navigator.vendor;this.platform=this._getPlatform();this.client=this._getClient();this.version=this._getVersion();this.mouse=this._getMouse()};JAK.Browser.getBrowser();JAK.DOM=JAK.ClassMaker.makeStatic({NAME:"JAK.DOM",VERSION:"5.0"});JAK.cel=function(a,b,c,d){a=(d||document).createElement(a);b&&(a.className=b);c&&(a.id=c);return a};
JAK.mel=function(a,b,c,d){a=(d||document).createElement(a);if(b)for(var e in b)a[e]=b[e];c&&JAK.DOM.setStyle(a,c);return a};JAK.ctext=function(a,b){return(b||document).createTextNode(a)};JAK.gel=function(a,b){var c=b||document;return"string"==typeof a?c.getElementById(a):a};JAK.query=function(a,b){return[].slice.call((b||document).querySelectorAll(a))};JAK.DOM.append=function(){for(var a=0;a<arguments.length;a++)for(var b=arguments[a],c=b[0],d=1;d<b.length;d++)c.appendChild(b[d])};
JAK.DOM.hasClass=function(a,b){for(var c=a.className.split(" "),d=0;d<c.length;d++)if(c[d].toLowerCase()==b.toLowerCase())return!0;return!1};JAK.DOM.addClass=function(a,b){JAK.DOM.hasClass(a,b)||(a.className+=" "+b)};JAK.DOM.removeClass=function(a,b){for(var c=a.className.split(" "),d=[],e=0;e<c.length;e++)c[e].toLowerCase()!=b.toLowerCase()&&d.push(c[e]);a.className=d.join(" ")};JAK.DOM.clear=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};
JAK.DOM.getDocSize=function(){var a=0,b=0;if("BackCompat"!=document.compatMode){if(document.documentElement.clientWidth&&"opera"!=JAK.Browser.client?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):"opera"==JAK.Browser.client&&(9.5>parseFloat(JAK.Browser.version)?(a=document.body.clientWidth,b=document.body.clientHeight):(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight)),"safari"==JAK.Browser.client||"konqueror"==JAK.Browser.client)b=
window.innerHeight}else a=document.body.clientWidth,b=document.body.clientHeight;return{width:a,height:b}};
JAK.DOM.getBoxPosition=function(a,b){var c=0,d=0,e=b||a.ownerDocument.body;if(a.getBoundingClientRect&&!b)return c=document.documentElement,d=a.getBoundingClientRect(),e=JAK.DOM.getBoxScroll(a),{left:d.left+e.x-c.clientLeft,top:d.top+e.y-c.clientTop};for(;a&&a!=e;){c+=a.offsetTop;d+=a.offsetLeft;if(("gecko"==JAK.Browser.client&&3>JAK.Browser.version||"safari"==JAK.Browser.client)&&"fixed"==JAK.DOM.getStyle(a,"position")){e=JAK.DOM.getScrollPos();c+=e.y;d+=e.x;break}a=a.offsetParent}return{top:c,left:d}};
JAK.DOM.getPortBoxPosition=function(a,b,c){var d=JAK.DOM.getBoxPosition(a,b,c);a=JAK.DOM.getBoxScroll(a,b,c);d.left-=a.x;d.top-=a.y;return{left:d.left,top:d.top}};
JAK.DOM.getBoxScroll=function(a,b,c){var d=0,e=0,f=a.parentNode;a=b||a.ownerDocument.documentElement;for(b=!1;;)if("opera"==JAK.Browser.client&&f.parentNode&&"block"!=JAK.DOM.getStyle(f,"display"))f=f.parentNode;else if("opera"==JAK.Browser.client&&9.5>JAK.Browser.version&&f==document.body)f=f.parentNode;else{c&&"fixed"==JAK.DOM.getStyle(f,"position")&&(b=!0);b||(d+=f.scrollLeft,e+=f.scrollTop);if(f==a)break;f=f.parentNode;if(!f)break}return{x:d,y:e}};
JAK.DOM.getScrollPos=function(){if(document.documentElement.scrollTop||document.documentElement.scrollLeft)var a=document.documentElement.scrollLeft,b=document.documentElement.scrollTop;else document.body.scrollTop||document.body.scrollLeft?(a=document.body.scrollLeft,b=document.body.scrollTop):b=a=0;return{x:a,y:b}};JAK.DOM.getStyle=function(a,b){if(document.defaultView&&document.defaultView.getComputedStyle){var c=a.ownerDocument.defaultView.getComputedStyle(a,"");return!c?!1:c[b]}return a.currentStyle[b]};
JAK.DOM.setStyle=function(a,b){for(var c in b)a.style[c]=b[c]};JAK.DOM.writeStyle=function(a){var b=JAK.mel("style",{type:"text/css"});b.styleSheet?b.styleSheet.cssText=a:b.appendChild(JAK.ctext(a));a=document.getElementsByTagName("head");a.length?a=a[0]:(a=JAK.cel("head"),document.documentElement.appendChild(a,document.body));a.appendChild(b);return b};
JAK.DOM.elementsHider=function(a,b,c){function d(b){for(var c=!1;b.parentNode&&b!=document;)b==a&&(c=!0),b=b.parentNode;return c}var e=b;e||(e=["select","object","embed","iframe"]);var f=arguments.callee.hidden;f&&(f.forEach(function(a){a.style.visibility="visible"}),arguments.callee.hidden=[]);if("hide"==c){"string"==typeof a&&(a=JAK.gel(a));var f=[],g=this.getBoxPosition(a);g.width=a.offsetWidth+g.left;g.height=a.offsetHeight+g.top;for(var h=0;h<e.length;++h)for(var k=document.getElementsByTagName(e[h]),
m=0;m<k.length;++m){var l=this.getBoxPosition(k[m]);d(k[m])||(l.width=k[m].offsetWidth+l.left,l.height=k[m].offsetHeight+l.top,g.left>l.width||(g.width<l.left||g.top>l.height||g.height<l.top)||(k[m].style.visibility="hidden",f.push(k[m])))}arguments.callee.hidden=f}};JAK.DOM.getElementsByClass=function(a,b,c){return[].slice.call((b||document).querySelectorAll((c||"")+"."+a))};JAK.DOM.arrayFromCollection=function(a){var b=[];try{b=Array.prototype.slice.call(a)}catch(c){for(var d=0;d<a.length;d++)b.push(a[d])}finally{return b}};
JAK.DOM.separateCode=function(a){var b=[];return[a.replace(/<script.*?>([\s\S]*?)<\/script>/g,function(a,d){b.push(d);return""}),b.join("\n")]};JAK.DOM.shiftBox=function(a){var b=0,c=0,d=JAK.DOM.getBoxPosition(a),e=JAK.DOM.getScrollPos();d.left-=e.x;d.top-=e.y;var e=JAK.DOM.getDocSize(),f=a.offsetWidth;a=d.top+a.offsetHeight-e.height;0<a&&(d.top-=a,c-=a);a=d.left+f-e.width;0<a&&(d.left-=a,b-=a);a=d.top;0>a&&(d.top-=a,c-=a);a=d.left;0>a&&(d.left-=a,b-=a);return[b,c]};
JAK.DOM.scrollbarWidth=function(){var a=JAK.mel("div",!1,{width:"50px",height:"50px",overflow:"hidden",position:"absolute",left:"-200px"}),b=JAK.mel("div",!1,{height:"100px"});a.appendChild(b);document.body.insertBefore(a,document.body.firstChild);b=a.clientWidth+parseInt(JAK.DOM.getStyle(a,"paddingLeft"))+parseInt(JAK.DOM.getStyle(a,"paddingRight"));JAK.DOM.setStyle(a,{overflowY:"scroll"});var c=a.clientWidth+parseInt(JAK.DOM.getStyle(a,"paddingLeft"))+parseInt(JAK.DOM.getStyle(a,"paddingRight"));
document.body.removeChild(a);return b-c};JAK.DOM.findParent=function(a,b){for(var c=(b||"").match(/[#.]?[a-z0-9_-]+/ig)||[],d=a.parentNode;d&&d!=document;){for(var e=!0,f=0;f<c.length;f++){var g=c[f];switch(g.charAt(0)){case "#":d.id!=g.substring(1)&&(e=!1);break;case ".":JAK.DOM.hasClass(d,g.substring(1))||(e=!1);break;default:d.nodeName.toLowerCase()!=g.toLowerCase()&&(e=!1)}}if(e)return d;d=d.parentNode}return null};JAK.ObjLib=JAK.ClassMaker.makeClass({NAME:"ObjLib",VERSION:"3.1"});
JAK.ObjLib.prototype.reSetOptions=function(){};JAK.ObjLib.prototype.pretty=function(a){return a};JAK.ObjLib.prototype.serialize=function(a){return JSON.stringify(a)};JAK.ObjLib.prototype.unserialize=function(a){return JSON.parse(a)};JAK.ObjLib.prototype.match=function(a,b){return JSON.stringify(a)==JSON.stringify(b)};JAK.ObjLib.prototype.copy=function(a){return JSON.parse(JSON.stringify(a))};JAK.ObjLib.prototype.arrayCopy=function(a){return this.copy(a)};
JAK.Request=JAK.ClassMaker.makeClass({NAME:"JAK.Request",VERSION:"2.0"});JAK.Request.XML=0;JAK.Request.TEXT=1;JAK.Request.JSONP=2;JAK.Request.BINARY=3;JAK.Request.supportsCrossOrigin=function(){return"opera"==JAK.Browser.client&&12>parseFloat(JAK.Browser.version)||"ie"==JAK.Browser.client&&8>JAK.Browser.version||"gecko"==JAK.Browser.client&&3.5>parseFloat(JAK.Browser.version)?!1:!0};JAK.Request.supportsUpload=function(){return window.XMLHttpRequest&&!!(new XMLHttpRequest).upload};
JAK.Request.prototype.$constructor=function(a,b){this._NEW=0;this._SENT=1;this._DONE=2;this._ABORTED=3;this._TIMEOUT=4;this._PROGRESS=5;this._xhr=null;this._callback="";this._script=null;this._type=a;this._headers={};this._callbacks={};this._state=this._NEW;this._handleProgress=this._xdomain=!1;this._options={async:!0,timeout:0,method:"get"};for(var c in b)this._options[c]=b[c];if(this._type==JAK.Request.JSONP){if("post"==this._options.method.toLowerCase())throw Error("POST not supported in JSONP mode");
if(!this._options.async)throw Error("Async not supported in JSONP mode");}};JAK.Request.prototype.$destructor=function(){this._state==this._SENT&&this.abort();this._xhr=null};JAK.Request.prototype.setHeaders=function(a){if(this._type==JAK.Request.JSONP)throw Error("Request headers not supported in JSONP mode");for(var b in a)this._headers[b]=a[b]};
JAK.Request.prototype.getHeaders=function(){if(this._state!=this._DONE)throw Error("Response headers not available");if(this._type==JAK.Request.JSONP)throw Error("Response headers not supported in JSONP mode");var a={},b=this._xhr.getAllResponseHeaders();if(b)for(var b=b.split(/[\r\n]/),c=0;c<b.length;c++)if(b[c]){var d=b[c].match(/^([^:]+): *(.*)$/);a[d[1]]=d[2]}return a};
JAK.Request.prototype.send=function(a,b){if(this._state!=this._NEW)throw Error("Request already sent");this._state=this._SENT;this._userCallback(this);switch(this._type){case JAK.Request.XML:case JAK.Request.TEXT:case JAK.Request.BINARY:return this._sendXHR(a,b);case JAK.Request.JSONP:return this._sendScript(a,b);default:throw Error("Unknown request type");}};
JAK.Request.prototype.abort=function(){if(this._state!=this._SENT)return!1;this._state=this._ABORTED;this._xhr&&this._xhr.abort();this._userCallback(this);return!0};JAK.Request.prototype.setCallback=function(a,b){this._setCallback(a,b,this._DONE);return this};JAK.Request.prototype.setSendCallback=function(a,b){this._setCallback(a,b,this._SENT);return this};JAK.Request.prototype.setAbortCallback=function(a,b){this._setCallback(a,b,this._ABORTED);return this};
JAK.Request.prototype.setTimeoutCallback=function(a,b){this._setCallback(a,b,this._TIMEOUT);return this};JAK.Request.prototype.setProgressCallback=function(a,b){this._handleProgress=!0;this._setCallback(a,b,this._PROGRESS);return this};JAK.Request.prototype._setCallback=function(a,b,c){this._callbacks[c]=[a,b]};
JAK.Request.prototype._sendXHR=function(a,b){if(window.XMLHttpRequest){var c=XMLHttpRequest,d=a.match(/^https?\:\/\/(.*?)\//);if(d&&d[1]!=location.host&&window.XDomainRequest){if(this._type==JAK.Request.BINARY)throw Error("XDomainRequest does not support BINARY mode");this._xdomain=!0;c=XDomainRequest}this._xhr=new c}else if(window.ActiveXObject)this._xhr=new ActiveXObject("Microsoft.XMLHTTP");else throw Error("No XHR available");this._xdomain?this._xhr.onload=this._onXDomainRequestLoad.bind(this):
this._xhr.onreadystatechange=this._onReadyStateChange.bind(this);if("get"==this._options.method.toLowerCase())c=this._buildURL(a,b),d=null;else{var c=a,d=this._serializeData(b),e=!1,f;for(f in this._headers)if("content-type"==f.toLowerCase()){e=!0;break}e||this.setHeaders({"Content-Type":"application/x-www-form-urlencoded"})}if(this._type==JAK.Request.BINARY)if(this._xhr.overrideMimeType)this._xhr.overrideMimeType("text/plain; charset=x-user-defined");else if("ie"==JAK.Browser.client)this._buildVBS();
else throw Error("This browser does not support binary transfer");this._handleProgress&&this._xhr.upload&&JAK.Events.addListener(this._xhr.upload,"progress",this,"_progressCallback");this._xhr.open(this._options.method,c,this._options.async);for(f in this._headers)this._xhr.setRequestHeader(f,this._headers[f]);this._xhr.send(d);this._options.timeout&&setTimeout(this._timeout.bind(this),this._options.timeout);this._options.async||this._onReadyStateChange();return c};
JAK.Request.prototype._sendScript=function(a,b){var c=b||{};this._callback="callback"+JAK.idGenerator();c.callback=this._callback;a=this._buildURL(a,c);window[this._callback]=this._scriptCallback.bind(this);this._script=JAK.mel("script",{type:"text/javascript",src:a});document.body.insertBefore(this._script,document.body.firstChild);return a};JAK.Request.prototype._buildURL=function(a,b){var c=this._serializeData(b);return!c.length?a:-1==a.indexOf("?")?a+"?"+c:a+"&"+c};
JAK.Request.prototype._serializeData=function(a){if("string"==typeof a||window.File&&a instanceof File)return a;if(!a)return"";var b=[],c;for(c in a){var d=a[c];d instanceof Array||(d=[d]);for(var e=0;e<d.length;e++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(d[e]))}return b.join("&")};
JAK.Request.prototype._onReadyStateChange=function(){if(this._state!=this._ABORTED&&4==this._xhr.readyState){var a=this._xhr.status,b;if(this._type==JAK.Request.BINARY)if(b=[],"ie"==JAK.Browser.client)for(var c=VBS_getLength(this._xhr.responseBody),d=0;d<c;d++)b.push(VBS_getByte(this._xhr.responseBody,d));else for(var e=this._xhr.responseText,c=e.length,d=0;d<c;d++)b.push(e.charCodeAt(d)&255);else b=this._type==JAK.Request.XML?this._xhr.responseXML:this._xhr.responseText;this._done(b,a)}};
JAK.Request.prototype._onXDomainRequestLoad=function(){if(this._state!=this._ABORTED){var a=this._xhr.responseText;if(this._type==JAK.Request.XML){var b=new ActiveXObject("Microsoft.XMLDOM");b.async=!1;b.loadXML(a);a=b}this._done(a,200)}};JAK.Request.prototype._progressCallback=function(a){a=a.loaded/a.total;var b=this._state;this._state=this._PROGRESS;this._userCallback(a);this._state=b};
JAK.Request.prototype._scriptCallback=function(a){this._script.parentNode.removeChild(this._script);this._script=null;delete window[this._callback];this._state!=this._ABORTED&&this._done(a,200)};JAK.Request.prototype._done=function(a,b){this._state!=this._DONE&&(this._state=this._DONE,this._userCallback(a,b,this))};JAK.Request.prototype._timeout=function(){this._state==this._SENT&&(this.abort(),this._state=this._TIMEOUT,this._userCallback(this))};
JAK.Request.prototype._userCallback=function(){var a=this._callbacks[this._state];if(a){var b=a[0]||window,a=a[1];b&&"string"==typeof a&&(a=b[a]);a||(a=b,b=window);a.apply(b,arguments)}};JAK.Request.prototype._buildVBS=function(){var a=JAK.mel("script",{type:"text/vbscript"});a.text="Function VBS_getByte(data, pos)\nVBS_getByte = AscB(MidB(data, pos+1,1))\nEnd Function\nFunction VBS_getLength(data)\nVBS_getLength = LenB(data)\nEnd Function";document.getElementsByTagName("head")[0].appendChild(a)};
JAK.Signals=JAK.ClassMaker.makeClass({NAME:"JAK.Signals",VERSION:"2.1"});JAK.Signals.prototype.$constructor=function(){this._myHandleFolder={};this._myIdFolder={}};
JAK.Signals.prototype.addListener=function(a,b,c,d){var e=JAK.idGenerator(),f=[],g={eOwner:a,eFunction:c,eSender:d};b=b.split(" ");for(var h=0;h<b.length;h++){var k=b[h];k in this._myHandleFolder||(this._myHandleFolder[k]={});var k=this._myHandleFolder[k],m=!0,l;for(l in k){var n=k[l];n.eFunction==c&&(n.eOwner==a&&n.eSender==d)&&(m=!1)}m&&(k[e]=g,f.push(k))}return f.length?(this._myIdFolder[e]=f,e):null};
JAK.Signals.prototype.removeListener=function(a){var b=this._myIdFolder[a];if(!b)throw Error("Cannot remove non-existent signal ID '"+a+"'");for(;b.length;)delete b.pop()[a];delete this._myIdFolder[a]};JAK.Signals.prototype.removeListeners=function(a){for(;a.length;)this.removeListener(a.shift())};JAK.Signals.prototype.makeEvent=function(a,b,c){a={type:a,target:b,timeStamp:(new Date).getTime(),data:c&&"object"==typeof c?c:null};this._myEventHandler(a)};
JAK.Signals.prototype._myEventHandler=function(a){var b=[],c;for(c in this._myHandleFolder)if(c==a.type||"*"==c)for(var d in this._myHandleFolder[c]){var e=this._myHandleFolder[c][d];(!e.eSender||e.eSender==a.target)&&b.push(e)}for(c=0;c<b.length;c++)if(e=b[c],d=e.eOwner,e=e.eFunction,"string"==typeof e)d[e](a);else"function"==typeof e&&e(a)};JAK.signals=new JAK.Signals;JAK.ISignals=JAK.ClassMaker.makeInterface({NAME:"JAK.ISignals",VERSION:"2.1"});
JAK.ISignals.prototype.setInterface=function(a){if("object"!=typeof this[a]){for(var b=this._owner;"undefined"==typeof b[a];){if("undefined"!=typeof b.TOP_LEVEL)throw Error("SetInterface:Interface not found");b=b._owner}return b[a]}};JAK.ISignals.prototype.addListener=function(a,b,c){return this.getInterface().addListener(this,a,b,c)};JAK.ISignals.prototype.removeListener=function(a){return this.getInterface().removeListener(a)};JAK.ISignals.prototype.removeListeners=function(a){this.getInterface().removeListeners(a)};
JAK.ISignals.prototype.makeEvent=function(a,b){this.getInterface().makeEvent(a,this,b)};JAK.ISignals.prototype.getInterface=function(){return"object"==typeof this.signals?this.signals:JAK.signals};JAK.AbstractDecorator=JAK.ClassMaker.makeSingleton({NAME:"JAK.AbstractDecorator",VERSION:"2.0"});JAK.AbstractDecorator.prototype.decorate=function(a){a.$super=this._$super;a.__decorators||(a.__decorators=[]);a.__decorators.push(this);return a};
JAK.AbstractDecorator.prototype._$super=function(){var a=arguments.callee.caller;if(!a)throw Error("Function.prototype.caller not supported");for(var b=this.__decorators||[],c=null,d=null,e=b.length;e--;){var f=b[e];if(!c&&d&&d in f){c=f;break}for(var g in f)if(!d&&a==f[g]){d=g;break}}if(d){if(!c&&(c=this.constructor.prototype,!(d in c)))throw Error("Function '"+d+"' has no undecorated parent");}else{c=a.owner||this.constructor;b=!1;for(d in c.prototype)c.prototype[d]==a&&(b=d);if(!b)throw Error("Cannot find supplied method in constructor");
a=c.EXTEND;if(!a)throw Error("No super-class available");if(!a.prototype[b])throw Error("Super-class doesn't have method '"+b+"'");return a.prototype[b].apply(this,arguments)}return c[d].apply(this,arguments)};JAK.AutoDecorator=JAK.ClassMaker.makeSingleton({NAME:"JAK.AutoDecorator",VERSION:"1.0",EXTEND:JAK.AbstractDecorator});JAK.AutoDecorator.prototype.decorate=function(a){this.$super(a);var b=["constructor","$super","_$super","decorate"],c;for(c in this)-1==b.indexOf(c)&&(a[c]=this[c])};
JAK.IDecorable=JAK.ClassMaker.makeClass({NAME:"JAK.IDecorable",VERSION:"2.0",CLASS:"class"});JAK.IDecorable.prototype.decorate=function(a){for(var b=[this],c=1;c<arguments.length;c++)b.push(arguments[c]);c=a.getInstance();return c.decorate.apply(c,b)};JAK.Timekeeper=JAK.ClassMaker.makeSingleton({NAME:"JAK.Timekeeper",VERSION:"1.1"});
JAK.Timekeeper.prototype.$constructor=function(){this._listeners=[];this._running=0;this._tick=this._tick.bind(this);this._scheduler=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){setTimeout(a,1E3/60)}};
JAK.Timekeeper.prototype.addListener=function(a,b,c){if(-1!=this._findListener(a))throw Error("This listener is already attached");a={what:a,method:b,count:c||1,bucket:0};a.bucket=a.count;this._listeners.push(a);2!=this._running&&(0==this._running&&this._schedule(),this._running=2);return this};
JAK.Timekeeper.prototype.removeListener=function(a){a=this._findListener(a);if(-1==a)throw Error("Cannot find listener to be removed");this._listeners.splice(a,1);this._listeners.length||(this._running=1);return this};JAK.Timekeeper.prototype._findListener=function(a){for(var b=0;b<this._listeners.length;b++)if(this._listeners[b].what==a)return b;return-1};
JAK.Timekeeper.prototype._tick=function(){1==this._running&&(this._running=0);if(0!=this._running){this._schedule();for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];b.bucket--;if(!b.bucket){b.bucket=b.count;var c=b.what;("string"==typeof b.method?c[b.method]:b.method).call(c)}}}};JAK.Timekeeper.prototype._schedule=function(){var a=this._scheduler;a(this._tick,null)};JAK.C=JAK.ClassMaker.makeClass({NAME:"JAK.C",VERSION:"1.0",IMPLEMENT:JAK.ISignals});
JAK.C.prototype.$constructor=function(){this.LIMIT=1E3;this.DEBUG=!1;this._native=window.console;this._data=[];this._lost=0;this._defineLogMethod("log");this._defineLogMethod("info");this._defineLogMethod("warn");this._defineLogMethod("debug");this._defineLogMethod("error");this._defineLogMethod("dir")};JAK.C.prototype.clear=function(){this._lost=0;this._data=[];this.makeEvent("change")};JAK.C.prototype.getLost=function(){return this._lost};JAK.C.prototype.getData=function(){return this._data};
JAK.C.prototype._defineLogMethod=function(a){var b=this;this[a]=function(){return b._log(a,arguments)}};JAK.C.prototype._log=function(a,b){for(this._data.push({type:a,args:b,ts:(new Date).getTime()});this._data.length>this.LIMIT;)this._data.shift(),this._lost++;if(this.DEBUG&&this._native){var c=this._native[a];return!c&&(c=this._native.log,!c)?void 0:Function.prototype.apply.call(c,this._native,b)}this.makeEvent("change")};window.console=new JAK.C;
window.onerror=function(a,b,c){console.error(a,b,c)};JAK.Interpolator=JAK.ClassMaker.makeClass({NAME:"JAK.Interpolator",VERSION:"2.1",DEPEND:[{sClass:JAK.Timekeeper,ver:"1.0"}]});JAK.Interpolator.LINEAR=1;JAK.Interpolator.QUADRATIC=2;JAK.Interpolator.SQRT=3;JAK.Interpolator.SIN=4;JAK.Interpolator.ASIN=5;
JAK.Interpolator.prototype.$constructor=function(a,b,c,d,e){this.startVal=a;this.endVal=b;this.interval=c;this.callback=d;this.options={interpolation:JAK.Interpolator.LINEAR,count:1,endCallback:!1};this.running=!1;for(var f in e)this.options[f]=e[f]};JAK.Interpolator.prototype._call=function(a){a=this._interpolate(a);this.callback(this.startVal+(this.endVal-this.startVal)*a)};
JAK.Interpolator.prototype._interpolate=function(a){if("function"==typeof this.options.interpolation)return this.options.interpolation(a);switch(this.options.interpolation){case JAK.Interpolator.QUADRATIC:return a*a;case JAK.Interpolator.SQRT:return Math.sqrt(a);case JAK.Interpolator.SIN:return(Math.sin(Math.PI*(a-0.5))+1)/2;case JAK.Interpolator.ASIN:return(Math.asin(2*(a-0.5))+Math.PI/2)/Math.PI;default:return a}};
JAK.Interpolator.prototype.start=function(){this.running||(this.running=!0,this.startTime=(new Date).getTime(),this._call(0),JAK.Timekeeper.getInstance().addListener(this,"_tick",this.options.count))};JAK.Interpolator.prototype.stop=function(){this.running&&(this.running=!1,JAK.Timekeeper.getInstance().removeListener(this))};
JAK.Interpolator.prototype._tick=function(){var a=(new Date).getTime()-this.startTime;a>=this.interval?(this.stop(),this._call(1),this.options.endCallback&&this.options.endCallback()):this._call(a/this.interval)};JAK.CSSInterpolator=JAK.ClassMaker.makeClass({NAME:"CSSInterpolator",VERSION:"2.0"});JAK.CSSInterpolator.prototype.$constructor=function(a,b,c){this.elm=a;this.properties=[];this.colors=[];this._tick=this._tick.bind(this);this.interpolator=new JAK.Interpolator(0,1,b,this._tick,c)};
JAK.CSSInterpolator.prototype.addProperty=function(a,b,c,d){this.properties.push({property:a,startVal:b,endVal:c,suffix:d||""})};JAK.CSSInterpolator.prototype.addColorProperty=function(a,b,c){a={startVal:JAK.Parser.color(b),endVal:JAK.Parser.color(c),property:a};this.colors.push(a)};JAK.CSSInterpolator.prototype.start=function(){this.interpolator.start()};JAK.CSSInterpolator.prototype.stop=function(){this.interpolator.stop()};
JAK.CSSInterpolator.prototype._setOpacity=function(a,b,c){var d="";b=b.startVal+c*(b.endVal-b.startVal);"ie"==JAK.Browser.client&&9>JAK.Browser.version?(d="filter",b=Math.round(100*b),b="progid:DXImageTransform.Microsoft.Alpha(opacity="+b+");"):d="opacity";a[d]=b};
JAK.CSSInterpolator.prototype._tick=function(a){for(var b=0;b<this.properties.length;b++){var c=this.properties[b];switch(c.property){case "opacity":this._setOpacity(this.elm.style,c,a);break;default:var d=c.startVal+a*(c.endVal-c.startVal),d=d+c.suffix;this.elm.style[c.property]=d}}c=["r","g","b"];for(b=0;b<this.colors.length;b++){for(var d=this.colors[b],e=[0,0,0],f=0;f<c.length;f++){var g=c[f];e[f]=d.startVal[g]+Math.round(a*(d.endVal[g]-d.startVal[g]))}e="rgb("+e.join(",")+")";this.elm.style[d.property]=
e}};
(function(){var a=function(b,c){if("string"==typeof b){c=c||document;var d=c.querySelector(b);return d?a.Node.create(d):null}return"object"==typeof b&&b.nodeType?a.Node.create(b):b instanceof a.Node?b:!1};a.all=function(b,c){if("string"==typeof b){c=c||document;for(var d=c.querySelectorAll(b),e=Array(d.length),f=0,g=d.length;f<g;f++)e[f]=a.Node.create(d[f]);return new a.NodeArray(e)}return"object"==typeof b&&b.nodeType?new a.NodeArray(a.Node.create(b)):b instanceof a.Node?new a.NodeArray(b):!1};a.TAG_RXP=
/^([a-zA-Z]+[a-zA-Z0-9]*)/g;a.CLASS_ID_RXP=/([\.#])([^\.#]*)/g;a.make=function(b,c,d,e){var f=15;c=c||{};d=d||{};e=e||document;b&&"string"==typeof b&&(f-=1);"object"==typeof c&&(f-=2);"object"==typeof d&&(f-=4);if("object"==typeof e&&e.nodeType&&(9==e.nodeType||11!=e.nodeType))f-=8;if(f){var g=new a.E({funcName:"JAX.make",caller:this.make});f&1&&g.expected("first argument","string",b);f&2&&g.expected("second argument","associative array",c);f&4&&g.expected("third argument","associative array",d);
f&8&&g.expected("fourth argument","document element",e);g.show()}f=b.match(a.TAG_RXP)||[];1==f.length?(f=f[0],b=b.substring(f.length,b.length)):(new a.E({funcName:"JAX.make",value:b,caller:this.make})).expected("first argument","tagname first",b).show();b.replace(a.CLASS_ID_RXP,function(a,b,d){a="#"==b?"id":"className";c[a]=a in c?c[a]+" ":"";c[a]+=d});b=e.createElement(f);for(var h in c)b[h]=c[h];for(h in d)b.style[h]=d[h];d=Object.create(a.Node.prototype);d._init(b);return d};a.makeText=function(b,
c){return a.Node.create((c||document).createTextNode(b))};a.isNumber=function(a){return"number"==typeof a};a.isNumeric=function(a){var c=parseFloat(a);return c===1*a&&isFinite(c)};a.isString=function(a){return"string"==typeof a};a.isArray=function(a){return a instanceof Array};a.isFunction=function(a){return"function"==typeof a};a.isBoolean=function(a){return!0===a||!1===a};a.isDate=function(a){return a instanceof Date};a.isJAXNode=function(b){return b instanceof a.Node};a.Node=JAK.ClassMaker.makeClass({NAME:"JAX.Node",
VERSION:"0.71"});a.Node.MEASUREABLEVALUE=/^(?:-)?\d+(\.\d+)?(%|em|in|cm|mm|ex|pt|pc)?$/i;a.Node.ELEMENT_NODE=1;a.Node.TEXT_NODE=3;a.Node.COMMENT_NODE=8;a.Node.DOCUMENT_NODE=9;a.Node.DOCUMENT_FRAGMENT_NODE=11;a.Node.instances={};a.Node.instances[a.Node.ELEMENT_NODE]={};a.Node.instances[a.Node.TEXT_NODE]={};a.Node.instances[a.Node.COMMENT_NODE]={};a.Node.instances[a.Node.DOCUMENT_NODE]={};a.Node.instances[a.Node.DOCUMENT_FRAGMENT_NODE]={};a.Node._ids={};a.Node._ids[a.Node.ELEMENT_NODE]=0;a.Node._ids[a.Node.TEXT_NODE]=
0;a.Node._ids[a.Node.COMMENT_NODE]=0;a.Node._ids[a.Node.DOCUMENT_NODE]=0;a.Node._ids[a.Node.DOCUMENT_FRAGMENT_NODE]=0;a.Node.create=function(b){if("object"==typeof b&&b.nodeType){var c=b.nodeType;if(c in a.Node.instances)switch(c){case a.Node.ELEMENT_NODE:c=parseInt(b.getAttribute("data-jax-id"),10);"number"!=typeof c&&(c=-1);if(-1<c)return a.Node.instances[a.Node.ELEMENT_NODE][c].instance;break;default:var d=-1,e=a.Node.instances[c],f;for(f in e)if(b==e[f].node){d=f;break}if(-1<d)return a.Node.instances[c][d].instance}c=
Object.create(a.Node.prototype);c._init(b);return c}(new a.E({funcName:"JAX.Node.create",caller:this.create})).expected("first argument","HTML element",b).show()};a.Node.prototype.jaxNodeType=0;a.Node.prototype.$constructor=function(){(new a.E({funcName:"JAX.Node.$constructor",caller:this.$constructor})).message("You can not call this class with operator new. Use JAX.Node.create factory method instead of it").show()};a.Node.prototype.$destructor=function(){this.destroy();this._node.nodeType in a.Node.instances&&
delete a.Node.instances[this._node.nodeType][this._jaxId];this._storage=this._node=null;this._jaxId=-1};a.Node.prototype.destroy=function(){if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.destroy,arguments),this;-1!=[1,9].indexOf(this._node.nodeType)&&this.stopListening();-1!=[1,3,8].indexOf(this._node.nodeType)&&this.removeFromDOM();-1!=[1,11].indexOf(this._node.nodeType)&&this.clear()};a.Node.prototype.node=function(){return this._node};a.Node.prototype.$=
function(b){return a.all(b,this._node)};a.Node.prototype.$$=function(b){return a(b,this._node)};a.Node.prototype.addClass=function(){if(1!=this._node.nodeType)return this;var b=[].slice.call(arguments);1==b.length&&(b=b[0]);if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.addClass,arguments),this;if("string"==typeof b){for(var b=b.split(" "),c=this._node.className.split(" ");b.length;){var d=b.shift();-1==c.indexOf(d)&&c.push(d)}this._node.className=
c.join(" ");return this}if(b instanceof Array){c=0;for(d=b.length;c<d;c++)this.addClass(b[c]);return this}(new a.E({funcName:"JAX.Node.addClass",node:this._node,caller:this.addClass})).expected("arguments","string or array of strings",b).show()};a.Node.prototype.removeClass=function(){if(1!=this._node.nodeType)return this;var b=[].slice.call(arguments);1==b.length&&(b=b[0]);if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.removeClass,arguments),
this;if("string"==typeof b){for(var b=b.split(" "),c=this._node.className.split(" ");b.length;){var d=c.indexOf(b.shift());-1!=d&&c.splice(d,1)}this._node.className=c.join(" ");return this}if(b instanceof Array){c=0;for(d=b.length;c<d;c++)this.removeClass(b[c]);return this}(new a.E({funcName:"JAX.Node.removeClass",node:this._node,caller:this.removeClass})).expected("arguments","string or array of strings",b).show()};a.Node.prototype.hasClass=function(b){if(1!=this._node.nodeType)return this;if("string"==
typeof classname){for(b=b.split(" ");b.length;){var c=b.shift();if(-1!=this._node.className.indexOf(c))return!0}return!1}(new a.E({funcName:"JAX.Node.hasClass",node:this._node,caller:this.hasClass})).expected("first argument","string",b).show()};a.Node.prototype.id=function(b){if(1!=this._node.nodeType)return!arguments.length?"":this;if(arguments.length){if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.id,arguments),this;if("string"==typeof b)return this.attr({id:b}),
this}else return this.attr("id");(new a.E({funcName:"JAX.Node.id",node:this._node,caller:this.id})).expected("first argument","string",b).show()};a.Node.prototype.html=function(b){if(1!=this._node.nodeType)return!arguments.length?"":this;if(arguments.length){if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.html,arguments),this;if("string"==typeof b||"number"==typeof b)return this._node.innerHTML=b+"",this}else return b;(new a.E({funcName:"JAX.Node.html",
node:this._node,caller:this.html})).expected("first argument","string",html).message("You can call it withou arguments. Then it will return innerHTML value.").show()};a.Node.prototype.add=function(){var b=[].slice.call(arguments);1==b.length&&(b=b[0]);if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.add,arguments),this;if(b&&b instanceof Array){for(var c=0,d=b.length;c<d;c++)this.add(b[c]);return this}if(b&&(b.nodeType||a.isJAXNode(b))){c=b.jaxNodeType?
b.node():b;try{return this._node.appendChild(c),this}catch(e){}}(new a.E({funcName:"JAX.Node.add",node:this._node,caller:this.add})).expected("arguments","HTML node, textnode, instance of JAX.Node, JAX.NodeText or JAX.NodeDocFrag",b).message("You can call it with arguments separated by comma or array or single argument.").show()};a.Node.prototype.addBefore=function(b,c){var d=3;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.addBefore,arguments),
this;if("object"==typeof b&&(b.nodeType||a.isJAXNode(b)))d-=1;if("object"==typeof c&&(c.nodeType||a.isJAXNode(c)))d-=2;if(d){var e=new a.E({funcName:"JAX.Node.addBefore",node:this._node,caller:this.addBefore});d&1&&e.expected("first argument","HTML element, textnode, instance of JAX.Node, JAX.NodeText or JAX.NodeDocFrag",b);d&2&&e.expected("second argument","HTML element, textnode, instance of JAX.Node or JAX.NodeText",c);e.show()}b=b.jaxNodeType?b.node():b;c=c.jaxNodeType?c.node():c;try{return this._node.insertBefore(b,
c),this}catch(f){}};a.Node.prototype.appendTo=function(b){if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.appendTo,arguments),this;if("object"==typeof b&&(b.nodeType||a.isJAXNode(b))){b=b.jaxNodeType?b.node():b;try{return b.appendChild(this._node),this}catch(c){}}(new a.E({funcName:"JAX.Node.appendTo",node:this._node,caller:this.appendTo})).expected("first argument","HTML element, instance of JAX.Node or JAX.NodeDocFrag",nodes).show()};a.Node.prototype.appendBefore=
function(b){if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.appendBefore,arguments),this;if("object"==typeof b&&(b.nodeType||a.isJAXNode(b)))try{b=b.jaxNodeType?b.node():b,b.parentNode.insertBefore(this._node,b)}catch(c){}(new a.E({funcName:"JAX.Node.appendBefore",node:this._node,caller:this.appendBefore})).expected("first argument","HTML element, text node, instance of JAX.Node or JAX.NodeText",nodes).show()};a.Node.prototype.removeFromDOM=function(){if(this._node.getAttribute&&
this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.removeFromDOM,arguments),this;try{this._node.parentNode.removeChild(this._node)}catch(a){}return this};a.Node.prototype.clone=function(b){1!=this._node.nodeType&&(new a.E({funcName:"JAX.Node.clone",node:this._node,caller:this.clone})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();b=this._node.cloneNode(!!b);b.setAttribute("data-jax-id","");return a.Node.create(b)};
a.Node.prototype.listen=function(b,c,d,e){-1==[1,9].indexOf(this._node.nodeType)&&(new a.E({funcName:"JAX.Node.listen",node:this._node,caller:this.listen})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();var f=15;d=d||window;b&&"string"==typeof b&&(f-=1);if(c&&("string"==typeof c||"function"==typeof c))f-=2;"object"==typeof d&&(f-=4);if("string"==typeof c){if(c=d[c])f-=8,c=c.bind(d)}else f-=8;if(f){var g=new a.E({funcName:"JAX.Node.listen",
node:this._node,caller:this.listen});f&1&&g.expected("first argument","string",b);f&2&&g.expected("second argument","string or function",c);f&4&&g.expected("third","object",d);f&8&&g.message("Method '"+c+"' in second argument was not found in third argument "+d+".");g.show()}var h=this;d=JAK.Events.addListener(this._node,b,function(a,b){c(a,h,e)});f=this._storage.events[b]||[];f.push(d);this._storage.events[b]=f;return d};a.Node.prototype.stopListening=function(b,c){-1==[1,9].indexOf(this._node.nodeType)&&
(new a.E({funcName:"JAX.Node.stopListening",node:this._node,caller:this.stopListening})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.stopListening,arguments),this;if(!arguments.length){var d=this._storage.events,e;for(e in d)this._destroyEvents(d[e]);this._storage.events={};return this}"string"!=typeof b&&(new a.E({funcName:"JAX.Node.stopListening",
node:this._node,caller:this.stopListening})).expected("first argument","string",b).show();d=this._storage.events[b];if(!d)return this;if(!c)return this._destroyEvents(d),this._storage.events[b]=[],this;e=d.indexOf(c);if(-1<e)return this._destroyEvents([d[e]]),d.splice(e,1),this;window.console&&window.console.warn&&console.warn("JAX.Node.stopListening: no event listener id '"+c+"' found. See doc for more information.");return this};a.Node.prototype.attr=function(){var a=[].slice.call(arguments);if(1<
a.length)return this.attr(a);if(1==a.length)a=a[0];else return{};if("string"==typeof a)return 1==this._node.nodeType?node.getAttribute(a):"";if(a instanceof Array){var c={};if(1!=this._node.nodeType)return c;for(var d=0,e=a.length;d<e;d++){var f=a[d];c[f]=node.getAttribute(f)}return c}if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.attr,arguments),this;if(1!=this._node.nodeType)return this;for(c in a)this._node.setAttribute(c,a[c]);return this};
a.Node.prototype.styleCss=function(){var a=[].slice.call(arguments);if(1<a.length)return this.styleCss(a);if(1==a.length)a=a[0];else return[];if("string"==typeof a)return 1!=this._node.nodeType?"":"opacity"==a?this._getOpacity():this._node.style[a];if(a instanceof Array){var c={};if(1!=this._node.nodeType)return c;for(var d=0,e=a.length;d<e;d++){var f=a[d];c[f]="opacity"==f?this._getOpacity():this._node.style[f]}return c}if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.style,
arguments),this;if(1!=this._node.nodeType)return this;for(c in a)d=a[c],"opacity"==c?this._setOpacity(d):this._node.style[c]=d;return this};a.Node.prototype.displayOn=function(a){if(1!=this._node.nodeType)return this;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.displayOn,arguments),this;this._node.style.display=a||"";return this};a.Node.prototype.displayOff=function(){if(1!=this._node.nodeType)return this;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.displayOff,
arguments),this;this._node.style.display="none";return this};a.Node.prototype.computedCss=function(){var b=arguments;if(1<b.length)return this.computedCss(b);if(1==b.length)b=arguments[0];else return[];if("string"==typeof b){if(1!=this._node.nodeType)return"";var c=JAK.DOM.getStyle(this._node,b);this._node.runtimeStyle&&(!this._node.addEventListener&&a.Node.MEASUREABLEVALUE.test(c))&&(c=this._inPixels(c));return c}var d={};if(1!=this._node.nodeType)return d;[].concat(b);for(var e=0,f=b.length;e<f;e++){var g=
b[e],c=JAK.DOM.getStyle(this._node,g);this._node.runtimeStyle&&(!this._node.addEventListener&&a.Node.MEASUREABLEVALUE.test(c))&&(c=this._inPixels(c));d[g]=c}return d};a.Node.prototype.fullWidth=function(a){if(!arguments.length){var c=this.styleCss("display","visibility","position"),d=0==this.computedCss("position").indexOf("fixed"),e=0==this.styleCss("display").indexOf("none");d||this.styleCss({position:"absolute"});e&&this.styleCss({display:""});this.styleCss({visibility:"hidden"});d=this._node.offsetWidth;
this.styleCss(c);return d}if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.width,arguments),this;var c=parseFloat(this.computedCss("padding-left")),d=parseFloat(this.computedCss("padding-right")),e=parseFloat(this.computedCss("border-left")),f=parseFloat(this.computedCss("border-right"));isFinite(c)&&(a=-c);isFinite(d)&&(a=-d);isFinite(e)&&(a=-e);isFinite(f)&&(a=-f);this._node.style.width=Math.max(a,0)+"px";return this};a.Node.prototype.fullHeight=
function(a){if(!arguments.length){var c=this.styleCss("display","visibility","position"),d=0==this.computedCss("position").indexOf("fixed"),e=0==this.styleCss("display").indexOf("none");d||this.styleCss({position:"absolute"});e&&this.styleCss({display:""});this.styleCss({visibility:"hidden"});d=this._node.offsetHeight;this.styleCss(c);return d}if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.height,arguments),this;var c=parseFloat(this.computedCss("padding-top")),
d=parseFloat(this.computedCss("padding-bottom")),e=parseFloat(this.computedCss("border-top")),f=parseFloat(this.computedCss("border-bottom"));isFinite(c)&&(a=-c);isFinite(d)&&(a=-d);isFinite(e)&&(a=-e);isFinite(f)&&(a=-f);this._node.style.height=Math.max(a,0)+"px";return this};a.Node.prototype.parent=function(){return this._node.parentNode?a.Node.create(this._node.parentNode):null};a.Node.prototype.nSibling=function(){return this._node.nextSibling?a(this._node.nextSibling):null};a.Node.prototype.pSibling=
function(){return this._node.previousSibling?a(this._node.previousSibling):null};a.Node.prototype.childs=function(){if(!this._node.childNodes)return[];for(var b=[],c=0,d=this._node.childNodes.length;c<d;c++)b.push(a(this._node.childNodes[c]));return b};a.Node.prototype.fChild=function(){return this._node.firstChild?a(this._node.firstChild):null};a.Node.prototype.lChild=function(){return this._node.lastChild?a(this._node.lastChild):null};a.Node.prototype.clear=function(){1!=this._node.nodeType&&11!=
this._node.nodeType&&(new a.E({funcName:"JAX.Node.clear",node:this._node,caller:this.clear})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.clear,arguments),this;JAK.DOM.clear(this._node);return this};a.Node.prototype.contains=function(b){1!=this._node.nodeType&&(new a.E({funcName:"JAX.Node.contains",node:this._node,caller:this.contains})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();
if("object"==typeof b&&(b.nodeType||a.isJAXNode(b))){for(b=b.jaxNodeType?b.node().parentNode:b.parentNode;b;){if(b==this._node)return!0;b=b.parentNode}return!1}(new a.E({funcName:"JAX.Node.contains",node:this._node,caller:this.contains})).expected("first argument","HTML element, text node, instance of JAX.Node or JAX.NodeText",b).show()};a.Node.prototype.isChildOf=function(b){-1==[1,3,8].indexOf(this._node.nodeType)&&(new a.E({funcName:"JAX.Node.displayOn",node:this._node,caller:this.displayOn})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();
if("object"==typeof b&&(b.nodeType||a.isJAXNode(b)))return(b.jaxNodeType?b:a.Node.create(b)).contains(this);(new a.E({funcName:"JAX.Node.isChildOf",node:this._node,caller:this.isChildOf})).expected("first argument","HTML element, JAX.Node or JAX.NodeDocFrag",b).show()};a.Node.prototype.fade=function(b,c,d){1!=this._node.nodeType&&(new a.E({funcName:"JAX.Node.fade",node:this._node,caller:this.fade})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();
var e=7;c=c||0;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.fade,arguments),this;"string"==typeof b&&(e-=1);"number"==typeof c&&(e-=2);if(!d||"function"==typeof d)e-=4;if(e){var f=a.E({funcName:"JAX.Node.fade",node:this._node,caller:this.fade});e&1&&f.expected("first argument","string",b);e&2&&f.expected("second argument","number",c);e&4&&f.expected("third argument","function",d);f.show()}switch(b){case "in":e=0;f=parseFloat(this.computedCss("opacity"))||
1;break;case "out":e=parseFloat(this.computedCss("opacity"))||1;f=0;break;default:return console.warn("JAX.Node.fade got unsupported type '"+b+"'."),this}var g=new a.Animation(this),h=function(){this.unlock();d&&d()}.bind(this);g.addProperty("opacity",c,e,f);g.addCallback(h);g.run();this.lock();return this};a.Node.prototype.fadeTo=function(b,c,d){1!=this._node.nodeType&&(new a.E({funcName:"JAX.Node.fadeTo",node:this._node,caller:this.fadeTo})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();
var e=7;c=c||0;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.fade,arguments),this;a.isNumeric(b)&&(e-=1);"number"==typeof c&&(e-=2);if(!d||"function"==typeof d)e-=4;if(e){var f=a.E({funcName:"JAX.Node.fadeTo",node:this._node,caller:this.fadeTo});e&1&&f.expected("first argument","number",b);e&2&&f.expected("second argument","number",c);e&4&&f.expected("third argument","function",d);f.show()}var e=parseFloat(this.computedCss("opacity"))||1,f=parseFloat(b),
g=new a.Animation(this),h=function(){this.unlock();d&&d()}.bind(this);g.addProperty("opacity",c,e,f);g.addCallback(h);g.run();this.lock();return this};a.Node.prototype.slide=function(b,c,d){1!=this._node.nodeType&&(new a.E({funcName:"JAX.Node.slide",node:this._node,caller:this.slide})).message("You can not use this method for this element. You can use it only for element with nodeType == 1.").show();var e=7;c=c||0;if(this._node.getAttribute&&this._node.getAttribute("data-jax-locked"))return this._queueMethod(this.slide,
arguments),this;"string"==typeof b&&(e-=1);"number"==typeof c&&(e-=2);if(!d||"function"==typeof d)e-=4;if(e){var f=a.E({funcName:"JAX.Node.slide",node:this._node,caller:this.slide});e&1&&f.expected("first argument","string",b);e&2&&f.expected("second argument","number",c);e&4&&f.expected("third argument","function",d);f.show()}switch(b){case "down":var g=this.styleCss("height","overflow"),e="height",f=0,h=this.fullHeight();break;case "up":g=this.styleCss("height","overflow");e="height";f=this.fullHeight();
h=0;break;case "left":g=this.styleCss("width","overflow");e="width";f=this.fullWidth();h=0;break;case "right":g=this.styleCss("width","overflow");e="width";f=0;h=this.fullWidth();break;default:return window.console&&window.console.warn&&console.warn("JAX.Node.slide got unsupported type '"+b+"'."),this}this.styleCss({overflow:"hidden"});var k=new a.Animation(this),m=function(){for(var a in g)this._node.style[a]=g[a];this.unlock();d&&d()}.bind(this);k.addProperty(e,c,f,h);k.addCallback(m);k.run();this.lock();
return this};a.Node.prototype.lock=function(){1==this._node.nodeType&&this._node.setAttribute("data-jax-locked","1");return this};a.Node.prototype.isLocked=function(){return 1!=this._node.nodeType?!1:!!node.getAttribute("data-jax-locked")};a.Node.prototype.unlock=function(){if(1==this._node.nodeType){var a=this._storage.lockQueue;for(this._node.removeAttribute("data-jax-locked");a.length;){var c=a.shift();c.method.apply(this,c.args)}}return this};a.Node.prototype._init=function(b){this._node=b;this.jaxNodeType=
this._node.nodeType;var c=-1;b.getAttribute&&(c=parseInt(b.getAttribute("data-jax-id"),10),"number"!=typeof c&&(c=-1));if(-1<c)this._jaxId=c,this._storage=a.Node.instances.html[this._jaxId],this._storage.instance=this;else if(this._node.nodeType in a.Node.instances)switch(this._node.nodeType){case a.Node.ELEMENT_NODE:this._jaxId=a.Node._ids[a.Node.ELEMENT_NODE]++;this._node.setAttribute("data-jax-id",this._jaxId);b={instance:this,events:{},lockQueue:[]};this._storage=a.Node.instances[a.Node.ELEMENT_NODE][this._jaxId]=
b;break;case a.Node.TEXT_NODE:case a.Node.COMMENT_NODE:case a.Node.DOCUMENT_FRAGMENT_NODE:c=this._node.nodeType;this._jaxId=a.Node._ids[c]++;b={instance:this,node:b};this._storage=a.Node.instances[c][this._jaxId]=b;break;case a.Node.DOCUMENT_NODE:this._jaxId=a.Node._ids[a.Node.DOCUMENT_NODE]++,b={instance:this,events:{},node:b},this._storage=a.Node.instances[a.Node.DOCUMENT_NODE][this._jaxId]=b}};a.Node.prototype._inPixels=function(a){var c=this._node.style.left,d=this._node.runtimeStyle.left;this._node.runtimeStyle.left=
this._node.currentStyle.left;this._node.style.left=a||0;a=this._node.style.pixelLeft;this._node.style.left=c;this._node.runtimeStyle.left=d;return a};a.Node.prototype._setOpacity=function(a){var c="";"ie"==JAK.Browser.client&&9>JAK.Browser.version?(c="filter",a=Math.round(100*a),a="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+");"):c="opacity";this._node.style[c]=a+""};a.Node.prototype._getOpacity=function(){if("ie"==JAK.Browser.client&&9>JAK.Browser.version){var b="";this._node.style.filter.replace(a.Animation.REGEXP_OPACITY,
function(a,d){b=d});return b?parseInt(b,10)/100+"":b}return this._node.style.opacity};a.Node.prototype._queueMethod=function(a,c){this._storage.lockQueue.push({method:a,args:c})};a.Node.prototype._destroyEvents=function(a){JAK.Events.removeListeners(a)};a.NodeArray=JAK.ClassMaker.makeClass({NAME:"JAX.NodeArray",VERSION:"0.1"});a.NodeArray.prototype.length=0;a.NodeArray.prototype.$constructor=function(b){b=[].concat(b);var c=b.length;this._jaxNodes=Array(c);for(var d=0;d<c;d++){var e=b[d];"object"==
typeof e&&e.nodeType&&(e=a(e));a.isJAXNode(e)?this._jaxNodes[d]=e:(new a.E({funcName:"JAX.NodeArray.$constructor",caller:this.$constructor})).expected("first argument","HTML element, text node, JAX.NodeHTML or JAX.NodeText instance",e).show()}this.length=this._jaxNodes.length};a.NodeArray.prototype.item=function(a){return this._jaxNodes[a]};a.NodeArray.prototype.items=function(){return this._jaxNodes.slice()};a.NodeArray.prototype.addClass=function(){[].slice.call(arguments);for(var a=0,c=this._jaxNodes.length;a<
c;a++){var d=this._jaxNodes[a];1==d.jaxNodeType&&d.addClass()}return this};a.NodeArray.prototype.removeClass=function(){for(var a=[].slice.call(arguments),c=0,d=this._jaxNodes.length;c<d;c++){var e=this._jaxNodes[c];1==e.jaxNodeType&&e.removeClass(a)}return this};a.NodeArray.prototype.displayOn=function(a){for(var c=0,d=this._jaxNodes.length;c<d;c++){var e=this._jaxNodes[c];1==e.jaxNodeType&&e.displayOn(a)}return this};a.NodeArray.prototype.displayOff=function(){for(var a=0,c=this._jaxNodes.length;a<
c;a++){var d=this._jaxNodes[a];1==d.jaxNodeType&&d.displayOff()}return this};a.NodeArray.prototype.style=function(a){for(var c=0,d=this._jaxNodes.length;c<d;c++){var e=this._jaxNodes[c];1==e.jaxNodeType&&e.styleCss(a)}return this};a.NodeArray.prototype.attr=function(a){for(var c=0,d=this._jaxNodes.length;c<d;c++){var e=this._jaxNodes[c];1==e.jaxNodeType&&e.attr(a)}return this};a.NodeArray.prototype.appendTo=function(a){for(var c=0,d=this._jaxNodes.length;c<d;c++){var e=this._jaxNodes[c];9!=e.jaxNodeType&&
e.appendTo(a)}return this};a.NodeArray.prototype.removeFromDOM=function(){for(var a=0,c=this._jaxNodes.length;a<c;a++){var d=this._jaxNodes[a];9!=d.jaxNodeType&&d.removeFromDOM()}return this};a.NodeArray.prototype.destroyItems=function(){for(var a=0,c=this._jaxNodes.length;a<c;a++){var d=this._jaxNodes[a];1==d.jaxNodeType&&d.destroy()}return this};a.NodeArray.prototype.forEachItem=function(a){this._jaxNodes.forEach(a,this);return this};a.NodeArray.prototype.filterItems=function(b){return new a.NodeArray(this._jaxNodes.filter(b))};
a.NodeArray.prototype.pushItem=function(b){b=a(b);this.length++;this._jaxNodes.push(b);return this};a.NodeArray.prototype.popItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.pop()};a.NodeArray.prototype.shiftItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.shift()};a.NodeArray.prototype.unshiftItem=function(b){b=a(b);this.length++;return this._jaxNodes.unshift(b)};a.NodeArray.prototype.fade=function(a,c,d){for(var e=this._jaxNodes.length,f=function(){e--;
e||d()},g=0,h=this._jaxNodes.length;g<h;g++){var k=this._jaxNodes[g];1==k.jaxNodeType&&k.fade(a,c,f)}return this};a.NodeArray.prototype.slide=function(a,c,d){for(var e=this._jaxNodes.length,f=function(){e--;e||d()},g=0,h=this._jaxNodes.length;g<h;g++){var k=this._jaxNodes[g];1==k.jaxNodeType&&k.slide(a,c,f)}return this};a.DOMBuilder=JAK.ClassMaker.makeClass({NAME:"JAX.DOMBuilder",VERSION:"0.2"});a.DOMBuilder.prototype.$constructor=function(b){this._doc=b||document;this._jax={container:a.Node.create(document.createDocumentFragment())};
this._pointerJaxNode=null;this._stack=[]};a.DOMBuilder.prototype.open=function(b,c,d){var e=b;"string"==typeof b?e=a.make(b,c,d,this._doc):"object"==typeof b&&b.nodeType&&(e=a(b));if(e&&9!=e.jaxNodeType)return this._pointerJaxNode?(this._pointerJaxNode.add(e),this._stack.push(this._pointerJaxNode)):(this._stack.push(this._pointerJaxNode),this._jax.container.add(e)),this._pointerJaxNode=e;(new a.E({funcName:"JAX.DOMBuilder.open",caller:this.open})).expected("first argument","HTML Element definition compatible with JAX.make or HTML element",
b).show()};a.DOMBuilder.prototype.add=function(b,c,d){var e=b;"string"==typeof b?e=a.make(b,c,d):"object"==typeof b&&b.nodeType&&(e=a(b),c&&e.attr(c),d&&e.style(d));!a.isJAXNode(b)&&9==b.jaxNodeType&&(new a.E({funcName:"JAX.DOMBuilder.add",caller:this.add})).expected("first argument","string, node, instance of JAX.NodeHTML, JAX.NodeText, JAX.NodeDocFrag",b).show();c&&e.attr(c);d&&e.styleCss(d);this._pointerJaxNode?this._pointerJaxNode.add(e):this._jax.container.add(e);return e};a.DOMBuilder.prototype.addText=
function(b){if("string"==typeof b)return b=a.makeText(b),this._pointerJaxNode?this._pointerJaxNode.add(b):this._jax.container.add(b),b;(new a.E({funcName:"JAX.DOMBuilder.addText",caller:this.addText})).expected("first argument","string",typeof node).show()};a.DOMBuilder.prototype.close=function(){this._stack.length?this._pointerJaxNode=this._stack.pop():(new a.E({funcName:"JAX.DOMBuilder.addText",caller:this.close})).expected("closing","opened element","no opened element").show()};a.DOMBuilder.prototype.appendTo=
function(b){var c=null;"object"==typeof b&&b.nodeType?c=a(b):a.isJAXNode(b)&&1==b.jaxNodeType?c=b:(new a.E({funcName:"JAX.DOMBuilder.appendTo",caller:this.appendTo})).expected("argument","html element, instance of JAX.NodeHTML or JAX.NodeDocFrag",b).show();this._jax.container.appendTo(c)};a.DOMBuilder.prototype.getContainer=function(){return this._jax.container};a.DOMBuilder.prototype.clear=function(){this._jax.container.clear();this._stack=[]};a.Animation=JAK.ClassMaker.makeClass({NAME:"JAX.Animation",
VERSION:"0.32"});a.Animation._TRANSITION_PROPERTY="";a.Animation._TRANSITION_EVENT="";(function(){var b={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MSTransition:"MSTransitionEnd"};for(p in b)if(p in document.createElement("div").style){a.Animation._TRANSITION_PROPERTY=p;a.Animation._TRANSITION_EVENT=b[p];break}})();a.Animation._SUPPORTED_PROPERTIES={width:{defaultUnit:"px",css:"width"},height:{defaultUnit:"px",css:"height"},
top:{defaultUnit:"px",css:"top"},left:{defaultUnit:"px",css:"left"},bottom:{defaultUnit:"px",css:"bottom"},right:{defaultUnit:"px",css:"right"},fontSize:{defaultUnit:"px",css:"font-size"},opacity:{defaultUnit:"",css:"opacity"},color:{defaultUnit:"",css:"color"},backgroundColor:{defaultUnit:"",css:"background-color"}};a.Animation._REGEXP_OPACITY=/alpha(opacity=['"]?([0-9]+)['"]?)/;a.Animation.prototype.$constructor=function(b){this._elm=a.isJAXNode(b)?b:a.Node.create(b);this._properties=[];this._interpolators=
[];this._callback=null;this._running=!1;this._transitionSupport=!!a.Animation._TRANSITION_PROPERTY};a.Animation.prototype.addProperty=function(b,c,d,e,f){if(b in a.Animation._SUPPORTED_PROPERTIES)return e=this._parseCSSValue(b,e),d=this._parseCSSValue(b,d),f=this._transitionSupport?f||"linear":"LINEAR",this._properties.push({property:b,cssStart:d,cssEnd:e,duration:c||1,method:f}),this;(new a.E({funcName:"JAX.Animation.addProperty",node:this._elm.node(),caller:this.addProperty})).expected("first parameter",
"supported property","unsupported property: "+b).show()};a.Animation.prototype.addCallback=function(a){this._callback=a;return this};a.Animation.prototype.run=function(){this._running=!0;if(!this._transitionSupport)return this._initInterpolators(),this;this._initTransition();return this};a.Animation.prototype.isRunning=function(){return this._running};a.Animation.prototype.stop=function(){if(!this._transitionSupport)return this._stopInterpolators(),this;this._stopTransition();return this};a.Animation.prototype._initInterpolators=
function(){for(var a=0,c=this._properties.length;a<c;a++){var d=this._properties[a],e=new JAK.CSSInterpolator(this._elm.node(),1E3*d.duration,{interpolation:d.method,endCallback:this._endInterpolator.bind(this,a)});this._interpolators.push(e);0==["backgroundColor","color"].indexOf(d.property)?e.addColorProperty(d.property,d.cssStart.value,d.cssEnd.value):e.addProperty(d.property,d.cssStart.value,d.cssEnd.value,d.cssStart.unit);e.start()}};a.Animation.prototype._stopInterpolators=function(){for(var a=
0,c=this._interpolators.length;a<c;a++)this._endInterpolator(a)};a.Animation.prototype._initTransition=function(){for(var b=a.Animation._TRANSITION_PROPERTY,c=a.Animation._TRANSITION_EVENT,d=[],e=this._elm.node(),f=e.style,g=0,h=this._properties.length;g<h;g++){var k=this._properties[g];f[k.property]=k.cssStart.value+k.cssStart.unit;d.push(k.property+" "+k.duration+"s "+k.method)}e.offsetHeight;e.style[b]=d.join(",");this._ecTransition=this._elm.listen(c,"_endTransition",this);g=0;for(h=this._properties.length;g<
h;g++)k=this._properties[g],f[k.property]=k.cssEnd.value+k.cssStart.unit};a.Animation.prototype._stopTransition=function(){for(var b=this._elm.node(),c=this._elm.node().style,d=0,e=this._properties.length;d<e;d++){var f=this._properties[d].property,g=window.getComputedStyle(b).getPropertyValue(a.Animation._SUPPORTED_PROPERTIES[f].css);c[f]=g}this._endTransition()};a.Animation.prototype._parseCSSValue=function(b,c){var d=parseFloat(c),e=(c+"").replace(d,"");return e?{value:d,unit:e}:{value:d,unit:a.Animation._SUPPORTED_PROPERTIES[b].defaultUnit}};
a.Animation.prototype._endInterpolator=function(a){this._interpolators[a].stop();this._interpolators.splice(a,1);this._interpolators.length||(this._callback&&this._callback(),this._running=!1)};a.Animation.prototype._endTransition=function(){this._elm.stopListening(a.Animation._TRANSITION_EVENT,this._ecTransition);this._elm.node().style[a.Animation._TRANSITION_PROPERTY]="none";this._ecTransition=null;this._running=!1;this._callback&&this._callback()};a.E=JAK.ClassMaker.makeClass({NAME:"JAX.D",VERSION:"0.1"});
a.E.TRACED_CALLING=20;a.E.prototype.$constructor=function(a){this._data=a||{};this._message="";this._output="JAX Error:"};a.E.prototype.expected=function(a,c,d){this._message+="\n\nFor "+a+" ";this._message+="I expected "+c+". ";this._message+="I got "+d+" with type '"+typeof d+"' from you. ";return this};a.E.prototype.message=function(a){if(!a)return this;this._message+="\n\n"+a;return this};a.E.prototype.show=function(){this._generateOutput();throw Error(this._output);};a.E.prototype._generateOutput=
function(){this._data.funcName&&"string"==typeof this._data.funcName&&(this._output+="Function "+this._data.funcName+": ");this._message&&(this._output+=this._message);this._data.node&&(this._output+="\n\n===",this._output+="\nNode: "+this._stringifyNode(),this._output+="\n===");if("caller"in this._data){this._output+="\n\n===";this._output+="\nTRACED CALLING SEQUENCE:";var b=this._data.caller.caller;if(b){this._output+="\nCalled from:\n"+b.toString();var c=a.E.TRACED_CALLING;do{if(b=b.caller)this._output+=
"\n\nAnd it was called from:\n"+b.toString();c--}while(b&&c);this._output=b?this._output+"\n\n... and much more calling":this._output+"\n\n... and it was probably called directly from window";this._output+="\n==="}else this._output+="\nProbably called directly from window"}};a.E.prototype._stringifyNode=function(){var a="",c="",d="";this._data.node.outerHTML.replace(/(<[^>]*>).*(<\/[^<>]*>)/i,function(a,b,g){c=b;d=g;return a});c&&(a+=c);this._data.node.innerHTML&&(a+=this._data.node.innerHTML.substring(0,
10)+"...");d&&(a+=d);return a};window.JAX?window.console&&window.console.warn&&window.console.warn("window.JAX is already defined. You are probably trying to initiate JAX twice or old version is present."):(window.JAX=a,!window.$&&!window.$$&&(window.$=a,window.$$=a.all))})();
