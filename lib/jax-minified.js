var JAX=function(a,b){if("string"===typeof a){b=b||document;var c=b.querySelector(a);return c?JAX.Node.create(c):null}return"object"===typeof a&&a.nodeType?JAX.Node.create(a):a&&a instanceof JAX.Node?a:null};
JAX.all=function(a,b){if("string"===typeof a){b=b||document;for(var c=b.querySelectorAll(a),d=Array(c.length),e=0,f=c.length;e<f;e++)d[e]=JAX.Node.create(c[e]);return new JAX.NodeArray(d)}return"object"===typeof a&&a.nodeType?new JAX.NodeArray(JAX.Node.create(a)):a&&a instanceof JAX.Node?new JAX.NodeArray(a):null};
JAX.make=function(a,b,c,d){b=b||{};c=c||{};d=d||document;if(!a||"string"!==typeof a)throw Error("First argument must be string.");if("object"!==typeof b)throw Error("Second argument must be associative array.");if("object"!==typeof c)throw Error("Third argument must be associative array.");if("object"!==typeof d||!d.nodeType&&-1===[9,11].indexOf(d.nodeType))throw Error("Fourth argument must be document element.");var e=a.match(/^([a-zA-Z]+[a-zA-Z0-9]*)/g)||[];if(1===e.length)a=a.substring(e[0].length,
a.length);else throw Error("Tagname must be first in element definition");for(var f="",g=0,h=a.length;g<h;g++){var l=a[g];"#"===l?(f="id",b.id=""):"."===l?(f="className",b.className=b.className?b.className+" ":""):f&&(b[f]+=l)}a=d.createElement(e);for(var k in b)a[k]=b[k];for(k in c)a.style[k]=c[k];b=Object.create(JAX.Node.prototype);b._init(a);return b};JAX.makeText=function(a,b){return JAX.Node.create((b||document).createTextNode(a))};
JAX.getTypeOf=function(a){if("number"===typeof a)return"number";if("string"===typeof a)return"string";if("undefined"===typeof a)return"undefined";if("function"===typeof a)return"function";if(!0===a||!1===a)return"boolean";if(null===a)return"null";a=Object.prototype.toString.call(a);return"[object Array]"===a?"array":"[object Date]"===a?"date":"object"};JAX.Node=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.0"});JAX.Node.ELEMENT_NODE=1;JAX.Node.TEXT_NODE=3;JAX.Node.COMMENT_NODE=8;
JAX.Node.DOCUMENT_NODE=9;JAX.Node.DOCUMENT_FRAGMENT_NODE=11;JAX.Node.instances={};JAX.Node.instances[JAX.Node.ELEMENT_NODE]={};JAX.Node.instances[JAX.Node.TEXT_NODE]={};JAX.Node.instances[JAX.Node.COMMENT_NODE]={};JAX.Node.instances[JAX.Node.DOCUMENT_NODE]={};JAX.Node.instances[JAX.Node.DOCUMENT_FRAGMENT_NODE]={};JAX.Node._ids={};JAX.Node._ids[JAX.Node.ELEMENT_NODE]=0;JAX.Node._ids[JAX.Node.TEXT_NODE]=0;JAX.Node._ids[JAX.Node.COMMENT_NODE]=0;JAX.Node._ids[JAX.Node.DOCUMENT_NODE]=0;
JAX.Node._ids[JAX.Node.DOCUMENT_FRAGMENT_NODE]=0;JAX.Node._MEASUREABLEVALUE_REGEXP=/^(?:-)?\d+(\.\d+)?(%|em|in|cm|mm|ex|pt|pc)?$/i;JAX.Node._OPACITY_REGEXP=/alpha\(opacity=['"]?([0-9]+)['"]?\)/i;JAX.Node._BOX_SIZING=null;(function(){var a={boxSizing:"box-sizing",mozBoxSizing:"-moz-box-sizing",WebkitBoxSizing:"-webkit-box-sizing"},b=document.createElement("div"),c;for(c in a)if(c in b.style){JAX.Node._BOX_SIZING=a[c];break}})();
JAX.Node.create=function(a){if("object"===typeof a&&a.nodeType){var b=a.nodeType;if(b in JAX.Node.instances)switch(b){case JAX.Node.ELEMENT_NODE:b=parseInt(a.getAttribute("data-jax-id"),10);"number"!==typeof b&&(b=-1);if(-1<b&&(b=JAX.Node.instances[JAX.Node.ELEMENT_NODE][b])){if(b.instance.node()==a)return b.instance;a.removeAttribute("data-jax-id")}break;default:var c=-1,d=JAX.Node.instances[b],e;for(e in d)if(a===d[e].node){c=e;break}if(-1<c)return JAX.Node.instances[b][c].instance}b=Object.create(JAX.Node.prototype);
b._init(a);return b}throw Error("First argument must be html element");};JAX.Node.prototype.$constructor=function(){throw Error("You can not call this class with operator new. Use JAX.Node.create factory method instead of it");};
JAX.Node.prototype.$destructor=function(){-1!==[1,9].indexOf(this._node.nodeType)&&this.stopListening();-1!==[1,3,8].indexOf(this._node.nodeType)&&this.remove();this._node.nodeType in JAX.Node.instances&&delete JAX.Node.instances[this._node.nodeType][this._jaxId];this._storage=this._node=null;this._jaxId=-1};JAX.Node.prototype.node=function(){return this._node};JAX.Node.prototype.find=function(a){return JAX(a,this._node)};JAX.Node.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Node.prototype.addClass=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.addClass","You can not use this method for this node. Doing nothing.",this._node),this;a instanceof Array||(a=[].concat(a));for(var b=0,c=a.length;b<c;b++){var d=a[b];"string"!==typeof d&&(d+="",JAX.Report.show("error","JAX.Node.addClass","Given arguments can be string or array of strings. Trying convert to string: "+d,this._node));JAK.DOM.addClass(this._node,d)}return this};
JAX.Node.prototype.removeClass=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.removeClass","You can not use this method for this node. Doing nothing.",this._node),this;a instanceof Array||(a=[].concat(a));for(var b=0,c=a.length;b<c;b++){var d=a[b];"string"!==typeof d&&(d+="",JAX.Report.show("error","JAX.Node.removeClass","Given arguments can be string, array of strings. Trying convert to string: "+d,this._node));JAK.DOM.removeClass(this._node,d)}return this};
JAX.Node.prototype.hasClass=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.hasClass","You can not use this method for this node. Doing nothing.",this._node),this;"string"!==typeof a&&(a+="",JAX.Report.show("error","JAX.Node.hasClass","For first argument I expected string. Trying convert to string: "+a,this._node));for(a=a.split(" ");a.length;){var b=a.shift();if(-1===this._node.className.indexOf(b))return!1}return!0};
JAX.Node.prototype.id=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.id","You can not use this method for this node. Doing nothing.",this._node),this;if(!arguments.length)return this.attr("id");"string"!==typeof a&&(a+="",JAX.Report.show("warn","JAX.Node.id","For first argument I expected string. Trying convert to string: "+a,this._node));this.attr({id:a});return this};
JAX.Node.prototype.html=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.html","You can not use this method for this node. Doing nothing.",this._node),this;if(!arguments.length)return this._node.innerHTML;"string"!==typeof a&&"number"!==typeof a&&(a+="",JAX.Report.show("warn","JAX.Node.html","For first argument I expected string or number. Trying convert to string: "+a,this._node));this._node.innerHTML=a+"";return this};
JAX.Node.prototype.text=function(a){if(-1===[1,3,8].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.text","You can not use this method for this node. Doing nothing.",this._node),this;if(!arguments.length)return"innerHTML"in this._node?this._getText(this._node):this._nodeValue;"innerHTML"in this._node?(this.clear(),this._node.appendChild(this._node.ownerDocument.createTextNode(a))):"nodeValue"in this._node&&(this._node.nodeValue=a);return this};
JAX.Node.prototype.add=function(a){a instanceof JAX.NodeArray?a=a.items():a instanceof Array||(a=[].concat(a));for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!d.nodeType&&!(d instanceof JAX.Node))throw Error("For arguments I expected html node, text node or JAX.Node instance. You can use array of them.");d=d.jaxNodeType?d.node():d;this._node.appendChild(d)}return this};
JAX.Node.prototype.addBefore=function(a,b){if(a&&"object"!==typeof a||!a.nodeType&&!(a instanceof JAX.Node))throw Error("For first argument I expected html element, text node, documentFragment or JAX.Node instance");if(b&&"object"!==typeof b||!b.nodeType&&!(b instanceof JAX.Node))throw Error("For second argument I expected html element, text node or JAX.Node instance");a=a.jaxNodeType?a.node():a;b=b.jaxNodeType?b.node():b;this._node.insertBefore(a,b);return this};
JAX.Node.prototype.appendTo=function(a){if(a=JAX(a))return a=a.jaxNodeType?a.node():a,a.appendChild(this._node),this;throw Error("I could not find given element. For first argument I expected html element, documentFragment or JAX.Node instance");};
JAX.Node.prototype.appendBefore=function(a){if(a=JAX(a))return a=a.jaxNodeType?a.node():a,a.parentNode.insertBefore(this._node,a),this;throw Error("I could not find given element. For first argument I expected html element, text node or JAX.Node instance");};
JAX.Node.prototype.appendAfter=function(a){if(a=JAX(a))return a=a.jaxNodeType?a.node():a,a.nextSibling?a.parentNode.insertBefore(this._node,a.nextSibling):a.parentNode.appendChild(this._node),this;throw Error("I could not find given element. For first argument I expected html element, text node or JAX.Node instance");};
JAX.Node.prototype.replaceWith=function(a){if(a=JAX(a))return a=a.jaxNodeType?a.node():a,this.appendBefore(a),a.parentNode.removeChild(a),this;throw Error("For first argument I expected html element, text node or JAX.Node instance");};JAX.Node.prototype.remove=function(){if(-1!==[9,11].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.remove","You can not use this method for this node. Doing nothing.",this._node),this;this._node.parentNode.removeChild(this._node);return this};
JAX.Node.prototype.clone=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.clone","You can not use this method for this node. Doing nothing.",this._node),this;a=this._node.cloneNode(!!a);a.removeAttribute&&a.removeAttribute("data-jax-id");if(a.querySelectorAll)for(var b=a.querySelectorAll("*[data-jax-id]"),c=0,d=b.length;c<d;c++)b[c].removeAttribute("data-jax-id");return JAX.Node.create(a)};
JAX.Node.prototype.listen=function(a,b,c,d){if(-1===[1,9].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.listen","You can not use this method for this node. Doing nothing.",this._node),this;c||(c=b,b=window);"string"!==typeof a&&(a+="",JAX.Report.show("error","JAX.Node.listen","For first argument I expected string. Trying convert to string: "+a,this._node));if("string"!==typeof c&&"function"!==typeof c)throw Error("For second argument I expected string or function");if("object"!==
typeof b)throw Error("For third argument I expected referred object");if("string"===typeof c){c=b[c];if(!c)throw Error("Given method in second argument was not found in referred object given in third argument");c=c.bind(b)}var e=JAK.Events.addListener(this._node,a,function(a,b){c(new JAX.Event(a),JAX(b),d)});b=this._storage.events[a]||[];e=new JAX.Listener(this,e);b.push(e);this._storage.events[a]=b;return e};
JAX.Node.prototype.stopListening=function(a){if(-1===[1,9].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.stopListening","You can not use this method for this node. Doing nothing.",this._node),this;if(!arguments.length){var b=this._storage.events,c;for(c in b)this._destroyEvents(b[c]);this._storage.events={};return this}if("string"==typeof a&&(b=this._storage.events[a]))return this._destroyEvents(b),this._storage.events[a]=[],this;if(a instanceof JAX.Listener)for(c in this._storage.events){var b=
this._storage.events[c],d=b.indexOf(a);if(-1<d)return this._destroyEvents([b[d]]),b.splice(d,1),b.length||delete this._storage.events[c],this}JAX.Report.show("error","JAX.Node.stopListening","For first argument I expected JAX.Listener instance , string with event type or you can call it without arguments.");return this};
JAX.Node.prototype.prop=function(a,b){if("string"===typeof a){if(1===arguments.length)return this._node[a];this._node[a]=b;2<arguments.length&&JAX.Report.warn("warn","JAX.Node.attr","Too much arguments.",this._node);return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[f]=this._node[f]}return c}for(f in a)this._node[f]=a[f];return this};
JAX.Node.prototype.attr=function(a,b){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.attr","You can not use this method for this node. Doing nothing.",this._node),this;if("string"===typeof a){if(1===arguments.length)return this._node.getAttribute(a);this._node.setAttribute(a,b+"");2<arguments.length&&JAX.Report.warn("warn","JAX.Node.attr","Too much arguments.",this._node);return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[f]=this._node.getAttribute(f)}return c}for(f in a)this._node.setAttribute(f,
a[f]);return this};
JAX.Node.prototype.css=function(a,b){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.css","You can not use this method for this node. Doing nothing.",this._node),this;if("string"===typeof a){if(1===arguments.length)return"opacity"===a?this._getOpacity():this._node.style[a];this._node.style[a]=b;2<arguments.length&&JAX.Report.warn("warn","JAX.Node.css","Too much arguments.",this._node);return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var f=a[d];c[f]="opacity"===
f?this._getOpacity():this._node.style[f]}return c}for(f in a)b=a[f],"opacity"===f?this._setOpacity(b):this._node.style[f]=b;return this};
JAX.Node.prototype.computedCss=function(a){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.computedCss","You can not use this method for this node. Doing nothing.",this._node),this;if("string"===typeof a){var b=JAK.DOM.getStyle(this._node,a);this._node.runtimeStyle&&(!this._node.addEventListener&&JAX.Node._MEASUREABLEVALUE_REGEXP.test(b))&&(b=this._inPixels(b));return b}for(var c={},d=0,e=a.length;d<e;d++){var f=a[d],b=JAK.DOM.getStyle(this._node,f);this._node.runtimeStyle&&(!this._node.addEventListener&&
JAX.Node._MEASUREABLEVALUE_REGEXP.test(b))&&(b=this._inPixels(b));c[f]=b}return c};
JAX.Node.prototype.fullSize=function(a,b){if(-1===[1].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.fullSize","You can not use this method for this node. Doing nothing.",this._node),this;if(1===arguments.length){var c=this.css(["display","visibility","position"]);this.css({display:"",visibility:"hidden",position:"absolute"});var d="width"==a?this._node.offsetWidth:this._node.offsetHeight;this.css(c);return d}b=this._getSizeWithBoxSizing(a,b);this._node.style[a]=Math.max(b,0)+
"px";return this};
JAX.Node.prototype.size=function(a,b){if(-1===[1].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.fullSize","You can not use this method for this node. Doing nothing.",this._node),this;if(1===arguments.length){var c=parseInt(this.computedCss(a),10);if(isFinite(c))return c;var d=this.css(["display","visibility","position"]),c=0===this.computedCss("position").indexOf("fixed"),e=0===this.css("display").indexOf("none");c||this.css("position","absolute");e&&this.css("display","");
this.css("visibility","hidden");c=this._getSizeWithBoxSizing(a);this.css(d);return c}b=parseInt(b,10);this._node.style[a]=Math.max(b,0)+"px";return this};JAX.Node.prototype.parent=function(){return this._node.parentNode?JAX.Node.create(this._node.parentNode):null};JAX.Node.prototype.next=function(){return this._node.nextSibling?JAX(this._node.nextSibling):null};JAX.Node.prototype.previous=function(){return this._node.previousSibling?JAX(this._node.previousSibling):null};
JAX.Node.prototype.childs=function(){if(!this._node.childNodes)return[];for(var a=[],b=0,c=this._node.childNodes.length;b<c;b++)a.push(JAX(this._node.childNodes[b]));return new JAX.NodeArray(a)};JAX.Node.prototype.first=function(){return this._node.firstChild?JAX(this._node.firstChild):null};JAX.Node.prototype.last=function(){return this._node.lastChild?JAX(this._node.lastChild):null};
JAX.Node.prototype.clear=function(){if(-1===[1,3,11].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.clear","You can not use this method for this node. Doing nothing.",this._node),this;if(3==this._node.nodeType)return this._node.nodeValue="",this;JAK.DOM.clear(this._node);return this};
JAX.Node.prototype.eq=function(a){return!a?!1:"object"===typeof a&&(a.nodeType||a instanceof JAX.Node)?(a.jaxNodeType?a.node():a)==this._node:"string"===typeof a?/^[a-zA-Z0-9]+$/g.test(a)?!!(this._node.tagName&&this._node.tagName.toLowerCase()==a):!!this.parent().findAll(a).filterItems(function(a){return a.eq(this._node)}.bind(this)).length:!1};
JAX.Node.prototype.contains=function(a){if(!a)return!1;if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.contains","You can not use this method for this node. Doing nothing.",this._node),!1;if("object"===typeof a&&(a.nodeType||a instanceof JAX.Node)){for(a=a.jaxNodeType?a.node().parentNode:a.parentNode;a;){if(a===this._node)return!0;a=a.parentNode}return!1}if("string"===typeof a)return!!this.find(a);throw Error("For first argument I expected html element, text node, string with CSS3 compatible selector or JAX.Node instance");
};
JAX.Node.prototype.isIn=function(a){if(!a)return!1;if(-1===[1,3,8].indexOf(this._node.nodeType))return JAX.Report.show("warn","JAX.Node.contains","You can not use this method for this node. Doing nothing.",this._node),!1;if("object"===typeof a&&(a.nodeType||a instanceof JAX.Node))return(a.jaxNodeType?a:JAX.Node.create(a)).contains(this);if("string"===typeof a){if(/^[a-zA-Z0-9]+$/g.test(a)){var b=this._node;for(a=a.toLowerCase();b=b.parentNode;)if(b.tagName&&b.tagName.toLowerCase()==a)return!0;return!1}return!!JAX.all(a).filterItems(function(a){return a.contains(this._node)}.bind(this)).length}throw Error("For first argument I expected html element or JAX.Node instance");};
JAX.Node.prototype.animate=function(a,b,c,d){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.animate","You can not use this method for this node. Doing nothing.",this._node),this;b=parseFloat(b)||0;"string"!==typeof a&&(type+="",JAX.Report.show("error","JAX.Node.animate","For first argument I expected string. Trying convert to string: "+type,this._node));0>b&&(b=0,JAX.Report.show("error","JAX.Node.animate","For second argument I expected positive number, but I got negative. I set zero value.",
this._node));var e=new JAX.FX(this);e.addProperty(a,b,c,d);return e.run()};
JAX.Node.prototype.fade=function(a,b){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.fade","You can not use this method for this node. Doing nothing.",this._node),this;"string"!==typeof a&&(a+="",JAX.Report.show("error","JAX.Node.fade","For first argument I expected string. Trying convert to string: "+a,this._node));b=parseFloat(b)||0;0>b&&(b=0,JAX.Report.show("error","JAX.Node.fade","For second argument I expected positive number, but I got negative. I set zero value.",this._node));
switch(a){case "in":return this.animate("opacity",b,0,1);case "out":return this.animate("opacity",b,1,0);default:return JAX.Report.show("warn","JAX.Node.fade","I got unsupported type '"+a+"'.",this._node),this}};
JAX.Node.prototype.fadeTo=function(a,b){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.fadeTo","You can not use this method for this node. Doing nothing.",this._node),this;a=parseFloat(a)||0;b=parseFloat(b)||0;0>a&&(a=0,JAX.Report.show("error","JAX.Node.fadeTo","For first argument I expected positive number, but I got negative. I set zero value.",this._node));0>b&&(b=0,JAX.Report.show("error","JAX.Node.fadeTo","For second argument I expected positive number, but I got negative. I set zero value.",
this._node));return this.animate("opacity",b,null,a)};
JAX.Node.prototype.slide=function(a,b){if(1!==this._node.nodeType)return JAX.Report.show("warn","JAX.Node.slide","You can not use this method for this node. Doing nothing.",this._node),this;b=parseFloat(b)||0;"string"!==typeof a&&(a+="",JAX.Report.show("error","JAX.Node.slide","For first argument I expected string. Trying convert to string: "+a,this._node));0>b&&(b=0,JAX.Report.show("error","JAX.Node.slide","For second argument I expected positive number, but I got negative. I set zero value.",this._node));
var c={};switch(a){case "down":var c=this.css(["overflow","height"]),d="height",e=0,f=null;break;case "up":d="height";e=null;f=0;break;case "left":d="width";e=null;f=0;break;case "right":c=this.css(["overflow","width"]);d="width";e=0;f=null;break;default:return JAX.Report.show("warn","JAX.Node.slide","I got unsupported type '"+a+"'.",this._node),this}this.css("overflow","hidden");var g=function(){this.css(c)}.bind(this);return this.animate(d,b,e,f).callWhenDone(g)};
JAX.Node.prototype._init=function(a){this._node=a;this.jaxNodeType=this._node.nodeType;var b=-1;a.getAttribute&&(b=parseInt(a.getAttribute("data-jax-id"),10),"number"!==typeof b&&(b=-1));if(-1<b)this._jaxId=b,this._storage=JAX.Node.instances[JAX.Node.ELEMENT_NODE][this._jaxId],this._storage.instance=this;else if(this._node.nodeType in JAX.Node.instances)switch(this._node.nodeType){case JAX.Node.ELEMENT_NODE:this._jaxId=JAX.Node._ids[JAX.Node.ELEMENT_NODE]++;this._node.setAttribute("data-jax-id",this._jaxId);
a={instance:this,events:{}};this._storage=JAX.Node.instances[JAX.Node.ELEMENT_NODE][this._jaxId]=a;break;case JAX.Node.TEXT_NODE:case JAX.Node.COMMENT_NODE:case JAX.Node.DOCUMENT_FRAGMENT_NODE:b=this._node.nodeType;this._jaxId=JAX.Node._ids[b]++;a={instance:this,node:a};this._storage=JAX.Node.instances[b][this._jaxId]=a;break;case JAX.Node.DOCUMENT_NODE:this._jaxId=JAX.Node._ids[JAX.Node.DOCUMENT_NODE]++,a={instance:this,events:{},node:a},this._storage=JAX.Node.instances[JAX.Node.DOCUMENT_NODE][this._jaxId]=
a}};JAX.Node.prototype._inPixels=function(a){var b=this._node.style.left,c=this._node.runtimeStyle.left;this._node.runtimeStyle.left=this._node.currentStyle.left;this._node.style.left=a||0;a=this._node.style.pixelLeft;this._node.style.left=b;this._node.runtimeStyle.left=c;return a};
JAX.Node.prototype._setOpacity=function(a){var b="";"ie"===JAK.Browser.client&&9>JAK.Browser.version?(b="filter",a=Math.round(100*a),a="progid:DXImageTransform.Microsoft.Alpha(opacity="+a+");"):b="opacity";this._node.style[b]=a+""};JAX.Node.prototype._getOpacity=function(){if("ie"===JAK.Browser.client&&9>JAK.Browser.version){var a="";this._node.style.filter.replace(JAX.NODE.OPACITY_REGEXP,function(b,c){a=c});return a?parseInt(a,10)/100+"":a}return this._node.style.opacity};
JAX.Node.prototype._getSizeWithBoxSizing=function(a,b){var c=JAX.Node._BOX_SIZING?this.computedCss(JAX.Node._BOX_SIZING):null,d=0,e=0,f=0,g=0,h="padding-"+("width"==a?"left":"top"),l="padding-"+("width"==a?"right":"bottom"),k="border-"+("width"==a?"left":"top"),m="border-"+("width"==a?"right":"bottom");1===arguments.length&&(b="width"==a?this._node.offsetWidth:this._node.offsetHeight);if(!c||"content-box"===c)d=parseFloat(this.computedCss(h)),e=parseFloat(this.computedCss(l));"border-box"!==c&&(f=
parseFloat(this.computedCss(k)),g=parseFloat(this.computedCss(m)));d&&isFinite(d)&&(b=-d);e&&isFinite(e)&&(b=-e);f&&isFinite(f)&&(b=-f);g&&isFinite(g)&&(b=-g);return b};JAX.Node.prototype._getText=function(a){for(var b="",c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c],f=e.tagName?e.tagName.toLowerCase():"";e.childNodes&&e.childNodes.length?b+=this._getText(e):"br"==f?b+="\n":e.nodeValue&&(b+=e.nodeValue)}return b};
JAX.Node.prototype._destroyEvents=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].id();JAK.Events.removeListener(d)}};JAX.NodeArray=JAK.ClassMaker.makeClass({NAME:"JAX.NodeArray",VERSION:"1.0"});
JAX.NodeArray.prototype.$constructor=function(a){a=[].concat(a);var b=a.length;this._jaxNodes=Array(b);for(var c=0;c<b;c++){var d=a[c];if("object"===typeof d&&d.nodeType)this._jaxNodes[c]=JAX(d);else if(d instanceof JAX.Node)this._jaxNodes[c]=d;else throw Error("First argument must be array of JAX.Node instances or html nodes");}this.length=b};JAX.NodeArray.prototype.item=function(a){return this._jaxNodes[a||0]};
JAX.NodeArray.prototype.items=function(a,b){if(!arguments.length)return this._jaxNodes.slice();b=b||this._jaxNodes.length;return this._jaxNodes.slice(a||0,b)};JAX.NodeArray.prototype.addClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].addClass(a);return this};JAX.NodeArray.prototype.haveClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].hasClass(a))return!1;return!0};
JAX.NodeArray.prototype.removeClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].removeClass(a);return this};JAX.NodeArray.prototype.attr=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].attr(a,b);return this};JAX.NodeArray.prototype.css=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].css(a,b);return this};
JAX.NodeArray.prototype.prop=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].prop(a,b);return this};JAX.NodeArray.prototype.appendTo=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].appendTo(a);return this};JAX.NodeArray.prototype.remove=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].removeFromDOM();return this};
JAX.NodeArray.prototype.areIn=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].isIn(a))return!1;return!0};JAX.NodeArray.prototype.destroyNodes=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].$destructor();this._jaxNodes=[]};JAX.NodeArray.prototype.listen=function(a,b,c,d){for(var e=this._jaxNodes.length,f=Array(e),g=0;g<e;g++)f[g]=this._jaxNodes[g].listen(a,b,c,d);return f};
JAX.NodeArray.prototype.forEachItem=function(a,b){this._jaxNodes.forEach(a,b||this);return this};JAX.NodeArray.prototype.filterItems=function(a,b){var c=this._jaxNodes.filter(a,b||this);return new JAX.NodeArray(c)};JAX.NodeArray.prototype.pushItem=function(a){a=JAX(a);this.length++;this._jaxNodes.push(a);return this};JAX.NodeArray.prototype.popItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.pop()};
JAX.NodeArray.prototype.shiftItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.shift()};JAX.NodeArray.prototype.unshiftItem=function(a){a=JAX(a);this.length++;this._jaxNodes.unshift(a);return this};JAX.NodeArray.prototype.fade=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].fade(a,b);return JAK.Promise.when(c)};
JAX.NodeArray.prototype.fadeTo=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].fadeTo(a,b);return JAK.Promise.when(c)};JAX.NodeArray.prototype.slide=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].slide(a,b);return JAK.Promise.when(c)};JAX.Event=JAK.ClassMaker.makeClass({NAME:"JAX.Event",VERSION:"1.0"});JAX.Event.prototype.$constructor=function(a){this._e=a};
JAX.Event.prototype.event=function(){return this._e};JAX.Event.prototype.cancel=function(){JAK.Events.cancelDef(this._e);return this};JAX.Event.prototype.stop=function(){JAK.Events.stopEvent(this._e);return this};JAX.Event.prototype.target=function(){return JAX(JAK.Events.getTarget(this._e))};JAX.Event.prototype.type=function(){return this._e.type};JAX.Listener=JAK.ClassMaker.makeClass({NAME:"JAX.Listener",VERSION:"1.0"});JAX.Listener.prototype.$constructor=function(a,b){this._jaxElm=a;this._id=b};
JAX.Listener.prototype.unregister=function(){this._id&&(this._jaxElm.stopListening(this),this._id=null)};JAX.Listener.prototype.node=function(){return this._node};JAX.Listener.prototype.id=function(){return this._id};JAX.DOMBuilder=JAK.ClassMaker.makeClass({NAME:"JAX.DOMBuilder",VERSION:"2.0"});JAX.DOMBuilder.prototype.$constructor=function(a){this._doc=a||document;this._jax={container:JAX.Node.create(document.createDocumentFragment())};this._pointerJaxNode=null;this._stack=[]};
JAX.DOMBuilder.prototype.open=function(a,b,c){if("string"===typeof a||"object"===typeof a&&a.nodeType)return this._stack.push(this._pointerJaxNode),this._pointerJaxNode=this.add(a,b,c);throw Error("First argument must be string with JAX.make compatible definition, node or instance of JAX.Node");};
JAX.DOMBuilder.prototype.add=function(a,b,c){var d=a;"string"===typeof a?d=JAX.make(a,b,c):"object"===typeof a&&a.nodeType&&(d=JAX(a),b&&d.attr(b),c&&d.style(c));if(!(d instanceof JAX.Node)||9===d.jaxNodeType)throw Error("First argument must be string with JAX.make compatible definition, node or instance of JAX.Node");b&&d.attr(b);c&&d.css(c);this._pointerJaxNode?this._pointerJaxNode.add(d):this._jax.container.add(d);return d};
JAX.DOMBuilder.prototype.addText=function(a){if("string"===typeof a)return a=JAX.makeText(a),this._pointerJaxNode?this._pointerJaxNode.add(a):this._jax.container.add(a),a;throw Error("First argument must be a string");};JAX.DOMBuilder.prototype.close=function(){if(this._stack.length)return this._pointerJaxNode=this._stack.pop(),this;throw Error("There is no opened element so you can not close anything");};
JAX.DOMBuilder.prototype.appendTo=function(a){var b=null;"object"===typeof a&&a.nodeType||"string"===typeof a?b=JAX(a):a instanceof JAX.Node&&1===a.jaxNodeType&&(b=a);if(!b)throw Error("You are trying to append me to unsupported or null element. I can be appended only to html element or documentFragment element.");this._jax.container.appendTo(b);return this};JAX.DOMBuilder.prototype.getContainer=function(){return this._jax.container};
JAX.DOMBuilder.prototype.clear=function(){this._jax.container.clear();this._stack=[];return this};JAX.FX=JAK.ClassMaker.makeClass({NAME:"JAX.FX",VERSION:"1.0",DEPEND:[{sClass:JAK.CSSInterpolator,ver:"2.1"}]});JAX.FX._TRANSITION_PROPERTY="";JAX.FX._TRANSITION_EVENT="";
(function(){var a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MSTransition:"MSTransitionEnd"},b;for(b in a)if(b in document.createElement("div").style){JAX.FX._TRANSITION_PROPERTY=b;JAX.FX._TRANSITION_EVENT=a[b];break}})();
JAX.FX._SUPPORTED_PROPERTIES={width:{defaultUnit:"px",css:"width"},height:{defaultUnit:"px",css:"height"},top:{defaultUnit:"px",css:"top"},left:{defaultUnit:"px",css:"left"},bottom:{defaultUnit:"px",css:"bottom"},right:{defaultUnit:"px",css:"right"},fontSize:{defaultUnit:"px",css:"font-size"},opacity:{defaultUnit:"",css:"opacity"},color:{defaultUnit:"",css:"color"},backgroundColor:{defaultUnit:"",css:"background-color"}};JAX.FX._SUPPORTED_METHODS="ease linear ease-in ease-out ease-in-out cubic-bezier".split(" ");
JAX.FX.prototype.$constructor=function(a){this._elm=a instanceof JAX.Node?a:JAX.Node.create(a);this._properties=[];this._interpolators=[];this._transitionCount=0;this._running=!1;this._transitionSupport=!!JAX.FX._TRANSITION_PROPERTY};
JAX.FX.prototype.addProperty=function(a,b,c,d,e){b=parseInt(b);e=this._transitionSupport?e||"linear":"LINEAR";if("string"!=typeof a)throw Error("For first argument I expected string");if(!isFinite(b)||0>b)throw Error("For second argument I expected positive number");if(c&&"string"!=typeof c&&("number"!=typeof c||!isFinite(c)))throw Error("For third argument I expected string, number or null for automatic checking");if(d&&"string"!=typeof d&&("number"!=typeof d||!isFinite(d)))throw Error("For fourth argument I expected string or number");
if(null===c&&null===d)throw Error("At least one of start and end values must be defined.");if("string"!=typeof e)throw Error("For fifth argument I expected string");this._checkSupportedProperty(a);this._checkSupportedMethod(e);d=d||"number"==typeof d&&isFinite(d)?this._parseCSSValue(a,d):this._foundCSSValue(a);c=c||"number"==typeof c&&isFinite(c)?this._parseCSSValue(a,c):this._foundCSSValue(a);this._properties.push({property:a,cssStart:c,cssEnd:d,duration:b||1,method:e});return this};
JAX.FX.prototype.run=function(){this._running=!0;this._promise=new JAK.Promise;if(!this._transitionSupport)return this._initInterpolators(),this;this._initTransition();return this._promise};JAX.FX.prototype.isRunning=function(){return this._running};JAX.FX.prototype.stop=function(){if(!this._transitionSupport)return this._stopInterpolators(),this;this._stopTransition();return this};
JAX.FX.prototype._checkSupportedProperty=function(a){if(!(a in JAX.FX._SUPPORTED_PROPERTIES)){a=[];for(var b in JAX.FX._SUPPORTED_PROPERTIES)a.concat(JAX.FX._SUPPORTED_PROPERTIES[b]);throw Error("First argument must be supported property: "+a.join(", "));}};
JAX.FX.prototype._checkSupportedMethod=function(a){a=a.toLowerCase();if(!(-1<JAX.FX._SUPPORTED_METHODS.indexOf(a)||0==a.indexOf("cubic-bezier"))){a=[];for(var b in JAX.FX._SUPPORTED_METHODS)a.concat(JAX.FX._SUPPORTED_METHODS[b]);throw Error("Fifth argument must be supported method: "+a.join(", "));}};
JAX.FX.prototype._initInterpolators=function(){for(var a=0,b=this._properties.length;a<b;a++){var c=this._properties[a],d=new JAK.CSSInterpolator(this._elm.node(),1E3*c.duration,{interpolation:c.method,endCallback:this._endInterpolator.bind(this,a)});this._interpolators.push(d);-1!==["backgroundColor","color"].indexOf(c.property)?d.addColorProperty(c.property,c.cssStart.value,c.cssEnd.value):d.addProperty(c.property,c.cssStart.value,c.cssEnd.value,c.cssStart.unit);d.start()}};
JAX.FX.prototype._stopInterpolators=function(){for(var a=0,b=this._interpolators.length;a<b;a++)this._endInterpolator(a);this._promise.reject(this._elm)};
JAX.FX.prototype._initTransition=function(){for(var a=JAX.FX._TRANSITION_PROPERTY,b=JAX.FX._TRANSITION_EVENT,c=[],d=this._elm.node(),e=d.style,f=0,g=this._properties.length;f<g;f++){var h=this._properties[f];e[h.property]=h.cssStart.value+h.cssStart.unit;c.push(JAX.FX._SUPPORTED_PROPERTIES[h.property].css+" "+h.duration+"s "+h.method);this._transitionCount++}setTimeout(function(){d.style[a]=c.join(",");this._ecTransition=this._elm.listen(b,this,"_endTransition");for(var f=0,g=this._properties.length;f<
g;f++){var h=this._properties[f];e[h.property]=h.cssEnd.value+h.cssStart.unit}}.bind(this),0)};JAX.FX.prototype._stopTransition=function(){for(var a=this._elm.node(),b=this._elm.node().style,c=0,d=this._properties.length;c<d;c++){var e=this._properties[c].property,f=window.getComputedStyle(a).getPropertyValue(JAX.FX._SUPPORTED_PROPERTIES[e].css);b[e]=f}this._endTransition();this._promise.reject(this._elm)};
JAX.FX.prototype._parseCSSValue=function(a,b){var c=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;if("backgroundColor"==a||"color"==a)var d=b;else{var d=parseFloat(b),e=(b+"").replace(d,"");e&&(c=e)}return{value:d,unit:c}};
JAX.FX.prototype._foundCSSValue=function(a){var b=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;switch(a){case "width":case "height":a=this._elm.size(a);break;case "backgroundColor":case "color":a=this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[a].css);break;default:a=this._elm.computedCss(JAX.FX._SUPPORTED_PROPERTIES[a].css),a=parseFloat(a)}return{value:a,unit:b}};
JAX.FX.prototype._endInterpolator=function(a){this._interpolators[a].stop();this._interpolators.splice(a,1);this._interpolators.length||(this._running=!1,this._promise.fulfill(this._elm))};JAX.FX.prototype._endTransition=function(){this._transitionCount--;this._transitionCount||(this._elm.stopListening(this._ecTransition),this._elm.node().style[JAX.FX._TRANSITION_PROPERTY]="none",this._ecTransition=null,this._running=!1,this._promise.fulfill(this._elm))};
JAX.Report=JAK.ClassMaker.makeStatic({NAME:"JAX.Report",VERSION:"1.0"});JAX.Report.show=function(a,b,c,d){console.DEBUG=1;if(console[a])console[a]("["+b+"] \u00bb "+c),d&&console.log("Node: ",d);else throw Error("Bad console type: "+a);};
