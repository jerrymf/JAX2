var JAX=function(a,b){if(!a)return new JAX.NullNode;if(a instanceof JAX.Node)return a;if("string"==typeof a){b=b||document;if(b!=document){var c=JAX(b);if(!c.exists())return console.error("JAX: Second argument must be valid element."),new JAX.NullNode("string"==typeof b?a:"");b=c.node()}var d=(c=b.querySelector(a))?c.nodeType:-1}else JAX.isDOMElement(a)?(d=!("nodeType"in a)?-2:a.nodeType,c=a):(d=-1,c=null);switch(d){case -2:return new JAX.Window(c);case -1:return new JAX.NullNode("string"==typeof a?
a:"");case 1:return new JAX.Element(c);case 3:case 8:return new JAX.TextNode(c);case 9:return new JAX.Document(c);case 11:return new JAX.DocumentFragment(c)}};JAX.all=function(a,b){if(!a)return JAX.NodeArray([]);if("string"==typeof a){b=b||document;if(b!=document){var c=JAX(b);if(!c.exists())return console.error("JAX.all: Second argument must be valid element."),new JAX.NullNode;b=c.node()}for(var c=b.querySelectorAll(a),d=Array(c.length),e=0,g=c.length;e<g;e++)d[e]=c[e];return new JAX.NodeArray(d)}return new JAX.NodeArray(a)};
JAX.make=function(a,b,c,d){b=b||{};c=c||{};d=d||document;if(!a||"string"!=typeof a)return console.error("JAX.make: First argument must be string."),JAX(null);"object"!=typeof b&&(console.error("JAX.make: Second argument must be associative array."),b={});"object"!=typeof c&&(console.error("JAX.make: Third argument must be associative array."),c={});if("object"!=typeof d||!d.nodeType&&-1==[9,11].indexOf(d.nodeType))console.error("JAX.make: Fourth argument must be document element."),d=document;a=a.match(/[#.]?[a-z0-9_-]+/ig)||
[];var e=a[0];if(!e||!/^[a-z0-9]+$/ig.test(e))return console.error("JAX.make: Tagname must be first in element definition."),JAX(null);for(var g=0,h=a.length;g<h;g++){var k=a[g],r=k.charAt(0);"#"==r?b.id=k.substring(1):"."==r&&(b.className?(b.className+=" ",b.className+=k.substring(1)):b.className=k.substring(1))}d=d.createElement(e);for(var l in b)d[l]=b[l];for(l in c)d.style[l]=c[l];return new JAX.Element(d)};JAX.makeFromHTML=function(a){return!a?new JAX.NodeArray([]):JAX.make("div").html(a).children()};
JAX.makeText=function(a,b){return new JAX.TextNode((b||document).createTextNode(a))};JAX.getTypeOf=function(a){if("number"==typeof a)return"number";if("string"==typeof a)return"string";if("undefined"==typeof a)return"undefined";if("function"==typeof a)return"function";if(!0===a||!1===a)return"boolean";if(null===a)return"null";a=Object.prototype.toString.call(a);return"[object Array]"==a?"array":"[object Date]"==a?"date":"object"};
JAX.isDOMElement=function(a){if(!a||"object"!=typeof a)return!1;if(a==window||a.Window&&a instanceof a.Window||-1<a.constructor.toString().indexOf("DOMWindow"))return!0;var b=a.defaultView||a.parentWindow||(a.ownerDocument?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:null);return b&&(b.HTMLElement&&a instanceof b.HTMLElement||b.Element&&a instanceof b.Element||b.HTMLDocument&&a instanceof b.HTMLDocument||b.Document&&a instanceof b.Document||b.DocumentFragment&&a instanceof b.DocumentFragment||
b.Text&&a instanceof b.Text)};JAX.IListening=JAK.ClassMaker.makeInterface({NAME:"JAX.IListening",VERSION:"1.0"});JAX.IListening._events=[];
JAX.IListening.prototype.listen=function(a,b,c,d){c||(c=b,b=window);"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));if(!b||"object"!=typeof b&&"function"!=typeof b)console.error("For second argument I expected referred object or binded function.",this._node),b=function(){},c=null;c&&("string"!=typeof c&&"function"!=typeof c)&&(console.error("For third argument I expected string with function name or function.",this._node),b=function(){},c=null);"string"==
typeof c?(c=b[c])?c=c.bind(b):(console.error("Given method in second argument was not found in referred object given in third argument.",this._node),c=function(){}):"function"==typeof c&&b?c=c.bind(b):"function"==typeof b&&(c=b);b=function(a,b){c(new JAX.Event(a),d)};var e=JAK.Events.addListener(this._node,a,b);b=new JAX.Listener(this,e,a,b);for(var e=JAX.IListening._events,g=-1,h=0,k=e.length;h<k;h++)if(e[h].node==this._node){g=h;break}-1==g?(g={node:this._node,events:{}},e.push(g)):g=e[g];g.events[a]?
g.events[a].push(b):g.events[a]=[b];return b};
JAX.IListening.prototype.stopListening=function(a){for(var b=JAX.IListening._events,c=-1,d=0,e=b.length;d<e;d++)if(b[d].node==this._node){c=d;break}if(-1==c)return this;d=b[c];if(!arguments.length){var d=d.events,g;for(g in d)this._destroyEvents(d[g]);b.splice(c,1);return this}if("string"==typeof a)return g=d.events[a],this._destroyEvents(g),delete b[c].events[a],this;if(a instanceof JAX.Listener)return g=d.events[a.type()],b=g.indexOf(a),-1<b&&(this._destroyEvents([g[b]]),g.splice(b,1)),this;console.error("For first argument I expected JAX.Listener instance, string with event type or you can call it without arguments.");
return this};JAX.Event=JAK.ClassMaker.makeClass({NAME:"JAX.Event",VERSION:"1.0"});JAX.Event.prototype.$constructor=function(a){this._e=a};JAX.Event.prototype.event=function(){return this._e};JAX.Event.prototype.prevent=function(){JAK.Events.cancelDef(this._e);return this};JAX.Event.prototype.stop=function(){JAK.Events.stopEvent(this._e);return this};JAX.Event.prototype.target=function(){return JAX(JAK.Events.getTarget(this._e))};JAX.Event.prototype.currentTarget=function(){return JAX(this._e.currentTarget)};
JAX.Event.prototype.type=function(){return this._e.type};JAX.Listener=JAK.ClassMaker.makeClass({NAME:"JAX.Listener",VERSION:"1.0"});JAX.Listener.prototype.$constructor=function(a,b,c,d){this._jaxElm=a;this._type=c;this._method=d;this._id=b};JAX.Listener.prototype.unregister=function(){this._id&&(this._jaxElm.stopListening(this),this._id=null)};JAX.Listener.prototype.node=function(){return this._jaxElm.node()};JAX.Listener.prototype.id=function(){return this._id};JAX.Listener.prototype.type=function(){return this._type};
JAX.ListenerArray=JAK.ClassMaker.makeClass({NAME:"JAX.ListenerArray",VERSION:"1.0"});JAX.ListenerArray.prototype.$constructor=function(a){this._listeners=a};JAX.ListenerArray.prototype.unregister=function(){for(var a=0,b=this._listeners.length;a<b;a++)this._listeners[a].unregister();this._listeners=[]};JAX.ListenerArray.prototype.getListeners=function(){return this._listeners.slice()};JAX.Node=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.1"});
JAX.Node.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};JAX.Node.prototype.$destructor=function(){};JAX.Node.prototype.node=function(){return this._node};JAX.Node.prototype.exists=function(){return!!this._node};JAX.Node.prototype.find=function(a){this._showMessage("find");return new JAX.Node};JAX.Node.prototype.findAll=function(a){this._showMessage("findAll");return new JAX.NodeArray([])};JAX.Node.prototype.addClass=function(a){this._showMessage("addClass");return this};
JAX.Node.prototype.removeClass=function(a){this._showMessage("removeClass");return this};JAX.Node.prototype.hasClass=function(a){this._showMessage("hasClass");return!1};JAX.Node.prototype.toggleClass=function(a){this._showMessage("toggleClass");return this};JAX.Node.prototype.id=function(a){this._showMessage("id");return arguments.length?this:""};JAX.Node.prototype.html=function(a){this._showMessage("html");return arguments.length?this:""};
JAX.Node.prototype.text=function(a){this._showMessage("text");return arguments.length?this:""};JAX.Node.prototype.add=function(a){this._showMessage("add");return this};JAX.Node.prototype.insertFirst=function(a){this._showMessage("inserFirst");return this};JAX.Node.prototype.addBefore=function(a,b){this._showMessage("addBefore");return this};JAX.Node.prototype.appendTo=function(a){this._showMessage("appendTo");return this};JAX.Node.prototype.before=function(a){this._showMessage("before");return this};
JAX.Node.prototype.after=function(a){this._showMessage("after");return this};JAX.Node.prototype.replaceWith=function(a){this._showMessage("replaceWith");return this};JAX.Node.prototype.swapPlaceWith=function(a){this._showMessage("swapPlaceWith");return this};JAX.Node.prototype.remove=function(){this._showMessage("remove");return this};JAX.Node.prototype.clone=function(a){this._showMessage("clone");return this};
JAX.Node.prototype.listen=function(a,b,c,d){this._showMessage("listen");return new JAX.Listener(this,null,a,f)};JAX.Node.prototype.stopListening=function(a){this._showMessage("stopListening");return this};JAX.Node.prototype.prop=function(a,b){this._showMessage("prop");return"string"==typeof a?"":a instanceof Array?{}:this};JAX.Node.prototype.attr=function(a,b){this._showMessage("attr");return"string"==typeof a?"":a instanceof Array?{}:this};
JAX.Node.prototype.css=function(a,b){this._showMessage("css");return"string"==typeof a?"":a instanceof Array?{}:this};JAX.Node.prototype.computedCss=function(a){this._showMessage("computedCss");return typeof a?"":{}};JAX.Node.prototype.fullSize=function(a,b){this._showMessage("fullSize");return 1==arguments.length?0:this};JAX.Node.prototype.size=function(a,b){this._showMessage("size");return 1==arguments.length?0:this};JAX.Node.prototype.parent=function(){this._showMessage("parent");return new JAX.Node};
JAX.Node.prototype.next=function(){this._showMessage("next");return new JAX.Node};JAX.Node.prototype.previous=function(){this._showMessage("previous");return new JAX.Node};JAX.Node.prototype.children=function(a){this._showMessage("children");return arguments.length?new JAX.Node:new JAX.NodeArray([])};JAX.Node.prototype.first=function(){this._showMessage("first");return new JAX.Node};JAX.Node.prototype.last=function(){this._showMessage("last");return new JAX.Node};
JAX.Node.prototype.clear=function(){this._showMessage("clear");return new JAX.Node};JAX.Node.prototype.eq=function(a){this._showMessage("eq");return a&&a instanceof JAX.Node};JAX.Node.prototype.contains=function(a){this._showMessage("contains");return!1};JAX.Node.prototype.isIn=function(a){this._showMessage("isIn");return!1};JAX.Node.prototype.animate=function(a,b,c,d){this._showMessage("animate");return(new JAK.Promise).reject(this._node)};
JAX.Node.prototype.fade=function(a,b){this._showMessage("fade");return(new JAK.Promise).reject(this._node)};JAX.Node.prototype.fadeTo=function(a,b){this._showMessage("fadeTo");return(new JAK.Promise).reject(this._node)};JAX.Node.prototype.slide=function(a,b){this._showMessage("slide");return(new JAK.Promise).reject(this._node)};JAX.Node.prototype.scroll=function(a,b,c){this._showMessage("scroll");return(new JAK.Promise).reject(this._node)};
JAX.Node.prototype._showMessage=function(a){console.error("You are trying to use unsupported method '"+a+"' with my node.",this._node)};JAX.DOMNode=JAK.ClassMaker.makeClass({NAME:"JAX.DOMNode",VERSION:"1.0",EXTEND:JAX.Node});JAX.DOMNode.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};
JAX.DOMNode.prototype.add=function(a){("string"==typeof a?JAX.makeFromHTML(a).appendTo(this):JAX.all(a).appendTo(this)).length||console.error("JAX.DOMNode.add: There was no node added.");return this};
JAX.DOMNode.prototype.insertFirst=function(a){a=JAX(a);if(a.exists())return a=a.node(),this._node.childNodes&&this._node.firstChild?this._node.insertBefore(a,this._node.firstChild):this._node.childNodes?this._node.appendChild(a):console.error("JAX.DOMNode.insertFirst: Given element can not have child nodes.",this._node),this;console.error("JAX.DOMNode.insertFirst: I could not find given element. For first argument I expected html element, text node or JAX.Node.");return this};
JAX.DOMNode.prototype.addBefore=function(a,b){var c=JAX(a),d=JAX(b);if(!c.exists())return console.error("JAX.DOMNode.addBefore: For first argument I expected html element, text node, documentFragment or JAX.Node."),this;if(!d.exists())return console.error("JAX.DOMNode.addBefore: For second argument I expected html element, text node or JAX.Node."),this;this._node.insertBefore(c.node(),d.node());return this};
JAX.DOMNode.prototype.appendTo=function(a){a=JAX(a);if(a.exists())return a.node().appendChild(this._node),this;console.error("JAX.DOMNode.append: I could not find given element. For first argument I expected html element, documentFragment or JAX node.");return this};
JAX.DOMNode.prototype.before=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.parentNode.insertBefore(this._node,a),this;console.error("JAX.DOMNode.before: I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.DOMNode.prototype.after=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.nextSibling?a.parentNode.insertBefore(this._node,a.nextSibling):a.parentNode.appendChild(this._node),this;console.error("JAX.DOMNode.after: I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.DOMNode.prototype.replaceWith=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.parentNode.replaceChild(this._node,a),this;console.error("JAX.DOMNode.replaceWith: For first argument I expected html element, text node or JAX node.");return this};
JAX.DOMNode.prototype.swapPlaceWith=function(a){a=JAX(a);if(a.exists()){var b=a.node(),c=b.nextSibling,d=b.parentNode;this._node.parentNode?this._node.parentNode.replaceChild(b,this._node):d&&a.remove();d&&(c?d.insertBefore(this._node,c):d.appendChild(this._node));return this}console.error("JAX.DOMNode.swapPlaceWith: For first argument I expected html element, text node or JAX node.");return this};
JAX.DOMNode.prototype.remove=function(){if(this._node.parentNode)return this._node.parentNode.removeChild(this._node),this;console.error("JAX.DOMNode.remove: I can not remove node with no parentNode.");return this};JAX.DOMNode.prototype.clone=function(a){return new this(this._node.cloneNode(!!a))};
JAX.DOMNode.prototype.prop=function(a,b){if("string"==typeof a){if(1==arguments.length)return this._node[a];this._node[a]=b;return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var g=a[d];c[g]=this._node[g]}return c}for(g in a)this._node[g]=a[g];return this};
JAX.DOMNode.prototype.isIn=function(a){if(!a)return!1;if("string"==typeof a)return/^[#.a-z0-9_-]+$/ig.test(a)?!!JAK.DOM.findParent(this._node,a):!!JAX.all(a).filterItems(function(a){return a.contains(this._node)}.bind(this)).length;a=JAX(a);return a.exists()&&a.contains(this)};JAX.DOMNode.prototype.parent=function(){return JAX(this._node.parentNode)};JAX.DOMNode.prototype.next=function(){return JAX(this._node.nextSibling)};JAX.DOMNode.prototype.previous=function(){return JAX(this._node.previousSibling)};
JAX.Element=JAK.ClassMaker.makeClass({NAME:"JAX.Element",VERSION:"1.0",EXTEND:JAX.DOMNode,IMPLEMENT:JAX.IListening});JAX.Element._events=[];JAX.Element._OPACITY_REGEXP=/alpha\(opacity=['"]?([0-9]+)['"]?\)/i;JAX.Element._BOX_SIZING=null;JAX.Element._TEST=document.createElement("div");(function(){var a={boxSizing:"box-sizing",MozBoxSizing:"-moz-box-sizing",webkitBoxSizing:"-webkit-box-sizing"},b=document.createElement("div"),c;for(c in a)if(c in b.style){JAX.Element._BOX_SIZING=a[c];break}})();
JAX.Element.prototype.$constructor=function(a){this.$super(a)};JAX.Element.prototype.$destructor=function(){this.stopListening();this._node=null};JAX.Element.prototype.find=function(a){return JAX(a,this._node)};JAX.Element.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Element.prototype.addClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.addClass: Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.add(a[b]);return this};
JAX.Element.prototype.removeClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.removeClass: Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.remove(a[b]);return this};
JAX.Element.prototype.hasClass=function(a){a=a.trim();if(""==a)return!0;"string"!=typeof a&&(a+="",console.error("JAX.Element.hasClass: For my argument I expected string.",this._node));if(""==a)return!1;for(a=a.split(" ");a.length;){var b=a.shift();if(!this._node.classList.contains(b))return!1}return!0};
JAX.Element.prototype.toggleClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.toggleClass: For my argument I expected string.",this._node));this._node.classList.toggle(a);return this};JAX.Element.prototype.id=function(a){if(!arguments.length)return this.attr("id");"string"!=typeof a&&(a+="",console.error("JAX.Element.id: For my argument I expected string.",this._node));this.attr({id:a});return this};
JAX.Element.prototype.html=function(a){if(!arguments.length)return this._node.innerHTML;"string"!=typeof a&&"number"!=typeof a&&console.error("JAX.Element.html: For my argument I expected string or number.",this._node);this._node.innerHTML=a+"";return this};
JAX.Element.prototype.text=function(a){"string"!=typeof innerHTML&&"number"!=typeof innerHTML&&console.error("JAX.Element.text: For my argument I expected string or number.",this._node);if(!arguments.length&&"innerHTML"in this._node)return this._getText(this._node);"innerHTML"in this._node&&(this.clear(),this._node.appendChild(this._node.ownerDocument.createTextNode(a+"")));return this};
JAX.Element.prototype.attr=function(a,b){if("string"==typeof a){if(1==arguments.length)return this._node.getAttribute(a);this._node.setAttribute(a,b+"");return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var g=a[d];c[g]=this._node.getAttribute(g)}return c}for(g in a)this._node.setAttribute(g,a[g]);return this};
JAX.Element.prototype.removeAttr=function(a){if("string"==typeof a)return this._node.removeAttribute(a),this;if(property instanceof Array){for(var b=0,c=a.length;b<c;b++)this._node.removeAttribute(a[b]);return this}console.error("JAX.Element.removeAttr: For first argument I expected string or array of strings.",this._node);return this};
JAX.Element.prototype.css=function(a,b){if("string"==typeof a){if(-1<a.indexOf(" ")&&(a=this._findMyProperty(a),!a))return 1==arguments.length?"":this;if(1==arguments.length)return"opacity"==a?this._getOpacity():this._node.style[a];"opacity"==a?this._setOpacity(b):this._node.style[a]=b;return this}if(a instanceof Array){for(var c={},d=0,e=a.length;d<e;d++){var g=a[d];if(-1<g.indexOf(" ")&&(g=this._findMyProperty(g),!g))continue;c[g]="opacity"==g?this._getOpacity():this._node.style[g]}return c}for(g in a){b=
a[g];if(-1<g.indexOf(" ")&&(g=this._findMyProperty(g),!g))continue;"opacity"==g?this._setOpacity(b):this._node.style[g]=b}return this};JAX.Element.prototype.computedCss=function(a){if("string"==typeof a){var b=JAX.Element.getComputedStyle(this._node).getPropertyValue(a);return b}for(var c={},d=0,e=a.length;d<e;d++){var g=a[d],b=JAX.Element.getComputedStyle(this._node).getPropertyValue(g);c[g]=b}return c};
JAX.Element.prototype.fullSize=function(a,b){if(1==arguments.length)return"width"==a?this._node.offsetWidth:this._node.offsetHeight;b=this._getSizeWithBoxSizing(a,b);this._node.style[a]=Math.max(b,0)+"px";return this};JAX.Element.prototype.size=function(a,b){if(1==arguments.length){var c=parseInt(this.computedCss(a),10);return isFinite(c)?c:c=this._getSizeWithBoxSizing(a)}b=parseInt(b,10);this._node.style[a]=Math.max(b,0)+"px";return this};
JAX.Element.prototype.children=function(a){if(!arguments.length){for(var b=[],c=0,d=this._node.childNodes.length;c<d;c++)b.push(JAX(this._node.childNodes[c]));return new JAX.NodeArray(b)}return(b=this._node.childNodes[a])?JAX(b):new JAX.NullNode};
JAX.Element.prototype.first=function(){if("firstElementChild"in this._node)return JAX(this._node.firstElementChild);if(!this._node.childNodes||!this._node.childNodes.length)return new JAX.NullNode;for(var a=0,b=this._node.childNodes.length;a<b;a++){var c=this._node.childNodes[a];if(1==c.nodeType)return JAX(c)}return new JAX.NullNode};
JAX.Element.prototype.last=function(){if("lastElementChild"in this._node)return JAX(this._node.lastElementChild);if(!this._node.childNodes||!this._node.childNodes.length)return new JAX.NullNode;for(var a=this._node.childNodes.length-1;-1<a;a--){var b=this._node.childNodes[a];if(1==b.nodeType)return JAX(b)}return new JAX.NullNode};JAX.Element.prototype.clear=function(){"innerHTML"in this._node&&JAK.DOM.clear(this._node);return this};
JAX.Element.prototype.eq=function(a){return!a?!1:"string"==typeof a?/^[a-zA-Z0-9]+$/g.test(a)?!!(this._node.tagName&&this._node.tagName.toLowerCase()==a):!!this.parent().findAll(a).filterItems(function(a){return a.eq(this._node)},this).length:JAX(a).node()==this._node};
JAX.Element.prototype.contains=function(a){if(!a)return!1;if("string"==typeof a)return!!this.find(a);a=JAX(a);if(a.exists()){for(a=a.node().parentNode;a;){if(a==this._node)return!0;a=a.parentNode}return!1}console.error("JAX.Element.contains: For first argument I expected html element, text node, string with CSS3 compatible selector or JAX.Node.");return!1};
JAX.Element.prototype.animate=function(a,b,c,d){"string"!=typeof a&&(type+="",console.error("For first argument I expected string.",this._node));var e=new JAX.FX(this);e.addProperty(a,b,c,d);e.run();return e};
JAX.Element.prototype.fade=function(a,b){"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));switch(a){case "in":return this.animate("opacity",b,0,1);case "out":return this.animate("opacity",b,1,0);default:console.error("I got unsupported type '"+a+"'.",this._node);var c=new JAX.FX(null);c.run();return c}};
JAX.Element.prototype.fadeTo=function(a,b){a=parseFloat(a)||0;0>a&&(a=0,console.error("For first argument I expected positive number, but I got negative. I set zero value.",this._node));return this.animate("opacity",b,null,a)};
JAX.Element.prototype.slide=function(a,b){"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));var c={};switch(a){case "down":var c=this.css(["overflow","height"]),d="height",e=0,g=null;break;case "up":d="height";e=null;g=0;break;case "left":d="width";e=null;g=0;break;case "right":c=this.css(["overflow","width"]);d="width";e=0;g=null;break;default:return console.error("I got unsupported type '"+a+"'.",this._node),d=new JAX.FX(null),d.run(),d}this.css("overflow",
"hidden");var h=function(){this.css(c)}.bind(this),d=this.animate(d,b,e,g);d.then(h);return d};
JAX.Element.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");var d=this._node.scrollLeft,e=this._node.scrollTop;if(1==arguments.length){switch(a.toLowerCase()){case "top":d=e;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),d=0}return d}d=parseFloat(b);isFinite(d)||console.error("I expected Number or string with number for my second argument.",this._node);
a=a.toLowerCase();if(!c){switch(a){case "top":this._node.scrollTop=b;break;case "left":this._node.scrollLeft=b}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);d=new JAX.FX.Scrolling(this);d.addProperty(a,b,c);d.run();return d};
JAX.Element.prototype._setOpacity=function(a){var b="",c="";"ie"==JAK.Browser.client&&9>JAK.Browser.version?(b="filter",""!=a&&(c=Math.round(100*a)+"",c="progid:DXImageTransform.Microsoft.Alpha(opacity="+c+");")):(c=a+"",b="opacity");this._node.style[b]=c};JAX.Element.prototype._getOpacity=function(){if("ie"==JAK.Browser.client&&9>JAK.Browser.version){var a="";this._node.style.filter.replace(JAX.ELEMENT._OPACITY_REGEXP,function(b,c){a=c});return a?parseFloat(a)/100+"":a}return this._node.style.opacity};
JAX.Element.prototype._getSizeWithBoxSizing=function(a,b){var c=JAX.Node._BOX_SIZING?this.computedCss(JAX.Node._BOX_SIZING):"",d=0,e=0,g=0,h=0,k="padding-"+("width"==a?"left":"top"),r="padding-"+("width"==a?"right":"bottom"),l="border-"+("width"==a?"left":"top"),m="border-"+("width"==a?"right":"bottom");1==arguments.length&&(b="width"==a?this._node.offsetWidth:this._node.offsetHeight);if(!c||"content-box"==c)d=parseFloat(this.computedCss(k)),e=parseFloat(this.computedCss(r));"border-box"!=c&&(g=parseFloat(this.computedCss(l)),
h=parseFloat(this.computedCss(m)));d&&isFinite(d)&&(b-=d);e&&isFinite(e)&&(b-=e);g&&isFinite(g)&&(b-=g);h&&isFinite(h)&&(b-=h);return b};JAX.Element.prototype._getText=function(a){for(var b="",c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c];e.tagName&&e.tagName.toLowerCase();b=e.childNodes&&e.childNodes.length?b+this._getText(e):e.nodeValue?b+e.nodeValue:b+" "}return b};JAX.Element.prototype._destroyEvents=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].id();JAK.Events.removeListener(d)}};
JAX.Element.prototype._findMyProperty=function(a){for(var b=a.trim().split(" "),c=JAX.Element._TEST.style,d=0,e=b.length;d<e;d++)if(a=b[d],a in c)return a;return""};
(function(){if(window.getComputedStyle)JAX.Element.getComputedStyle=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,"")};else{var a=function(a){var b="";a.filter.replace(/alpha\(opacity=['"]?([0-9]+)['"]?\)/i,function(a,c){b=c});return b?parseFloat(b)/100+"":b},b=function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})},c=function(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},d=function(a,b,c,d){switch(b){case "em":return a*d;case "in":return 96*
a;case "pt":return 96*a/72;case "pc":return 1152*a/72;case "cm":return 37.7952*a;case "mm":return 37.7952*a/10;case "%":return a/100*c;default:return a}},e=function(a){if(!a)return 16;var b=a.currentStyle.fontSize,c=parseFloat(b),b=b.split(/\d/)[0];return/%|em/.test(b)?e(a.parentElement):d(c,b)},g=function(a,b,c,d){c=b.boxSizing;var e=0,g=0,h=0,n=0,q="padding"+("width"==a?"Left":"Top"),u="padding"+("width"==a?"Right":"Bottom"),s="border"+("width"==a?"LeftWidth":"Top");a="border"+("width"==a?"RightWidth":
"Bottom");if(!c||"content-box"==c)e=parseFloat(b[q]),g=parseFloat(b[u]);"border-box"!=c&&(h=parseFloat(b[s]),n=parseFloat(b[a]));e&&isFinite(e)&&(d-=e);g&&isFinite(g)&&(d-=g);h&&isFinite(h)&&(d-=h);n&&isFinite(n)&&(d-=n);return d},h=function(b){var h=b.currentStyle,l=e(b),m=0;for(property in h){this[m]=c(property);if(/margin.|padding.|border.+W|^fontSize$/.test(property)&&"auto"!=h[property]){var v=property,t,p=b,n=property;t=l;var q=h[n],u=parseFloat(q),q=q.split(/\d/)[0];if("fontSize"==n)p=t;else if(p.parentElement!=
p.ownerDocument){var n=p.parentElement,s=document.createElement("jaxtempxyz");s.style.display="block";n.appendChild(s);p=s.offsetWidth;n.removeChild(s)}else p=p.parentElement.documentElement.clientWidth;t=d(u,q,p,t)||0;this[v]=t+"px"}else if("styleFloat"==property)this["float"]=h[property];else if(-1<["left","right","top","bottom"].indexOf(property)&&-1<["absolute","relative","fixed"].indexOf(h.position)&&"auto"!=h[property]){v=property;n=b;q=property;t=l;p=h[q];u=parseFloat(p);p=p.split(/\d/)[0];
s=0;a:{for(q="left"==q||"right"==q?"clientWidth":"clientHeight";n.parentElement&&n.parentElement.currentStyle;)if(n=n.parentElement,-1!=["absolute","relative","fixed"].indexOf(n.currentStyle.position||"")){s=n[q];break a}s=n.ownerDocument.documentElement[q]}t=d(u,p,s,t);this[v]=t+"px"}else try{this[property]=h[property]}catch(w){this[property]=""}m++}this.length=m;m=h.width;this.width="auto"!=m?-1<m.indexOf("px")?m:g("width",this,l,b.offsetWidth)+"px":m;m=h.height;this.height="auto"!=m?-1<m.indexOf("px")?
m:g("height",this,l,b.offsetHeight)+"px":m;this.opacity=a(h)};h.prototype.getPropertyPriority=function(){throw Error("NotSupportedError: DOM Exception 9");};h.prototype.getPropertyValue=function(a){return this[b(a)]||""};h.prototype.item=function(a){return this[a]};h.prototype.removeProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};h.prototype.setProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};h.prototype.getPropertyCSSValue=function(){throw Error("NotSupportedError: DOM Exception 9");
};JAX.Element.getComputedStyle=function(a){return new h(a)}}})();JAX.TextNode=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.0",EXTEND:JAX.DOMNode});JAX.TextNode.prototype.$constructor=function(a){this.$super(a)};JAX.TextNode.prototype.text=function(a){if(!arguments.length)return this._node.nodeValue;this._node.nodeValue=a;return this};JAX.TextNode.prototype.clear=function(){this._node.nodeValue="";return this};JAX.TextNode.prototype.eq=function(a){return!a?!1:JAX(a).node()==this._node};
JAX.TextNode.prototype.add=function(a){this._showMessage();return this};JAX.TextNode.prototype.insertFirst=function(a,b){this._showMessage();return this};JAX.TextNode.prototype.addBefore=function(a,b){this._showMessage();return this};JAX.Document=JAK.ClassMaker.makeClass({NAME:"JAX.Document",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IListening]});JAX.Document.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};JAX.Document.prototype.find=function(a){return JAX(a,this._node)};
JAX.Document.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Document.prototype.size=function(a){if(1<arguments.length)return console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this;switch(a){case "width":return Math.max(this._node.body.scrollWidth,this._node.documentElement.scrollWidth,this._node.body.offsetWidth,this._node.documentElement.offsetWidth,this._node.body.clientWidth,this._node.documentElement.clientWidth);case "height":return Math.max(this._node.body.scrollHeight,this._node.documentElement.scrollHeight,
this._node.body.offsetHeight,this._node.documentElement.offsetHeight,this._node.body.clientHeight,this._node.documentElement.clientHeight);default:return console.error("You gave me an unsupported size type. I expected 'width' or 'height'.",this._node),0}};JAX.Document.prototype.fullSize=function(a){return 1<arguments.length?(console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this):this.size(a)};
JAX.Document.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");var d=JAK.DOM.getScrollPos(),e=d.x,d=d.y;if(1==arguments.length){switch(a.toLowerCase()){case "top":e=d;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),e=0}return e}e=parseFloat(b);isFinite(e)||console.error("I expected Number or string with number for my second argument.",this._node);a=a.toLowerCase();
if(!c){switch(a){case "top":this._node.documentElement.scrollTop=b;break;case "left":this._node.documentElement.scrollLeft=b}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);e=new JAX.FX.Scrolling(this);e.addProperty(a,b,c);e.run();return e};JAX.DocumentFragment=JAK.ClassMaker.makeClass({NAME:"JAX.DocumentFragment",VERSION:"1.0",EXTEND:JAX.DOMNode});JAX.DocumentFragment.prototype.$constructor=function(a){this.$super(a)};
JAX.DocumentFragment.prototype.find=function(a){return JAX(a,this._node)};JAX.DocumentFragment.prototype.findAll=function(a){return JAX.all(a,this._node)};JAX.DocumentFragment.prototype.remove=function(){this._showMessage();return this};JAX.NullNode=JAK.ClassMaker.makeClass({NAME:"JAX.NullNode",VERSION:"1.0",EXTEND:JAX.Node});JAX.NullNode.prototype.$constructor=function(a){this._selector=a||"";this._node=null;this.jaxNodeType=-1};
JAX.NullNode.prototype._showMessage=function(a){this._selector?console.error("You are trying to work with null node. There is no match for your selector: '"+this._selector+"'."):console.error("Hello! I am null node. It means you are trying to work with not existing node. Be careful what you do. Try to use JAX.Node.exists method for checking if element is found.")};JAX.Window=JAK.ClassMaker.makeClass({NAME:"JAX.Window",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IListening]});
JAX.Window.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=-2};
JAX.Window.prototype.size=function(a){if(1<arguments.length)return console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this;"width"!=a&&"height"!=a&&console.error("You gave me an unsupported size type. I expected 'width' or 'height'.",this._node);if("innerWidth"in window)return"width"==a?window.innerWidth:window.innerHeight;if("clientWidth"in document.documentElement)return"width"==a?document.documentElement.clientWidth:document.documentElement.clientHeight;if("clientWidth"in
document.body)return"width"==a?document.body.clientWidth:document.body.clientHeight;console.error("You have probably unsupported browser.",this._node);return 0};
JAX.Window.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");if("pageXOffset"in this._node)var d=this._node.pageXOffset,e=this._node.pageYOffset;else e=JAK.DOM.getScrollPos(),d=e.x,e=e.y;if(1==arguments.length){switch(a.toLowerCase()){case "top":d=e;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),d=0}return d}var g=parseFloat(b);isFinite(g)||console.error("I expected Number or string with number for my second argument.",
this._node);a=a.toLowerCase();if(!c){switch(a){case "top":this._node.scrollTo(d,b);break;case "left":this._node.scrollTo(b,e)}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);d=new JAX.FX.Scrolling(this);d.addProperty(a,b,c);d.run();return d};JAX.NodeArray=JAK.ClassMaker.makeClass({NAME:"JAX.NodeArray",VERSION:"1.1"});
JAX.NodeArray.prototype.$constructor=function(a){a=a instanceof JAX.NodeArray?a.items():[].concat(a);this.length=0;this._jaxNodes=[];for(var b=0,c=a.length;b<c;b++){var d=a[b];JAX(d).exists()&&(this.length++,this._jaxNodes.push(JAX(d)))}this.length!=a.length&&console.error("First argument can be only html node, JAX node, array of them or instance of JAX.NodeArray.")};
JAX.NodeArray.prototype.exist=function(){if(!this._jaxNodes.length)return!1;for(var a=0,b=this._jaxNodes.length;a<b;a++)if(!this._jaxNodes[a].exists())return!1;return!0};JAX.NodeArray.prototype.item=function(a){return this._jaxNodes[a||0]};JAX.NodeArray.prototype.items=function(a,b){if(!arguments.length)return this._jaxNodes.slice();b="number"==typeof b||b?b:this._jaxNodes.length;return this._jaxNodes.slice("number"==typeof a||a?a:0,b)};
JAX.NodeArray.prototype.limit=function(a,b){return new JAX.NodeArray(this.items.apply(this,arguments))};JAX.NodeArray.prototype.index=function(a){a=JAX(a);a=a.node();for(var b=0,c=this._jaxNodes.length;b<c;b++)if(this._jaxNodes[b].node()==a)return b;return-1};JAX.NodeArray.prototype.firstElement=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)if(1==this._jaxNodes[a].jaxNodeType)return this._jaxNodes[a];return new JAX.NullNode};
JAX.NodeArray.prototype.lastElement=function(){for(var a=this._jaxNodes.length-1;0<=a;a--)if(1==this._jaxNodes[a].jaxNodeType)return this._jaxNodes[a];return new JAX.NullNode};JAX.NodeArray.prototype.addClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].addClass(a);return this};JAX.NodeArray.prototype.haveClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].hasClass(a))return!1;return!0};
JAX.NodeArray.prototype.toggleClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].toggleClass(a);return this};JAX.NodeArray.prototype.removeClass=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].removeClass(a);return this};JAX.NodeArray.prototype.attr=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].attr(a,b);return this};
JAX.NodeArray.prototype.removeAttr=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].removeAttr(a);return this};JAX.NodeArray.prototype.css=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].css(a,b);return this};JAX.NodeArray.prototype.prop=function(a,b){for(var c=0,d=this._jaxNodes.length;c<d;c++)this._jaxNodes[c].prop(a,b);return this};
JAX.NodeArray.prototype.appendTo=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].appendTo(a);return this};JAX.NodeArray.prototype.before=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].before(a);return this};JAX.NodeArray.prototype.remove=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].remove();return this};
JAX.NodeArray.prototype.areIn=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)if(!this._jaxNodes[b].isIn(a))return!1;return!0};JAX.NodeArray.prototype.destroyNodes=function(){for(var a=0,b=this._jaxNodes.length;a<b;a++)this._jaxNodes[a].$destructor();this._jaxNodes=[]};JAX.NodeArray.prototype.listen=function(a,b,c,d){for(var e=this._jaxNodes.length,g=Array(e),h=0;h<e;h++)g[h]=this._jaxNodes[h].listen(a,b,c,d);return new JAX.ListenerArray(g)};
JAX.NodeArray.prototype.stopListening=function(a){for(var b=0,c=this._jaxNodes.length;b<c;b++)this._jaxNodes[b].stopListening(a);return this};JAX.NodeArray.prototype.forEachItem=function(a,b){this._jaxNodes.forEach(a,b||this);return this};JAX.NodeArray.prototype.filterItems=function(a,b){var c=this._jaxNodes.filter(a,b||this);return new JAX.NodeArray(c)};JAX.NodeArray.prototype.firstItem=function(){var a=this._jaxNodes[0];return a?a:new JAX.NullNode};
JAX.NodeArray.prototype.lastItem=function(){var a=this._jaxNodes[this.length-1];return a?a:new JAX.NullNode};JAX.NodeArray.prototype.pushItem=function(a){a=JAX(a);this.length++;this._jaxNodes.push(a);return this};JAX.NodeArray.prototype.popItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.pop()};JAX.NodeArray.prototype.shiftItem=function(){this.length=Math.max(--this.length,0);return this._jaxNodes.shift()};
JAX.NodeArray.prototype.unshiftItem=function(a){a=JAX(a);this.length++;this._jaxNodes.unshift(a);return this};JAX.NodeArray.prototype.animate=function(a,b,c,d){for(var e=Array(this._jaxNodes.length),g=0,h=this._jaxNodes.length;g<h;g++)e[g]=this._jaxNodes[g].animate(a,b,c,d);return new JAX.FXArray(e)};JAX.NodeArray.prototype.fade=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].fade(a,b);return new JAX.FXArray(c)};
JAX.NodeArray.prototype.fadeTo=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].fadeTo(a,b);return new JAX.FXArray(c)};JAX.NodeArray.prototype.slide=function(a,b){for(var c=Array(this._jaxNodes.length),d=0,e=this._jaxNodes.length;d<e;d++)c[d]=this._jaxNodes[d].slide(a,b).getPromise();return new JAX.FXArray(c)};
JAX.NodeArray.prototype.scroll=function(a,b,c){for(var d=Array(this._jaxNodes.length),e=0,g=this._jaxNodes.length;e<g;e++)d[e]=this._jaxNodes[e].scroll(a,b,c);return new JAX.FXArray(d)};JAX.FX=JAK.ClassMaker.makeClass({NAME:"JAX.FX",VERSION:"1.1"});JAX.FX.isCSS3Supported=null;(function(){var a=document.createElement("div").style;JAX.FX.isCSS3Supported="transition"in a||"MozTransition"in a||"WebkitTransition"in a||"OTransition"in a||"MSTransition"in a})();JAX.FX.TRANSFORM="";
(function(){for(var a=["transform","WebkitTransform","OTransform","MozTransform","MSTransform"],b=0,c=a.length;b<c;b++){var d=a[b];if(d in document.createElement("div").style){JAX.FX.TRANSFORM=d;break}}})();
JAX.FX._SUPPORTED_PROPERTIES={width:{defaultUnit:"px"},maxWidth:{defaultUnit:"px"},minWidth:{defaultUnit:"px"},height:{defaultUnit:"px"},maxHeight:{defaultUnit:"px"},minHeight:{defaultUnit:"px"},top:{defaultUnit:"px"},left:{defaultUnit:"px"},bottom:{defaultUnit:"px"},right:{defaultUnit:"px"},paddingTop:{defaultUnit:"px"},paddingBottom:{defaultUnit:"px"},paddingLeft:{defaultUnit:"px"},paddingRight:{defaultUnit:"px"},marginTop:{defaultUnit:"px"},marginBottom:{defaultUnit:"px"},marginLeft:{defaultUnit:"px"},
marginRight:{defaultUnit:"px"},fontSize:{defaultUnit:"px"},transform:{defaultUnit:""},WebkitTransform:{defaultUnit:""},MozTransform:{defaultUnit:""},MSTransform:{defaultUnit:""},OTransform:{defaultUnit:""},opacity:{defaultUnit:""},color:{defaultUnit:""},backgroundColor:{defaultUnit:""}};JAX.FX._SUPPORTED_METHODS="ease linear ease-in ease-out ease-in-out cubic-bezier".split(" ");
JAX.FX.prototype.$constructor=function(a){this._jaxElm=JAX(a);this._jaxElm.exists()||console.error("JAX.FX: I got null node. Check your code please.");this._settings=[];this._running=this._reversed=!1;this._currentTime=this._startTime=this._maxDuration=0;this._promise={finished:null};this._processor=null};
JAX.FX.prototype.addProperty=function(a,b,c,d,e){if(!this._jaxElm.exists())return this;var g=this._parseValue(b);b=this._parseUnit(b)||"ms";e=JAX.FX.isCSS3Supported?e||"linear":"LINEAR";if("string"!=typeof a)return console.error("JAX.FX.addProperty: For first argument I expected string"),this;if(!(a in JAX.FX._SUPPORTED_PROPERTIES))return console.error("JAX.FX.addProperty: First argument must be supported property. You are trying to give me '"+a+"' which is unsupoorted."),this;if(!isFinite(g)||0>
g)return console.error("JAX.FX.addProperty: For second argument I expected positive number"),this;if(c&&"string"!=typeof c&&("number"!=typeof c||!isFinite(c)))return console.error("JAX.FX.addProperty: For third argument I expected string, number or null for automatic checking"),this;if(d&&"string"!=typeof d&&("number"!=typeof d||!isFinite(d)))return console.error("JAX.FX.addProperty: For fourth argument I expected string or number"),this;if(null==c&&null==d)return console.error("JAX.FX.addProperty: At least one of start and end values must be defined."),
this;if("string"!=typeof e)return console.error("JAX.FX.addProperty: For fifth argument I expected string"),this;-1==JAX.FX._SUPPORTED_METHODS.indexOf(e.toLowerCase())&&0!=e.toLowerCase().indexOf("cubic-bezier")&&(console.error("JAX.FX.addProperty: Fifth argument must be supported method. You are trying to give me '"+e+"' which is unsupoorted."),e=JAX.FX.isCSS3Supported?"linear":"LINEAR");d=d||"number"==typeof d&&isFinite(d)?this._parseCSSValue(a,d):this._foundCSSValue(a);c=c||"number"==typeof c&&
isFinite(c)?this._parseCSSValue(a,c):this._foundCSSValue(a);b={value:"ms"==b?g:1E3*g,unit:"ms"};this._maxDuration=Math.max(b.value,this._maxDuration);this._settings.push({property:a,startValue:c.value,startUnit:c.unit,endValue:d.value,endUnit:d.unit,durationValue:b.value,durationUnit:b.unit,method:e});return this};
JAX.FX.prototype.addTranslateProperty=function(a,b,c,d){if(!JAX.FX.isCSS3Supported){var e={x:"left",y:"top",z:""},g;for(g in b){var h=e[g];h&&this.addProperty(h,a,b[g],c[g],d)}console.info("JAX.FX.addTranslateProperty: There is no CSS3 transition support. I will use top or left instead of transform attribute.");return this}var e={x:"translateX(%v)",y:"translateY(%v)",z:"translateZ(%v)"},k=[];for(g in b){var r=this._parseValue(b[g]||0),l=this._parseUnit(b[g]||0)||"px";(h=e[g])&&k.push(h.replace("%v",
r+l))}if(!k.length)return console.error("JAX.FX.addTranslateProperty: I got unsupported start translate axis. Supported: x, y or z."),this;b=k.join(" ");k=[];for(g in c)r=this._parseValue(c[g]||0),l=this._parseUnit(c[g]||0)||"px",(h=e[g])&&k.push(h.replace("%v",r+l));if(!k.length)return console.error("JAX.FX.addTranslateProperty: I got unsupported end translate axis. Supported: x, y or z."),this;c=k.join(" ");this.addProperty(JAX.FX.TRANSFORM,a,b,c,d);return this};
JAX.FX.prototype.run=function(){if(this.isRunning())return this._promise.finished;if(!this._settings.length)return this._promise.finished=(new JAK.Promise).reject(this._jaxElm),console.error("JAX.FX.run: I have no added properties. FX will not run."),this;this._processor=JAX.FX.isCSS3Supported?new JAX.FX.CSS3(this._jaxElm):new JAX.FX.Interpolator(this._jaxElm);this._processor.set(this._settings);this._running=!0;this._startTime=(new Date).getTime();this._promise.finished=this._processor.run();this._promise.finished.then(this._finishAnimation.bind(this),
this._finishAnimation.bind(this));return this._promise.finished};JAX.FX.prototype.then=function(a,b){return this._promise.finished.then(a,b)};
JAX.FX.prototype.reverse=function(){this.isRunning()&&this.stop();if(!this._settings.length)return this._promise.finished=(new JAK.Promise).reject(this._jaxElm),console.error("JAX.FX.reverse: I have no added properties. FX will not run in reversed mode."),this;this._reversed=!this._reversed;for(var a=[],b=0,c=this._settings.length;b<c;b++){var d=this._settings[b],e=d.property,g=d.method,h=this._parseCSSValue(e,this._jaxElm.computedCss(this._styleToCSSProperty(e))),k=h.value,h=h.unit,r=d.durationUnit;
if(this._reversed)var l=Math.min(this._currentTime,d.durationValue),m=d.startValue,d=d.startUnit;else l=Math.max(d.durationValue-this._currentTime,0),m=d.endValue,d=d.endUnit;a.push({property:e,startValue:k,startUnit:h,endValue:m,endUnit:d,durationValue:l,durationUnit:r,method:g})}this._processor=JAX.FX.isCSS3Supported?new JAX.FX.CSS3(this._jaxElm):new JAX.FX.Interpolator(this._jaxElm);this._processor.set(a);this._running=!0;this._startTime=(new Date).getTime();this._promise.finished=this._processor.run();
this._promise.finished.then(this._finishAnimation.bind(this),this._finishAnimation.bind(this));return this._promise.finished};JAX.FX.prototype.isRunning=function(){return this._running};JAX.FX.prototype.stop=function(){this._running&&this._processor.stop();return this};
JAX.FX.prototype._parseCSSValue=function(a,b){var c=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;if("backgroundColor"==a||"color"==a||-1<a.toLowerCase().indexOf("transform"))var d=b;else d=this._parseValue(b),c=this._parseUnit(b)||c;return{value:d,unit:c}};JAX.FX.prototype._parseValue=function(a){return parseFloat(a)};JAX.FX.prototype._parseUnit=function(a){var b=parseFloat(a);return(a+"").replace(b,"")};
JAX.FX.prototype._foundCSSValue=function(a){var b=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;switch(a){case "width":case "height":a=this._jaxElm.size(a);break;case "backgroundColor":case "color":a=this._jaxElm.computedCss(this._styleToCSSProperty(a));break;default:a=this._jaxElm.computedCss(this._styleToCSSProperty(a)),a=parseFloat(a)}return{value:a,unit:b}};
JAX.FX.prototype._finishAnimation=function(){var a=(new Date).getTime()-this._startTime;this._reversed?(this._currentTime-=a,this._currentTime=Math.max(this._currentTime,0)):(this._currentTime+=a,this._currentTime=Math.min(this._currentTime,this._maxDuration));this._startTime=0;this._isRunning=!1};JAX.FX.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FXArray=JAK.ClassMaker.makeClass({NAME:"JAX.FXArray",VERSION:"1.0"});
JAX.FXArray.prototype.$constructor=function(a){this._fxArray=a};JAX.FXArray.prototype.getItems=function(){return this._fxArray.slice()};JAX.FXArray.prototype.run=function(){for(var a=this._fxArray.length,b=Array(a),c=0;c<a;c++)b[c]=this._fxArray[c].run();return this};
JAX.FXArray.prototype.then=function(a,b){for(var c=this._fxArray.length,d=Array(c),e=function(a){return a},g=0;g<c;g++)d[g]=this._fxArray[g].then(e,e);return JAK.Promise.when(d).then(function(b){b=new JAX.NodeArray(b);a(b)},function(a){a=new JAX.NodeArray(a);b(a)})};JAX.FXArray.prototype.stop=function(){for(var a=this._fxArray.length,b=0;b<a;b++)this._fxArray[b].stop();return this};
JAX.FXArray.prototype.reverse=function(){for(var a=this._fxArray.length,b=Array(a),c=0;c<a;c++)b[c]=this._fxArray[c].reverse();return this};JAX.FX.CSS3=JAK.ClassMaker.makeClass({NAME:"JAX.FX.CSS3",VERSION:"1.0"});JAX.FX.CSS3._TRANSITION_PROPERTY="";JAX.FX.CSS3._TRANSITION_EVENT="";
(function(){var a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"MSTransitionEnd"},b;for(b in a)if(b in document.createElement("div").style){JAX.FX.CSS3._TRANSITION_PROPERTY=b;JAX.FX.CSS3._TRANSITION_EVENT=a[b];break}})();
JAX.FX.CSS3.prototype.$constructor=function(a){this._jaxElm=a;this._settings=[];this._transitionCount=this._maxDuration=0;this._ecTransition=null;this._promise={finished:null};this._timeout=null};JAX.FX.CSS3.prototype.set=function(a){this._settings=a};
JAX.FX.CSS3.prototype.run=function(){this._promise.finished=new JAK.Promise;for(var a=JAX.FX.CSS3._TRANSITION_PROPERTY,b=JAX.FX.CSS3._TRANSITION_EVENT,c=[],d=this._jaxElm.node(),e=d.style,g=0,h=this._settings.length;g<h;g++){var k=this._settings[g],r=k.startValue+k.startUnit,l=this._styleToCSSProperty(k.property)+" "+k.durationValue+k.durationUnit+" "+k.method;this._maxDuration=Math.max(this._maxDuration,k.durationValue);e[k.property]=r;c.push(l);this._transitionCount++}setTimeout(function(){d.style[a]=
c.join(",");this._ecTransition=this._jaxElm.listen(b,this,"_finishTransitionAnimation");for(var g=0,h=this._settings.length;g<h;g++){var k=this._settings[g];e[k.property]=k.endValue+k.endUnit}this._timeout=setTimeout(this._fallback.bind(this),this._maxDuration+50)}.bind(this),0);return this._promise.finished};
JAX.FX.CSS3.prototype.stop=function(){for(var a=this._jaxElm.node(),b=a.style,c=0,d=this._settings.length;c<d;c++){var e=this._settings[c].property,g=window.getComputedStyle(a).getPropertyValue(this._styleToCSSProperty(e));b[e]=g}for(;this._transitionCount;)this._endTransition();clearTimeout(this._timeout);this._timeout=null;this._promise.finished.reject(this._jaxElm)};
JAX.FX.CSS3.prototype._endTransition=function(){this._transitionCount--;this._transitionCount||(this._ecTransition.unregister(),this._ecTransition=null,this._jaxElm.node().style[JAX.FX.CSS3._TRANSITION_PROPERTY]="")};JAX.FX.CSS3.prototype._finishTransitionAnimation=function(){this._transitionCount?this._endTransition():(clearTimeout(this._timeout),this._timeout=null,this._promise.finished.fulfill(this._jaxElm))};
JAX.FX.CSS3.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FX.CSS3.prototype._fallback=function(){for(;this._transitionCount;)this._endTransition();this._finishTransitionAnimation()};JAX.FX.Interpolator=JAK.ClassMaker.makeClass({NAME:"JAX.FX.Interpolator",VERSION:"1.0",DEPEND:[{sClass:JAK.CSSInterpolator,ver:"2.1"}]});
JAX.FX.Interpolator.prototype.$constructor=function(a){this._jaxElm=a;this._interpolators=[];this._interpolatorsCount=0;this._settings=[];this._promise={finished:null}};JAX.FX.Interpolator.prototype.set=function(a){this._settings=a};JAX.FX.Interpolator.prototype.run=function(){this._promise.finished=new JAK.Promise;this._interpolators=[];this._start();return this._promise.finished};
JAX.FX.Interpolator.prototype.stop=function(){for(var a=0,b=this._interpolators.length;a<b;a++)this._destroyInterpolator(a);this._promise.finished.reject(this._jaxElm)};
JAX.FX.Interpolator.prototype._start=function(){for(var a=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=c.durationValue,d=new JAK.CSSInterpolator(this._jaxElm.node(),d,{interpolation:c.method,endCallback:this._endInterpolator.bind(this,a)});this._interpolators.push(d);if(-1!=["backgroundColor","color"].indexOf(c.property))d.addColorProperty(c.property,c.startValue,c.endValue);else if(c.startUnit!=c.endUnit){var e=c.property,g=this._styleToCSSProperty(e),h=this._jaxElm.css(e);this._jaxElm.css(e,
c.startValue+c.startUnit);var k=parseFloat(this._jaxElm.computedCss(g));this._jaxElm.css(e,c.endValue+c.endUnit);c=parseFloat(this._jaxElm.computedCss(g));this._jaxElm.css(e,h);d.addProperty(e,k,c,"px")}else d.addProperty(c.property,c.startValue,c.endValue,c.startUnit);d.start();this._interpolatorsCount++}};JAX.FX.Interpolator.prototype._endInterpolator=function(a){this._destroyInterpolator(a);this._interpolatorsCount||(this._interpolators=[],this._promise.finished.fulfill(this._jaxElm))};
JAX.FX.Interpolator.prototype._destroyInterpolator=function(a){var b=this._interpolators[a];b&&(b.stop(),this._interpolators[a]=null,this._interpolatorsCount--)};JAX.FX.Interpolator.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FX.Scrolling=JAK.ClassMaker.makeClass({NAME:"JAX.FX.Scrolling",VERSION:"1.0"});
JAX.FX.Scrolling.prototype.$constructor=function(a){this._jaxElm=a;this._settings=[];this._promises={animationFinished:null};this._currentTime=this._startTime=this._maxDuration=0;this._interpolators=[];this._runningInterpolatorCount=0;this._isRunning=this._reversed=!1;this._onScrollingFinished=this._onScrollingFinished.bind(this)};
JAX.FX.Scrolling.prototype.addProperty=function(a,b,c){if("left"!=a&&"top"!=a)console.error("You are trying to use unsupported property: "+a+".",this._jaxElm.node());else return this._settings.push({property:a,defValue:null,value:b,duration:c}),this._maxDuration=Math.max(this._maxDuration,c),this};
JAX.FX.Scrolling.prototype.run=function(){if(this._promises.animationFinished)return this._promises.animationFinished;this._promises.animationFinished=new JAK.Promise;for(var a=this._runningInterpolatorCount=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=this._jaxElm.scroll(c.property);c.defValue=d;this._startInterval(c.property,c.value,c.duration)}this._isRunning=!0;this._reversed=!1;this._startTime=(new Date).getTime();return this._promises.animationFinished};
JAX.FX.Scrolling.prototype.then=function(a,b){return this._promises.animationFinished.then(a,b)};JAX.FX.Scrolling.prototype.stop=function(){if(!this._isRunning)return this;for(;this._runningInterpolatorCount;)this._onScrollingFinished();return this};
JAX.FX.Scrolling.prototype.reverse=function(){this._isRunning&&this.stop();this._reversed=!this._reversed;this._promises.animationFinished=new JAK.Promise;for(var a=this._runningInterpolatorCount=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=this._reversed?Math.min(c.duration,this._currentTime):Math.max(c.duration-this._currentTime,0);this._startInterval(c.property,this._reversed?c.defValue:c.value,d)}this._isRunning=!0;this._startTime=(new Date).getTime();return this._promises.animationFinished};
JAX.FX.Scrolling.prototype.isRunning=function(){return this._isRunning};JAX.FX.Scrolling.prototype._startInterval=function(a,b,c){var d=this._jaxElm.scroll(a),e=function(b){this._jaxElm.scroll(a,b)}.bind(this);b=new JAK.Interpolator(d,b,c,e,{endCallback:this._onScrollingFinished});b.start();this._interpolators.push(b);this._runningInterpolatorCount++};
JAX.FX.Scrolling.prototype._onScrollingFinished=function(){this._runningInterpolatorCount--;if(!this._runningInterpolatorCount){this._interpolators=[];var a=(new Date).getTime()-this._startTime;this._reversed?(this._currentTime-=a,this._currentTime=Math.max(this._currentTime,0)):(this._currentTime+=a,this._currentTime=Math.min(this._currentTime,this._maxDuration));this._startTime=0;this._isRunning=!1;this._promises.animationFinished.fulfill(this._jaxElm);this._promises.animationFinished=null}};
