var JAX=function(a,b){if(!a)return new JAX.NullNode;if(a instanceof JAX.Node)return a;if("string"==typeof a){b=b||document;if(b!=document){var c=JAX(b);if(!c.exists())return console.error("JAX: Second argument must be valid element."),new JAX.NullNode("string"==typeof b?a:"");b=c.node()}var d=(c=b.querySelector(a))?c.nodeType:-1}else JAX.isDOMElement(a)?(d=!("nodeType"in a)?-2:a.nodeType,c=a):(d=-1,c=null);switch(d){case -2:return new JAX.Window(c);case -1:return new JAX.NullNode("string"==typeof a?
a:"");case 1:return new JAX.Element(c);case 3:case 8:return new JAX.TextNode(c);case 9:return new JAX.Document(c);case 11:return new JAX.DocumentFragment(c)}};
JAX.all=function(a,b){if(!a)return JAX.NodeArray([]);if("string"==typeof a){b=b||document;if(b!=document){var c=JAX(b);if(!c.exists())return console.error("JAX.all: Second argument must be valid element."),new JAX.NullNode;b=c.node()}c=b.querySelectorAll(a);return new JAX.NodeArray(c)}return a instanceof Array||(window.NodeList&&a instanceof window.NodeList||a instanceof JAX.NodeArray)||a.length&&a[0]&&a[a.length-1]?new JAX.NodeArray(a):a instanceof JAX.Node||JAX.isDOMElement(a)?new JAX.NodeArray([a]):
new JAX.NodeArray([])};
JAX.make=function(a,b,c,d){b=b||{};c=c||{};d=d||document;if(!a||"string"!=typeof a)return console.error("JAX.make: First argument must be string."),JAX(null);"object"!=typeof b&&(console.error("JAX.make: Second argument must be associative array."),b={});"object"!=typeof c&&(console.error("JAX.make: Third argument must be associative array."),c={});if("object"!=typeof d||!d.nodeType&&-1==[9,11].indexOf(d.nodeType))console.error("JAX.make: Fourth argument must be document element."),d=document;a=a.match(/[#.]?[a-z0-9_-]+/ig)||
[];var e=a[0];if(!e||!/^[a-z0-9]+$/ig.test(e))return console.error("JAX.make: Tagname must be first in element definition."),JAX(null);for(var f=0,g=a.length;f<g;f++){var h=a[f],n=h.charAt(0);"#"==n?b.id=h.substring(1):"."==n&&(b.className?(b.className+=" ",b.className+=h.substring(1)):b.className=h.substring(1))}d=d.createElement(e);for(var k in b)d[k]=b[k];for(k in c)d.style[k]=c[k];return new JAX.Element(d)};JAX.makeFromHTML=function(a){return!a?new JAX.NodeArray([]):JAX.make("div").html(a).children()};
JAX.makeText=function(a,b){return new JAX.TextNode((b||document).createTextNode(a))};JAX.getTypeOf=function(a){if("number"==typeof a)return"number";if("string"==typeof a)return"string";if("undefined"==typeof a)return"undefined";if("function"==typeof a)return"function";if(!0===a||!1===a)return"boolean";if(null===a)return"null";a=Object.prototype.toString.call(a);return"[object Array]"==a?"array":"[object Date]"==a?"date":"object"};
JAX.isDOMElement=function(a){if(!a||"object"!=typeof a)return!1;if(a==window||a.Window&&a instanceof a.Window||-1<a.constructor.toString().indexOf("DOMWindow"))return!0;var b=a.defaultView||a.parentWindow||(a.ownerDocument?a.ownerDocument.defaultView||a.ownerDocument.parentWindow:null);return b&&(b.HTMLElement&&a instanceof b.HTMLElement||b.Element&&a instanceof b.Element||b.HTMLDocument&&a instanceof b.HTMLDocument||b.Document&&a instanceof b.Document||b.DocumentFragment&&a instanceof b.DocumentFragment||
b.Text&&a instanceof b.Text)};JAX.findCSSProperty=function(a){for(var b=a.trim().split(" "),c=document.createElement("div").style,d=0,e=b.length;d<e;d++)if(a=b[d],a in c)return a;return""};JAX.IIterable=JAK.ClassMaker.makeInterface({NAME:"JAX.IIterable",VERSION:"1.0"});JAX.IIterable.prototype.exist=function(){return!!this.length};JAX.IIterable.prototype.item=function(a){return this[a||0]};
JAX.IIterable.prototype.items=function(){for(var a=parseFloat(a)||0,b=parseFloat(b)||this.length,c=Array(b-a);a<b;a++)c[a]=this[a];return c};JAX.IIterable.prototype.firstItem=function(){return this[0]};JAX.IIterable.prototype.lastItem=function(){return this[this.length-1]};JAX.IIterable.prototype.pushItem=function(a){this.length++;this[this.length-1]=a;return this};JAX.IIterable.prototype.popItem=function(){if(0<this.length){var a=this[this.length-1];delete this[this.length-1];this.length--;return a}return null};
JAX.IIterable.prototype.shiftItem=function(){var a=this[0];if(a){this.length--;for(var b=0;b<this.length;b++)this[b]=this[b+1];return a}return null};JAX.IIterable.prototype.unshiftItem=function(a){this.length++;for(var b=this.length-1;0<b;b--)this[b]=this[b-1];this[0]=a;return this};JAX.IIterable.prototype.index=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1};
JAX.IIterable.prototype.forEachItem=function(a,b){a=b?a.bind(b):a;for(var c=0;c<this.length;c++)a(this[c],c,this);return this};JAX.IIterable.prototype.filterItems=function(a,b){a=b?a.bind(b):a;for(var c=[],d=0;d<this.length;d++)a(this[d],d,this)&&c.push(this[d]);return c};JAX.IListening=JAK.ClassMaker.makeInterface({NAME:"JAX.IListening",VERSION:"1.0"});JAX.IListening._events=[];
JAX.IListening.prototype.listen=function(a,b,c,d){c||(c=b,b=window);"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));if(!b||"object"!=typeof b&&"function"!=typeof b)console.error("For second argument I expected referred object or binded function.",this._node),b=function(){},c=null;c&&("string"!=typeof c&&"function"!=typeof c)&&(console.error("For third argument I expected string with function name or function.",this._node),b=function(){},c=null);"string"==
typeof c?(c=b[c])?c=c.bind(b):(console.error("Given method in second argument was not found in referred object given in third argument.",this._node),c=function(){}):"function"==typeof c&&b?c=c.bind(b):"function"==typeof b&&(c=b);b=function(a,b){c(new JAX.Event(a),d)};var e=JAK.Events.addListener(this._node,a,b);b=new JAX.Listener(this,e,a,b);for(var e=JAX.IListening._events,f=-1,g=0,h=e.length;g<h;g++)if(e[g].node==this._node){f=g;break}-1==f?(f={node:this._node,events:{}},e.push(f)):f=e[f];f.events[a]?
f.events[a].push(b):f.events[a]=[b];return b};
JAX.IListening.prototype.stopListening=function(a){for(var b=JAX.IListening._events,c=-1,d=0,e=b.length;d<e;d++)if(b[d].node==this._node){c=d;break}if(-1==c)return this;d=b[c];if(!arguments.length){var d=d.events,f;for(f in d)this._destroyEvents(d[f]);b.splice(c,1);return this}if("string"==typeof a)return f=d.events[a],this._destroyEvents(f),delete b[c].events[a],this;if(a instanceof JAX.Listener)return f=d.events[a.type()],b=f.indexOf(a),-1<b&&(this._destroyEvents([f[b]]),f.splice(b,1)),this;console.error("For first argument I expected JAX.Listener instance, string with event type or you can call it without arguments.");
return this};JAX.IListening.prototype._destroyEvents=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].id();JAK.Events.removeListener(d)}};JAX.Event=JAK.ClassMaker.makeClass({NAME:"JAX.Event",VERSION:"1.0"});JAX.Event.prototype.$constructor=function(a){this._e=a};JAX.Event.prototype.event=function(){return this._e};JAX.Event.prototype.prevent=function(){JAK.Events.cancelDef(this._e);return this};JAX.Event.prototype.stop=function(){JAK.Events.stopEvent(this._e);return this};
JAX.Event.prototype.target=function(){return JAX(JAK.Events.getTarget(this._e))};JAX.Event.prototype.currentTarget=function(){return JAX(this._e.currentTarget)};JAX.Event.prototype.type=function(){return this._e.type};JAX.Listener=JAK.ClassMaker.makeClass({NAME:"JAX.Listener",VERSION:"1.0"});JAX.Listener.prototype.$constructor=function(a,b,c,d){this._jaxElm=a;this._type=c;this._method=d;this._id=b};JAX.Listener.prototype.unregister=function(){this._id&&(this._jaxElm.stopListening(this),this._id=null)};
JAX.Listener.prototype.node=function(){return this._jaxElm.node()};JAX.Listener.prototype.id=function(){return this._id};JAX.Listener.prototype.type=function(){return this._type};JAX.ListenerArray=JAK.ClassMaker.makeClass({NAME:"JAX.ListenerArray",VERSION:"1.0",IMPLEMENT:[JAX.IIterable]});JAX.ListenerArray.prototype.$constructor=function(a){this.length=a.length;for(var b=0;b<this.length;b++)this[b]=a[b]};
JAX.ListenerArray.prototype.unregister=function(){for(var a=0;a<this.length;a++)this[a].unregister(),delete this[a]};JAX.IJAXNode=JAK.ClassMaker.makeInterface({NAME:"JAX.IJAXNode",VERSION:"1.0"});JAX.IJAXNode.prototype.find=function(a){this._showMessage("find");return JAX(null)};JAX.IJAXNode.prototype.findAll=function(a){this._showMessage("findAll");return new JAX.NodeArray([])};JAX.IJAXNode.prototype.addClass=function(a){this._showMessage("addClass");return this};
JAX.IJAXNode.prototype.removeClass=function(a){this._showMessage("removeClass");return this};JAX.IJAXNode.prototype.hasClass=function(a){this._showMessage("hasClass");return!1};JAX.IJAXNode.prototype.toggleClass=function(a){this._showMessage("toggleClass");return this};JAX.IJAXNode.prototype.id=function(a){this._showMessage("id");return arguments.length?this:""};JAX.IJAXNode.prototype.html=function(a){this._showMessage("html");return arguments.length?this:""};
JAX.IJAXNode.prototype.text=function(a){this._showMessage("text");return arguments.length?this:""};JAX.IJAXNode.prototype.add=function(a){this._showMessage("add");return this};JAX.IJAXNode.prototype.insertFirst=function(a){this._showMessage("inserFirst");return this};JAX.IJAXNode.prototype.addBefore=function(a,b){this._showMessage("addBefore");return this};JAX.IJAXNode.prototype.appendTo=function(a){this._showMessage("appendTo");return this};
JAX.IJAXNode.prototype.before=function(a){this._showMessage("before");return this};JAX.IJAXNode.prototype.after=function(a){this._showMessage("after");return this};JAX.IJAXNode.prototype.replaceWith=function(a){this._showMessage("replaceWith");return this};JAX.IJAXNode.prototype.swapPlaceWith=function(a){this._showMessage("swapPlaceWith");return this};JAX.IJAXNode.prototype.remove=function(){this._showMessage("remove");return this};
JAX.IJAXNode.prototype.clone=function(a){this._showMessage("clone");return this};JAX.IJAXNode.prototype.listen=function(a,b,c,d){this._showMessage("listen");return new JAX.Listener(this,null,a,c)};JAX.IJAXNode.prototype.stopListening=function(a){this._showMessage("stopListening");return this};JAX.IJAXNode.prototype.prop=function(a,b){this._showMessage("prop");return"string"==typeof a?"":a instanceof Array?{}:this};
JAX.IJAXNode.prototype.attr=function(a,b){this._showMessage("attr");return"string"==typeof a?"":a instanceof Array?{}:this};JAX.IJAXNode.prototype.css=function(a,b){this._showMessage("css");return"string"==typeof a?"":a instanceof Array?{}:this};JAX.IJAXNode.prototype.computedCss=function(a){this._showMessage("computedCss");return typeof a?"":{}};JAX.IJAXNode.prototype.fullSize=function(a,b){this._showMessage("fullSize");return 1==arguments.length?0:this};
JAX.IJAXNode.prototype.size=function(a,b){this._showMessage("size");return 1==arguments.length?0:this};JAX.IJAXNode.prototype.parent=function(){this._showMessage("parent");return null};JAX.IJAXNode.prototype.next=function(){this._showMessage("next");return null};JAX.IJAXNode.prototype.previous=function(){this._showMessage("previous");return null};JAX.IJAXNode.prototype.children=function(a){this._showMessage("children");return arguments.length?new JAX.IJAXNode:new JAX.NodeArray([])};
JAX.IJAXNode.prototype.first=function(){this._showMessage("first");return null};JAX.IJAXNode.prototype.last=function(){this._showMessage("last");return null};JAX.IJAXNode.prototype.clear=function(){this._showMessage("clear");return null};JAX.IJAXNode.prototype.eq=function(a){this._showMessage("eq");return!1};JAX.IJAXNode.prototype.contains=function(a){this._showMessage("contains");return!1};JAX.IJAXNode.prototype.isIn=function(a){this._showMessage("isIn");return!1};
JAX.IJAXNode.prototype.animate=function(a,b,c,d){this._showMessage("animate");return(new JAK.Promise).reject(this._node)};JAX.IJAXNode.prototype.fade=function(a,b){this._showMessage("fade");return(new JAK.Promise).reject(this._node)};JAX.IJAXNode.prototype.fadeTo=function(a,b){this._showMessage("fadeTo");return(new JAK.Promise).reject(this._node)};JAX.IJAXNode.prototype.slide=function(a,b){this._showMessage("slide");return(new JAK.Promise).reject(this._node)};
JAX.IJAXNode.prototype.scroll=function(a,b,c){this._showMessage("scroll");return(new JAK.Promise).reject(this._node)};JAX.IJAXNode.prototype._showMessage=function(a){console.error("You are trying to use unsupported method '"+a+"' with my node.",this._node)};JAX.IJAXNode.prototype._contains=function(a){for(;a&&11!=a.nodeType&&9!=a.nodeType;){if(a==this._node)return!0;a=a.parentNode}return!1};JAX.IMoveableNode=JAK.ClassMaker.makeInterface({NAME:"JAX.IMoveableNode",VERSION:"1.0"});
JAX.IMoveableNode.prototype.appendTo=function(a){a=JAX(a);if(a.exists())return a.node().appendChild(this._node),this;console.error("JAX.IMoveableNode.append: I could not find given element. For first argument I expected html element, documentFragment or JAX node.");return this};
JAX.IMoveableNode.prototype.before=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.parentNode.insertBefore(this._node,a),this;console.error("JAX.IMoveableNode.before: I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.IMoveableNode.prototype.after=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.nextSibling?a.parentNode.insertBefore(this._node,a.nextSibling):a.parentNode.appendChild(this._node),this;console.error("JAX.IMoveableNode.after: I could not find given element. For first argument I expected html element, text node or JAX node.");return this};
JAX.IMoveableNode.prototype.replaceWith=function(a){a=JAX(a);if(a.exists())return a=a.node(),a.parentNode.replaceChild(this._node,a),this;console.error("JAX.IMoveableNode.replaceWith: For first argument I expected html element, text node or JAX node.");return this};
JAX.IMoveableNode.prototype.swapPlaceWith=function(a){a=JAX(a);if(a.exists()){var b=a.node(),c=b.nextSibling,d=b.parentNode;this._node.parentNode?this._node.parentNode.replaceChild(b,this._node):d&&a.remove();d&&(c?d.insertBefore(this._node,c):d.appendChild(this._node));return this}console.error("JAX.IMoveableNode.swapPlaceWith: For first argument I expected html element, text node or JAX node.");return this};
JAX.IMoveableNode.prototype.remove=function(){if(this._node.parentNode)return this._node.parentNode.removeChild(this._node),this;console.error("JAX.IMoveableNode.remove: I can not remove node with no parentNode.");return this};JAX.IMoveableNode.prototype.clone=function(a){a=this._node.cloneNode(!!a);return new this.constructor(a)};
JAX.IMoveableNode.prototype.isIn=function(a){if(!a)return!1;if("string"==typeof a)return/^[#.a-z0-9_-]+$/ig.test(a)?!!JAK.DOM.findParent(this._node,a):!!JAX.all(a).filterItems(jaxElm.contains.bind(this,this)).length;a=a instanceof JAX.Node?a:JAX(a);return a.exists()&&a.contains(this)};JAX.IMoveableNode.prototype.parent=function(a){if(a&&"string"==typeof a&&/^[#.a-z0-9_-]+$/ig.test(a))return(a=JAK.DOM.findParent(this._node,a))?JAX(a):null;a=JAX(this._node.parentNode);return a.exists()?a:null};
JAX.IMoveableNode.prototype.next=function(){var a=JAX(this._node.nextSibling);return a.exists()?a:null};JAX.IMoveableNode.prototype.previous=function(){var a=JAX(this._node.previousSibling);return a.exists()?a:null};JAX.INodeWithChildren=JAK.ClassMaker.makeInterface({NAME:"JAX.INodeWithChildren",VERSION:"1.0"});
JAX.INodeWithChildren.prototype.add=function(a){"string"==typeof a?this._node.insertAdjacentHTML?this._node.insertAdjacentHTML("beforeend",a):JAX.makeFromHTML(a).appendTo(this):JAX.all(a).appendTo(this);return this};
JAX.INodeWithChildren.prototype.insertFirst=function(a){a=JAX(a);if(a.exists())return a=a.node(),this._node.childNodes&&this._node.firstChild?this._node.insertBefore(a,this._node.firstChild):this._node.childNodes?this._node.appendChild(a):console.error("JAX.INodeWithChildren.insertFirst: Given element can not have child nodes.",this._node),this;console.error("JAX.INodeWithChildren.insertFirst: I could not find given element. For first argument I expected html element, text node or JAX.Node.");return this};
JAX.INodeWithChildren.prototype.addBefore=function(a,b){var c=JAX(a),d=JAX(b);if(!c.exists())return console.error("JAX.INodeWithChildren.addBefore: For first argument I expected html element, text node, documentFragment or JAX.Node."),this;if(!d.exists())return console.error("JAX.INodeWithChildren.addBefore: For second argument I expected html element, text node or JAX.Node."),this;this._node.insertBefore(c.node(),d.node());return this};
JAX.INodeWithChildren.prototype.contains=function(a){if(!a)return!1;if("string"==typeof a)return!!this.find(a).exists();a=a instanceof JAX.Node?a:JAX(a);if(a.exists())return a=a.node(),this._node.contains?this._node.contains(a):this._contains(a);console.error("JAX.Element.contains: For first argument I expected html element, text node, string with CSS3 compatible selector or JAX.Node.");return!1};
JAX.INodeWithChildren.prototype.children=function(a){if(!arguments.length){for(var b=[],c=this._node.childNodes,d=0,e=c.length;d<e;d++)b.push(JAX(c[d]));return new JAX.NodeArray(b)}return(b=this._node.childNodes[a])?JAX(b):null};
JAX.INodeWithChildren.prototype.first=function(){if("firstElementChild"in this._node)return this._node.firstElementChild?JAX(this._node.firstElementChild):null;if(!this._node.childNodes||!this._node.childNodes.length)return null;for(var a=0,b=this._node.childNodes.length;a<b;a++){var c=this._node.childNodes[a];if(1==c.nodeType)return JAX(c)}return null};
JAX.INodeWithChildren.prototype.last=function(){if("lastElementChild"in this._node)return this._node.lastElementChild?JAX(this._node.lastElementChild):null;if(!this._node.childNodes||!this._node.childNodes.length)return null;for(var a=this._node.childNodes.length-1;-1<a;a--){var b=this._node.childNodes[a];if(1==b.nodeType)return JAX(b)}return null};JAX.INodeWithChildren.prototype.clear=function(){JAK.DOM.clear(this._node);return this};
(function(){if(window.Element)var a=window.Element.prototype.cloneNode,b=window.Element.prototype;else if(window.Node)a=window.Node.prototype.cloneNode,b=window.Node.prototype;else return;b.cloneNode=function(){for(var b=a.apply(this,arguments),d=Array.prototype.slice.call(b.attributes),e=0,f=d.length;e<f;e++){var g=d[e].name;-1<g.indexOf("data-jax")&&b.removeAttribute(g)}return b}})();JAX.Node=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"2.0"});
JAX.Node.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};JAX.Node.prototype.$destructor=function(){};JAX.Node.prototype.node=function(){return this._node};JAX.Node.prototype.exists=function(){return!!this._node};
JAX.Node.prototype.prop=function(a,b){var c=arguments.length;if(1==c){if("string"==typeof a)return this._node[a];if("object"==typeof a){for(var d in a)this._node[d]=a[d];return this}if(a instanceof Array){for(var c={},e=0,f=a.length;e<f;e++)d=a[e],c[d]=this._node[d];return c}}if(2==c){if("string"==typeof a)return this._node[a]=b,this;if(a instanceof Array){e=0;for(f=a.length;e<f;e++)this._node[a[e]]=b;return this}}console.error("JAX.MoveableNode.prop: Unsupported arguments: ",arguments);return this};
JAX.Element=JAK.ClassMaker.makeClass({NAME:"JAX.Element",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IJAXNode,JAX.IListening,JAX.INodeWithChildren,JAX.IMoveableNode]});JAX.Element._events=[];JAX.Element._OPACITY_REGEXP=/alpha\(opacity=['"]?([0-9]+)['"]?\)/i;JAX.Element._BOX_SIZING=null;(function(){var a={boxSizing:"box-sizing",MozBoxSizing:"-moz-box-sizing",webkitBoxSizing:"-webkit-box-sizing"},b=document.createElement("div"),c;for(c in a)if(c in b.style){JAX.Element._BOX_SIZING=a[c];break}})();
JAX.Element.prototype.$constructor=function(a){this.$super(a)};JAX.Element.prototype.$destructor=function(){this.stopListening();this._node=null};JAX.Element.prototype.find=function(a){return JAX(a,this._node)};JAX.Element.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Element.prototype.addClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.addClass: Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.add(a[b]);return this};
JAX.Element.prototype.removeClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.removeClass: Given argument can be only string.",this._node));a=a.split(" ");for(var b=0,c=a.length;b<c;b++)this._node.classList.remove(a[b]);return this};
JAX.Element.prototype.hasClass=function(a){a=a.trim();if(""==a)return!0;"string"!=typeof a&&(a+="",console.error("JAX.Element.hasClass: For my argument I expected string.",this._node));if(""==a)return!1;for(a=a.split(" ");a.length;){var b=a.shift();if(!this._node.classList.contains(b))return!1}return!0};
JAX.Element.prototype.toggleClass=function(a){a=a.trim();if(""==a)return this;"string"!=typeof a&&(a+="",console.error("JAX.Element.toggleClass: For my argument I expected string.",this._node));this._node.classList.toggle(a);return this};JAX.Element.prototype.id=function(a){if(!arguments.length)return this.attr("id");"string"!=typeof a&&(a+="",console.error("JAX.Element.id: For my argument I expected string.",this._node));this.attr({id:a});return this};
JAX.Element.prototype.html=function(a){if(!arguments.length)return this._node.innerHTML;"string"!=typeof a&&"number"!=typeof a&&console.error("JAX.Element.html: For my argument I expected string or number.",this._node);this._node.innerHTML=a+"";return this};
JAX.Element.prototype.text=function(a){"string"!=typeof innerHTML&&"number"!=typeof innerHTML&&console.error("JAX.Element.text: For my argument I expected string or number.",this._node);if(!arguments.length&&"innerHTML"in this._node)return this._getText(this._node);"innerHTML"in this._node&&(this.clear(),this._node.appendChild(this._node.ownerDocument.createTextNode(a+"")));return this};
JAX.Element.prototype.attr=function(a,b){var c=arguments.length;if(1==c){if("string"==typeof a)return this._node.getAttribute(a);if("object"==typeof a){for(var d in a)this._node.setAttribute(d,a[d]+"");return this}if(a instanceof Array){for(var c={},e=0,f=a.length;e<f;e++)d=a[e],c[d]=this._node.getAttribute(d);return c}}if(2==c){if("string"==typeof a)return this._node.setAttribute(a,b+""),this;if(a instanceof Array){e=0;for(f=a.length;e<f;e++)this._node.setAttribute(a[e],b+"");return this}}console.error("JAX.Element.attr: Unsupported arguments: ",
arguments);return this};JAX.Element.prototype.removeAttr=function(a){if("string"==typeof a)return this._node.removeAttribute(a),this;if(property instanceof Array){for(var b=0,c=a.length;b<c;b++)this._node.removeAttribute(a[b]);return this}console.error("JAX.Element.removeAttr: For argument I expected string or array of strings.",this._node);return this};
JAX.Element.prototype.css=function(a,b){var c=arguments.length;if(1==c){if("string"==typeof a)return!a?"":"opacity"==a?this._getOpacity():this._node.style[a];if("object"==typeof a){for(var d in a)b=a[d],"opacity"==d?this._setOpacity(b):this._node.style[d]=b;return this}if(a instanceof Array){for(var c={},e=0,f=a.length;e<f;e++)d=a[e],c[d]="opacity"==d?this._getOpacity():this._node.style[d];return c}}if(2==c){if(!a)return this;if("string"==typeof a){if("opacity"==a)return this._setOpacity(b),this;
this._node.style[a]=b;return this}if(a instanceof Array){e=0;for(f=a.length;e<f;e++)d=a[e],"opacity"==d?this._setOpacity(b):this._node.style[d]=b;return this}}console.error("JAX.Element.css: Unsupported arguments: ",arguments);return this};
JAX.Element.prototype.computedCss=function(a){if("string"==typeof a){var b=JAX.Element.getComputedStyle(this._node).getPropertyValue(a);return b}for(var c={},d=0,e=a.length;d<e;d++){var f=a[d],b=JAX.Element.getComputedStyle(this._node).getPropertyValue(f);c[f]=b}return c};JAX.Element.prototype.fullSize=function(a,b){if(1==arguments.length)return"width"==a?this._node.offsetWidth:this._node.offsetHeight;b=this._getSizeWithBoxSizing(a,b);this._node.style[a]=Math.max(b,0)+"px";return this};
JAX.Element.prototype.size=function(a,b){if(1==arguments.length){var c=parseInt(this.computedCss(a),10);return isFinite(c)?c:c=this._getSizeWithBoxSizing(a)}b=parseInt(b,10);this._node.style[a]=Math.max(b,0)+"px";return this};JAX.Element.prototype.clear=function(){"innerHTML"in this._node&&JAK.DOM.clear(this._node);return this};
JAX.Element.prototype.eq=function(a){return!a?!1:"string"==typeof a?/^[a-zA-Z0-9]+$/g.test(a)?!!(this._node.tagName&&this._node.tagName.toLowerCase()==a):!!this.parent().findAll(a).filterItems(jaxElm.eq.bind(this,this)).length:(a instanceof JAX.Node?a:JAX(a)).node()==this._node};JAX.Element.prototype.animate=function(a,b,c,d){"string"!=typeof a&&(type+="",console.error("For first argument I expected string.",this._node));var e=new JAX.FX(this);e.addProperty(a,b,c,d);e.run();return e};
JAX.Element.prototype.fade=function(a,b){"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));switch(a){case "in":return this.animate("opacity",b,0,1);case "out":return this.animate("opacity",b,1,0);default:console.error("I got unsupported type '"+a+"'.",this._node);var c=new JAX.FX(null);c.run();return c}};
JAX.Element.prototype.fadeTo=function(a,b){a=parseFloat(a)||0;0>a&&(a=0,console.error("For first argument I expected positive number, but I got negative. I set zero value.",this._node));return this.animate("opacity",b,null,a)};
JAX.Element.prototype.slide=function(a,b){"string"!=typeof a&&(a+="",console.error("For first argument I expected string.",this._node));var c={};switch(a){case "down":var c=this.css(["overflow","height"]),d="height",e=0,f=null;break;case "up":d="height";e=null;f=0;break;case "left":d="width";e=null;f=0;break;case "right":c=this.css(["overflow","width"]);d="width";e=0;f=null;break;default:return console.error("I got unsupported type '"+a+"'.",this._node),d=new JAX.FX(null),d.run(),d}this.css("overflow",
"hidden");var g=function(){this.css(c)}.bind(this),d=this.animate(d,b,e,f);d.then(g);return d};
JAX.Element.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");var d=this._node.scrollLeft,e=this._node.scrollTop;if(1==arguments.length){switch(a.toLowerCase()){case "top":d=e;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),d=0}return d}d=parseFloat(b);isFinite(d)||console.error("I expected Number or string with number for my second argument.",this._node);
a=a.toLowerCase();if(!c){switch(a){case "top":this._node.scrollTop=b;break;case "left":this._node.scrollLeft=b}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);d=new JAX.FX.Scrolling(this);d.addProperty(a,b,c);d.run();return d};
JAX.Element.prototype._setOpacity=function(a){var b="",c="";"ie"==JAK.Browser.client&&9>JAK.Browser.version?(b="filter",""!=a&&(c=Math.round(100*a)+"",c="progid:DXImageTransform.Microsoft.Alpha(opacity="+c+");")):(c=a+"",b="opacity");this._node.style[b]=c};JAX.Element.prototype._getOpacity=function(){if("ie"==JAK.Browser.client&&9>JAK.Browser.version){var a="";this._node.style.filter.replace(JAX.ELEMENT._OPACITY_REGEXP,function(b,c){a=c});return a?parseFloat(a)/100+"":a}return this._node.style.opacity};
JAX.Element.prototype._getSizeWithBoxSizing=function(a,b){var c=JAX.Node._BOX_SIZING?this.computedCss(JAX.Node._BOX_SIZING):"",d=0,e=0,f=0,g=0,h="padding-"+("width"==a?"left":"top"),n="padding-"+("width"==a?"right":"bottom"),k="border-"+("width"==a?"left":"top"),v="border-"+("width"==a?"right":"bottom");1==arguments.length&&(b="width"==a?this._node.offsetWidth:this._node.offsetHeight);if(!c||"content-box"==c)d=parseFloat(this.computedCss(h)),e=parseFloat(this.computedCss(n));"border-box"!=c&&(f=parseFloat(this.computedCss(k)),
g=parseFloat(this.computedCss(v)));d&&isFinite(d)&&(b-=d);e&&isFinite(e)&&(b-=e);f&&isFinite(f)&&(b-=f);g&&isFinite(g)&&(b-=g);return b};JAX.Element.prototype._getText=function(a){for(var b="",c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c];e.tagName&&e.tagName.toLowerCase();b=e.childNodes&&e.childNodes.length?b+this._getText(e):e.nodeValue?b+e.nodeValue:b+" "}return b};
(function(){if(window.getComputedStyle)JAX.Element.getComputedStyle=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,"")};else{var a=function(a){var b="";a.filter.replace(/alpha\(opacity=['"]?([0-9]+)['"]?\)/i,function(a,c){b=c});return b?parseFloat(b)/100+"":b},b=function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})},c=function(a,b,c,d){switch(b){case "em":return a*d;case "in":return 96*a;case "pt":return 96*a/72;case "pc":return 1152*a/72;case "cm":return 37.7952*
a;case "mm":return 37.7952*a/10;case "%":return a/100*c;default:return a}},d=function(b){var d=b.currentStyle,g;var h=b;do{var n=h.currentStyle.fontSize;g=n.split(/\d/)[0];var k=/%|em/.test(g),h=h.parentNode}while(k&&h&&11!=h.nodeType);k&&(!h||11==h.nodeType)?g=16:(h=parseFloat(n),g=c(h,g));var h=0,n=/margin.|padding.|border.+W|^fontSize$/,k=["absolute","relative","fixed"],v=["left","right","top","bottom"];for(property in d){var r=d[property];if(n.test(property)&&"auto"!=r){var r=property,p,l=b,m=
property;p=g;var q=d[m],s=parseFloat(q),q=q.split(/\d/)[0];if("fontSize"==m)l=p;else if(l.parentElement!=l.ownerDocument){var m=l.parentElement,t=document.createElement("jaxtempxyz");t.style.display="block";m.appendChild(t);l=t.offsetWidth;m.removeChild(t)}else l=l.parentElement.documentElement.clientWidth;p=c(s,q,l,p)||0;this[r]=p+"px"}else if("styleFloat"==property)this["float"]=r;else if("height"==property||"width"==property)if(s=r.toLowerCase(),p="auto"!=r,s=-1<s.indexOf("px"),!p||s)this[property]=
r;else{r=property;p=this.boxSizing;var m=l=q=s=0,t="padding"+("width"==property?"Left":"Top"),w="padding"+("width"==property?"Right":"Bottom"),x="border"+("width"==property?"LeftWidth":"Top"),y="border"+("width"==property?"RightWidth":"Bottom"),u=b.offsetWidth;if(!p||"content-box"==p)s=parseFloat(this[t]),q=parseFloat(this[w]);"border-box"!=p&&(l=parseFloat(this[x]),m=parseFloat(this[y]));s&&isFinite(s)&&(u-=s);q&&isFinite(q)&&(u-=q);l&&isFinite(l)&&(u-=l);m&&isFinite(m)&&(u-=m);this[r]=u+"px"}else if(-1<
v.indexOf(property)&&-1<k.indexOf(d.position)&&"auto"!=r){r=property;m=b;l=property;p=g;q=d[l];s=parseFloat(q);q=q.split(/\d/)[0];t=0;a:{l="left"==l||"right"==l?"clientWidth":"clientHeight";for(t=["absolute","relative","fixed"];m.parentElement&&m.parentElement.currentStyle;)if(m=m.parentElement,-1!=t.indexOf(m.currentStyle.position||"")){t=m[l];break a}t=m.ownerDocument.documentElement[l]}p=c(s,q,t,p);this[r]=p+"px"}else try{this[property]=r}catch(z){this[property]=""}h++}this.length=h;this.opacity=
a(d)};d.prototype.getPropertyPriority=function(){throw Error("NotSupportedError: DOM Exception 9");};d.prototype.getPropertyValue=function(a){return this[b(a)]||""};d.prototype.item=function(a){throw Error("NoModificationAllowedError: DOM Exception 7");};d.prototype.removeProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};d.prototype.setProperty=function(){throw Error("NoModificationAllowedError: DOM Exception 7");};d.prototype.getPropertyCSSValue=function(){throw Error("NotSupportedError: DOM Exception 9");
};JAX.Element.getComputedStyle=function(a){return new d(a)}}})();JAX.TextNode=JAK.ClassMaker.makeClass({NAME:"JAX.Node",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IJAXNode,JAX.IMoveableNode]});JAX.TextNode.prototype.$constructor=function(a){this.$super(a)};JAX.TextNode.prototype.text=function(a){if(!arguments.length)return this._node.nodeValue;this._node.nodeValue=a;return this};JAX.TextNode.prototype.clear=function(){this._node.nodeValue="";return this};
JAX.TextNode.prototype.eq=function(a){return!a?!1:(a instanceof JAX.Node?a:JAX(a)).node()==this._node};JAX.Document=JAK.ClassMaker.makeClass({NAME:"JAX.Document",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IListening]});JAX.Document.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=a.nodeType};JAX.Document.prototype.find=function(a){return JAX(a,this._node)};JAX.Document.prototype.findAll=function(a){return JAX.all(a,this._node)};
JAX.Document.prototype.contains=function(a){if(!a)return!1;if("string"==typeof a)return!!this.find(a).exists();a=a instanceof JAX.Node?a:JAX(a);if(a.exists())return a=a.node(),this._node.contains(a);console.error("JAX.Element.contains: For first argument I expected html element, text node, string with CSS3 compatible selector or JAX.Node.");return!1};
JAX.Document.prototype.size=function(a){if(1<arguments.length)return console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this;switch(a){case "width":return Math.max(this._node.body.scrollWidth,this._node.documentElement.scrollWidth,this._node.body.offsetWidth,this._node.documentElement.offsetWidth,this._node.body.clientWidth,this._node.documentElement.clientWidth);case "height":return Math.max(this._node.body.scrollHeight,this._node.documentElement.scrollHeight,
this._node.body.offsetHeight,this._node.documentElement.offsetHeight,this._node.body.clientHeight,this._node.documentElement.clientHeight);default:return console.error("You gave me an unsupported size type. I expected 'width' or 'height'.",this._node),0}};JAX.Document.prototype.fullSize=function(a){return 1<arguments.length?(console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this):this.size(a)};
JAX.Document.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");var d=JAK.DOM.getScrollPos(),e=d.x,d=d.y;if(1==arguments.length){switch(a.toLowerCase()){case "top":e=d;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),e=0}return e}e=parseFloat(b);isFinite(e)||console.error("I expected Number or string with number for my second argument.",this._node);a=a.toLowerCase();
if(!c){switch(a){case "top":this._node.documentElement.scrollTop=b;break;case "left":this._node.documentElement.scrollLeft=b}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);e=new JAX.FX.Scrolling(this);e.addProperty(a,b,c);e.run();return e};JAX.DocumentFragment=JAK.ClassMaker.makeClass({NAME:"JAX.DocumentFragment",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IJAXNode,JAX.INodeWithChildren,JAX.IMoveableNode]});
JAX.DocumentFragment.prototype.$constructor=function(a){this.$super(a)};JAX.DocumentFragment.prototype.find=function(a){return JAX(a,this._node)};JAX.DocumentFragment.prototype.findAll=function(a){return JAX.all(a,this._node)};JAX.DocumentFragment.prototype.remove=function(){this._showMessage("JAX.DocumentFragment.remove");return this};JAX.DocumentFragment.prototype.swapPlaceWith=function(a){this._showMessage("JAX.DocumentFragment.swapPlaceWith");return this};
JAX.DocumentFragment.prototype.isIn=function(a){this._showMessage("JAX.DocumentFragment.isIn");return!1};JAX.DocumentFragment.prototype.parent=function(){return null};JAX.DocumentFragment.prototype.next=function(){return null};JAX.DocumentFragment.prototype.previous=function(){return null};JAX.NullNode=JAK.ClassMaker.makeClass({NAME:"JAX.NullNode",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IJAXNode]});
JAX.NullNode.prototype.$constructor=function(a){this._selector=a||"";this._node=null;this.jaxNodeType=-1};JAX.NullNode.prototype._showMessage=function(a){this._selector?console.error("You are trying to work with null node. There is no match for your selector: '"+this._selector+"'."):console.error("Hello! I am null node. It means you are trying to work with not existing node. Be careful what you do. Try to use JAX.Node.exists method for checking if element is found.")};
JAX.Window=JAK.ClassMaker.makeClass({NAME:"JAX.Window",VERSION:"1.0",EXTEND:JAX.Node,IMPLEMENT:[JAX.IJAXNode,JAX.IListening]});JAX.Window.prototype.$constructor=function(a){this._node=a;this.jaxNodeType=-2};
JAX.Window.prototype.size=function(a){if(1<arguments.length)return console.error("I am so sorry, but you can not set "+a+" of document node.",this._node),this;"width"!=a&&"height"!=a&&console.error("You gave me an unsupported size type. I expected 'width' or 'height'.",this._node);if("innerWidth"in window)return"width"==a?window.innerWidth:window.innerHeight;if("clientWidth"in document.documentElement)return"width"==a?document.documentElement.clientWidth:document.documentElement.clientHeight;if("clientWidth"in
document.body)return"width"==a?document.body.clientWidth:document.body.clientHeight;console.error("You have probably unsupported browser.",this._node);return 0};
JAX.Window.prototype.scroll=function(a,b,c){"string"!=typeof a&&(console.error("I expected String for my first argument.",this._node),a+="");if("pageXOffset"in this._node)var d=this._node.pageXOffset,e=this._node.pageYOffset;else e=JAK.DOM.getScrollPos(),d=e.x,e=e.y;if(1==arguments.length){switch(a.toLowerCase()){case "top":d=e;break;case "left":break;default:console.error("You gave me an unsupported type. I expected 'x' or 'y'.",this._node),d=0}return d}var f=parseFloat(b);isFinite(f)||console.error("I expected Number or string with number for my second argument.",
this._node);a=a.toLowerCase();if(!c){switch(a){case "top":this._node.scrollTo(d,b);break;case "left":this._node.scrollTo(b,e)}return this}c=parseFloat(c);isFinite(c)||(console.error("I expected Number or string with number for my third argument.",this._node),c=1);d=new JAX.FX.Scrolling(this);d.addProperty(a,b,c);d.run();return d};JAX.NodeArray=JAK.ClassMaker.makeClass({NAME:"JAX.NodeArray",VERSION:"2.1",IMPLEMENT:[JAX.IIterable]});
JAX.NodeArray.prototype.$constructor=function(a){this.length=a.length;for(var b=0;b<this.length;b++){var c=a[b],c=c instanceof JAX.Node?c:JAX(c);this[b]=c}};JAX.NodeArray.prototype.find=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(3!=c.jaxNodeType&&(c=c.find(a),!c.exists()))return c}return JAX(null)};
JAX.NodeArray.prototype.findAll=function(a){for(var b=[],c=0;c<this.length;c++){var d=this[c];3!=d.jaxNodeType&&(d=d.findAll(a),d.length&&(b=b.concat(d.items())))}b=b.filter(function(a,c,d){var h=0;for(d=d.length;h<d;h++)if(b[h].node()==a.node())return h==c});return JAX.all(b)};JAX.NodeArray.prototype.pushItem=function(a){a=a instanceof JAX.Node?a:JAX(a);this.length++;this[this.length-1]=a;return this};
JAX.NodeArray.prototype.unshiftItem=function(a){a=a instanceof JAX.Node?a:JAX(a);this.length++;for(var b=this.length-1;0<b;b--)this[b]=this[b-1];this[0]=a;return this};JAX.NodeArray.prototype.limit=function(a,b){return new JAX.NodeArray(this.items.apply(this,arguments))};JAX.NodeArray.prototype.index=function(a){a=(a instanceof JAX.Node?a:JAX(a)).node();for(var b=0;b<this.length;b++)if(this[b].node()==a)return b;return-1};
JAX.NodeArray.prototype.addClass=function(a){for(var b=0;b<this.length;b++)this[b].addClass(a);return this};JAX.NodeArray.prototype.haveClass=function(a){for(var b=0;b<this.length;b++)if(!this[b].hasClass(a))return!1;return!0};JAX.NodeArray.prototype.toggleClass=function(a){for(var b=0;b<this.length;b++)this[b].toggleClass(a);return this};JAX.NodeArray.prototype.removeClass=function(a){for(var b=0;b<this.length;b++)this[b].removeClass(a);return this};
JAX.NodeArray.prototype.attr=function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.attr.apply(d,arguments)}return this};JAX.NodeArray.prototype.removeAttr=function(a){for(var b=0;b<this.length;b++)this[b].removeAttr(a);return this};JAX.NodeArray.prototype.css=function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.css.apply(d,arguments)}return this};JAX.NodeArray.prototype.prop=function(a,b){for(var c=0;c<this.length;c++){var d=this[c];d.prop.apply(d,arguments)}return this};
JAX.NodeArray.prototype.appendTo=function(a){for(var b=0;b<this.length;b++)this[b].appendTo(a);return this};JAX.NodeArray.prototype.before=function(a){for(var b=0;b<this.length;b++)this[b].before(a);return this};JAX.NodeArray.prototype.remove=function(){for(var a=0;a<this.length;a++)this[a].remove();return this};JAX.NodeArray.prototype.areIn=function(a){for(var b=0;b<this.length;b++)if(!this[b].isIn(a))return!1;return!0};
JAX.NodeArray.prototype.destroyNodes=function(){for(var a=0;a<this.length;a++)this[a].$destructor(),delete this[a],this.length--};JAX.NodeArray.prototype.listen=function(a,b,c,d){for(var e=Array(this.length),f=0;f<this.length;f++){var g=this[f];e[f]=g.listen.apply(g,arguments)}return new JAX.ListenerArray(e)};JAX.NodeArray.prototype.stopListening=function(a){for(var b=0;b<this.length;b++)this[b].stopListening(a);return this};
JAX.NodeArray.prototype.filterItems=function(a,b){a=b?a.bind(b):a;for(var c=[],d=0;d<this.length;d++)a(this[d],d,this)&&c.push(this[d]);return new JAX.NodeArray(c)};JAX.NodeArray.prototype.firstElement=function(){for(var a=0;a<this.length;a++)if(1==this[a].jaxNodeType)return this[a];return null};JAX.NodeArray.prototype.lastElement=function(){for(var a=this.length-1;0<=a;a--)if(1==this[a].jaxNodeType)return this[a];return null};
JAX.NodeArray.prototype.animate=function(a,b,c,d){for(var e=Array(this.length),f=0;f<this.length;f++){var g=this[f];e[f]=g.animate.apply(g,arguments)}return new JAX.FXArray(e)};JAX.NodeArray.prototype.fade=function(a,b){for(var c=Array(this.length),d=0;d<this.length;d++){var e=this[d];c[d]=e.fade.apply(e,arguments)}return new JAX.FXArray(c)};JAX.NodeArray.prototype.fadeTo=function(a,b){for(var c=Array(this.length),d=0;d<this.length;d++){var e=this[d];c[d]=e.fadeTo.apply(e,arguments)}return new JAX.FXArray(c)};
JAX.NodeArray.prototype.slide=function(a,b){for(var c=Array(this.length),d=0;d<this.length;d++){var e=this[d];c[d]=e.slide.apply(e,arguments)}return new JAX.FXArray(c)};JAX.NodeArray.prototype.scroll=function(a,b,c){for(var d=Array(this.length),e=0;e<this.length;e++){var f=this[e];d[e]=f.scroll.apply(f,arguments)}return new JAX.FXArray(d)};JAX.FX=JAK.ClassMaker.makeClass({NAME:"JAX.FX",VERSION:"1.1"});JAX.FX.isCSS3Supported=null;
(function(){var a=document.createElement("div").style;JAX.FX.isCSS3Supported="transition"in a||"MozTransition"in a||"WebkitTransition"in a||"OTransition"in a||"MSTransition"in a})();JAX.FX.TRANSFORM="";(function(){for(var a=["transform","WebkitTransform","OTransform","MozTransform","MSTransform"],b=0,c=a.length;b<c;b++){var d=a[b];if(d in document.createElement("div").style){JAX.FX.TRANSFORM=d;break}}})();
JAX.FX._SUPPORTED_PROPERTIES={width:{defaultUnit:"px"},maxWidth:{defaultUnit:"px"},minWidth:{defaultUnit:"px"},height:{defaultUnit:"px"},maxHeight:{defaultUnit:"px"},minHeight:{defaultUnit:"px"},top:{defaultUnit:"px"},left:{defaultUnit:"px"},bottom:{defaultUnit:"px"},right:{defaultUnit:"px"},paddingTop:{defaultUnit:"px"},paddingBottom:{defaultUnit:"px"},paddingLeft:{defaultUnit:"px"},paddingRight:{defaultUnit:"px"},marginTop:{defaultUnit:"px"},marginBottom:{defaultUnit:"px"},marginLeft:{defaultUnit:"px"},
marginRight:{defaultUnit:"px"},fontSize:{defaultUnit:"px"},transform:{defaultUnit:""},WebkitTransform:{defaultUnit:""},MozTransform:{defaultUnit:""},MSTransform:{defaultUnit:""},OTransform:{defaultUnit:""},opacity:{defaultUnit:""},color:{defaultUnit:""},backgroundColor:{defaultUnit:""}};JAX.FX._SUPPORTED_METHODS="ease linear ease-in ease-out ease-in-out cubic-bezier".split(" ");
JAX.FX.prototype.$constructor=function(a){this._jaxElm=JAX(a);this._jaxElm.exists()||console.error("JAX.FX: I got null node. Check your code please.");this._settings=[];this._running=this._reversed=this._wasRun=!1;this._currentTime=this._startTime=this._maxDuration=0;this._promise={finished:null};this._processor=null};
JAX.FX.prototype.addProperty=function(a,b,c,d,e){if(!this._jaxElm.exists())return this;var f=this._parseValue(b);b=this._parseUnit(b)||"ms";e=JAX.FX.isCSS3Supported?e||"linear":"LINEAR";if("string"!=typeof a)return console.error("JAX.FX.addProperty: For first argument I expected string"),this;if(!(a in JAX.FX._SUPPORTED_PROPERTIES))return console.error("JAX.FX.addProperty: First argument must be supported property. You are trying to give me '"+a+"' which is unsupoorted."),this;if(!isFinite(f)||0>
f)return console.error("JAX.FX.addProperty: For second argument I expected positive number"),this;if(c&&"string"!=typeof c&&("number"!=typeof c||!isFinite(c)))return console.error("JAX.FX.addProperty: For third argument I expected string, number or null for automatic checking"),this;if(d&&"string"!=typeof d&&("number"!=typeof d||!isFinite(d)))return console.error("JAX.FX.addProperty: For fourth argument I expected string or number"),this;if(null==c&&null==d)return console.error("JAX.FX.addProperty: At least one of start and end values must be defined."),
this;if("string"!=typeof e)return console.error("JAX.FX.addProperty: For fifth argument I expected string"),this;-1==JAX.FX._SUPPORTED_METHODS.indexOf(e.toLowerCase())&&0!=e.toLowerCase().indexOf("cubic-bezier")&&(console.error("JAX.FX.addProperty: Fifth argument must be supported method. You are trying to give me '"+e+"' which is unsupoorted."),e=JAX.FX.isCSS3Supported?"linear":"LINEAR");d=d||"number"==typeof d&&isFinite(d)?this._parseCSSValue(a,d):this._foundCSSValue(a);c=c||"number"==typeof c&&
isFinite(c)?this._parseCSSValue(a,c):this._foundCSSValue(a);b={value:"ms"==b?f:1E3*f,unit:"ms"};this._maxDuration=Math.max(b.value,this._maxDuration);this._settings.push({property:a,startValue:c.value,startUnit:c.unit,endValue:d.value,endUnit:d.unit,durationValue:b.value,durationUnit:b.unit,method:e});return this};
JAX.FX.prototype.addTranslateProperty=function(a,b,c,d){if(!JAX.FX.isCSS3Supported){var e={x:"left",y:"top",z:""},f;for(f in b){var g=e[f];g&&this.addProperty(g,a,b[f],c[f],d)}console.info("JAX.FX.addTranslateProperty: There is no CSS3 transition support. I will use top or left instead of transform attribute. Element should have non-static position.");return this}var e={x:"translateX(%v)",y:"translateY(%v)",z:"translateZ(%v)"},h=[];for(f in b){var n=this._parseValue(b[f]||0),k=this._parseUnit(b[f]||
0)||"px";(g=e[f])&&h.push(g.replace("%v",n+k))}if(!h.length)return console.error("JAX.FX.addTranslateProperty: I got unsupported start translate axis. Supported: x, y or z."),this;b=h.join(" ");h=[];for(f in c)n=this._parseValue(c[f]||0),k=this._parseUnit(c[f]||0)||"px",(g=e[f])&&h.push(g.replace("%v",n+k));if(!h.length)return console.error("JAX.FX.addTranslateProperty: I got unsupported end translate axis. Supported: x, y or z."),this;c=h.join(" ");this.addProperty(JAX.FX.TRANSFORM,a,b,c,d);return this};
JAX.FX.prototype.run=function(){if(this.isRunning())return this._promise.finished;if(!this._settings.length)return this._promise.finished=(new JAK.Promise).reject(this._jaxElm),console.error("JAX.FX.run: I have no added properties. FX will not run."),this;this._processor=JAX.FX.isCSS3Supported?new JAX.FX.CSS3(this._jaxElm):new JAX.FX.Interpolator(this._jaxElm);this._processor.set(this._settings);this._wasRun=this._running=!0;this._startTime=(new Date).getTime();this._promise.finished=this._processor.run();
this._promise.finished.then(this._finishAnimation.bind(this),this._finishAnimation.bind(this));return this._promise.finished};JAX.FX.prototype.then=function(a,b){return this._promise.finished.then(a,b)};
JAX.FX.prototype.reverse=function(){if(!this._wasRun)return this.run();this.isRunning()&&this.stop();if(!this._settings.length)return this._promise.finished=(new JAK.Promise).reject(this._jaxElm),console.error("JAX.FX.reverse: I have no added properties. FX will not run in reversed mode."),this;this._reversed=!this._reversed;for(var a=[],b=0,c=this._settings.length;b<c;b++){var d=this._settings[b],e=d.property,f=d.method,g=this._parseCSSValue(e,this._jaxElm.computedCss(this._styleToCSSProperty(e))),
h=g.value,g=g.unit,n=d.durationUnit;if(this._reversed)var k=Math.min(this._currentTime,d.durationValue),v=d.startValue,d=d.startUnit;else k=Math.max(d.durationValue-this._currentTime,0),v=d.endValue,d=d.endUnit;a.push({property:e,startValue:h,startUnit:g,endValue:v,endUnit:d,durationValue:k,durationUnit:n,method:f})}this._processor=JAX.FX.isCSS3Supported?new JAX.FX.CSS3(this._jaxElm):new JAX.FX.Interpolator(this._jaxElm);this._processor.set(a);this._running=!0;this._startTime=(new Date).getTime();
this._promise.finished=this._processor.run();this._promise.finished.then(this._finishAnimation.bind(this),this._finishAnimation.bind(this));return this._promise.finished};JAX.FX.prototype.isRunning=function(){return this._running};JAX.FX.prototype.stop=function(){this._running&&this._processor.stop();return this};
JAX.FX.prototype._parseCSSValue=function(a,b){var c=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;if("backgroundColor"==a||"color"==a||-1<a.toLowerCase().indexOf("transform"))var d=b;else d=this._parseValue(b),c=this._parseUnit(b)||c;return{value:d,unit:c}};JAX.FX.prototype._parseValue=function(a){return parseFloat(a)};JAX.FX.prototype._parseUnit=function(a){var b=parseFloat(a);return(a+"").replace(b,"")};
JAX.FX.prototype._foundCSSValue=function(a){var b=JAX.FX._SUPPORTED_PROPERTIES[a].defaultUnit;switch(a){case "width":case "height":a=this._jaxElm.size(a);break;case "backgroundColor":case "color":a=this._jaxElm.computedCss(this._styleToCSSProperty(a));break;default:a=this._jaxElm.computedCss(this._styleToCSSProperty(a)),a=parseFloat(a)}return{value:a,unit:b}};
JAX.FX.prototype._finishAnimation=function(){var a=(new Date).getTime()-this._startTime;this._reversed?(this._currentTime-=a,this._currentTime=Math.max(this._currentTime,0)):(this._currentTime+=a,this._currentTime=Math.min(this._currentTime,this._maxDuration));this._startTime=0;this._isRunning=!1};JAX.FX.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FXArray=JAK.ClassMaker.makeClass({NAME:"JAX.FXArray",VERSION:"1.0",IMPLEMENT:[JAX.IIterable]});
JAX.FXArray.prototype.$constructor=function(a){this.length=a.length;for(var b=0;b<this.length;b++)this[b]=a[b]};JAX.FXArray.prototype.run=function(){for(var a=0;a<this.length;a++)this[a].run();return this};JAX.FXArray.prototype.then=function(a,b){for(var c=Array(this.length),d=function(a){return a},e=0;e<this.length;e++)c[e]=this[e].then(d,d);return JAK.Promise.when(c).then(function(b){b=new JAX.NodeArray(b);a(b)},function(a){a=new JAX.NodeArray(a);b(a)})};
JAX.FXArray.prototype.stop=function(){for(var a=0;a<this.length;a++)this[a].stop();return this};JAX.FXArray.prototype.reverse=function(){for(var a=0;a<this.length;a++)this[a].reverse();return this};JAX.FX.CSS3=JAK.ClassMaker.makeClass({NAME:"JAX.FX.CSS3",VERSION:"1.0"});JAX.FX.CSS3._TRANSITION_PROPERTY="";JAX.FX.CSS3._TRANSITION_EVENT="";
(function(){var a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"MSTransitionEnd"},b;for(b in a)if(b in document.createElement("div").style){JAX.FX.CSS3._TRANSITION_PROPERTY=b;JAX.FX.CSS3._TRANSITION_EVENT=a[b];break}})();
JAX.FX.CSS3.prototype.$constructor=function(a){this._jaxElm=a;this._settings=[];this._transitionCount=this._maxDuration=0;this._ecTransition=null;this._promise={finished:null};this._timeout=null};JAX.FX.CSS3.prototype.set=function(a){this._settings=a};
JAX.FX.CSS3.prototype.run=function(){this._promise.finished=new JAK.Promise;for(var a=JAX.FX.CSS3._TRANSITION_PROPERTY,b=JAX.FX.CSS3._TRANSITION_EVENT,c=[],d=this._jaxElm.node(),e=d.style,f=0,g=this._settings.length;f<g;f++){var h=this._settings[f],n=h.startValue+h.startUnit,k=this._styleToCSSProperty(h.property)+" "+h.durationValue+h.durationUnit+" "+h.method;this._maxDuration=Math.max(this._maxDuration,h.durationValue);e[h.property]=n;c.push(k);this._transitionCount++}setTimeout(function(){d.style[a]=
c.join(",");this._ecTransition=this._jaxElm.listen(b,this,"_finishTransitionAnimation");for(var f=0,h=this._settings.length;f<h;f++){var g=this._settings[f];e[g.property]=g.endValue+g.endUnit}this._timeout=setTimeout(this._fallback.bind(this),this._maxDuration+50)}.bind(this),0);return this._promise.finished};
JAX.FX.CSS3.prototype.stop=function(){for(var a=this._jaxElm.node(),b=a.style,c=0,d=this._settings.length;c<d;c++){var e=this._settings[c].property,f=window.getComputedStyle(a).getPropertyValue(this._styleToCSSProperty(e));b[e]=f}for(;this._transitionCount;)this._endTransition();clearTimeout(this._timeout);this._timeout=null;this._promise.finished.reject(this._jaxElm)};
JAX.FX.CSS3.prototype._endTransition=function(){this._transitionCount--;this._transitionCount||(this._ecTransition.unregister(),this._ecTransition=null,this._jaxElm.node().style[JAX.FX.CSS3._TRANSITION_PROPERTY]="")};JAX.FX.CSS3.prototype._finishTransitionAnimation=function(){this._transitionCount?this._endTransition():(clearTimeout(this._timeout),this._timeout=null,this._promise.finished.fulfill(this._jaxElm))};
JAX.FX.CSS3.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FX.CSS3.prototype._fallback=function(){for(;this._transitionCount;)this._endTransition();this._finishTransitionAnimation()};JAX.FX.Interpolator=JAK.ClassMaker.makeClass({NAME:"JAX.FX.Interpolator",VERSION:"1.0",DEPEND:[{sClass:JAK.CSSInterpolator,ver:"2.1"}]});
JAX.FX.Interpolator.prototype.$constructor=function(a){this._jaxElm=a;this._interpolators=[];this._interpolatorsCount=0;this._settings=[];this._promise={finished:null}};JAX.FX.Interpolator.prototype.set=function(a){this._settings=a};JAX.FX.Interpolator.prototype.run=function(){this._promise.finished=new JAK.Promise;this._interpolators=[];this._start();return this._promise.finished};
JAX.FX.Interpolator.prototype.stop=function(){for(var a=0,b=this._interpolators.length;a<b;a++)this._destroyInterpolator(a);this._promise.finished.reject(this._jaxElm)};
JAX.FX.Interpolator.prototype._start=function(){for(var a=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=c.durationValue,d=new JAK.CSSInterpolator(this._jaxElm.node(),d,{interpolation:c.method,endCallback:this._endInterpolator.bind(this,a)});this._interpolators.push(d);if(-1!=["backgroundColor","color"].indexOf(c.property))d.addColorProperty(c.property,c.startValue,c.endValue);else if(c.startUnit!=c.endUnit){var e=c.property,f=this._styleToCSSProperty(e),g=this._jaxElm.css(e);this._jaxElm.css(e,
c.startValue+c.startUnit);var h=parseFloat(this._jaxElm.computedCss(f));this._jaxElm.css(e,c.endValue+c.endUnit);c=parseFloat(this._jaxElm.computedCss(f));this._jaxElm.css(e,g);d.addProperty(e,h,c,"px")}else d.addProperty(c.property,c.startValue,c.endValue,c.startUnit);d.start();this._interpolatorsCount++}};JAX.FX.Interpolator.prototype._endInterpolator=function(a){this._destroyInterpolator(a);this._interpolatorsCount||(this._interpolators=[],this._promise.finished.fulfill(this._jaxElm))};
JAX.FX.Interpolator.prototype._destroyInterpolator=function(a){var b=this._interpolators[a];b&&(b.stop(),this._interpolators[a]=null,this._interpolatorsCount--)};JAX.FX.Interpolator.prototype._styleToCSSProperty=function(a){return a.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})};JAX.FX.Scrolling=JAK.ClassMaker.makeClass({NAME:"JAX.FX.Scrolling",VERSION:"1.0"});
JAX.FX.Scrolling.prototype.$constructor=function(a){this._jaxElm=JAX(a);this._settings=[];this._promises={animationFinished:null};this._currentTime=this._startTime=this._maxDuration=0;this._interpolators=[];this._runningInterpolatorCount=0;this._isRunning=this._reversed=!1;this._onScrollingFinished=this._onScrollingFinished.bind(this)};
JAX.FX.Scrolling.prototype.addProperty=function(a,b,c){if("left"!=a&&"top"!=a)console.error("You are trying to use unsupported property: "+a+".",this._jaxElm.node());else return this._settings.push({property:a,defValue:null,value:b,duration:c}),this._maxDuration=Math.max(this._maxDuration,c),this};
JAX.FX.Scrolling.prototype.run=function(){if(this._promises.animationFinished)return this._promises.animationFinished;this._promises.animationFinished=new JAK.Promise;for(var a=this._runningInterpolatorCount=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=this._jaxElm.scroll(c.property);c.defValue=d;this._startInterval(c.property,c.value,c.duration)}this._isRunning=!0;this._reversed=!1;this._startTime=(new Date).getTime();return this._promises.animationFinished};
JAX.FX.Scrolling.prototype.then=function(a,b){return this._promises.animationFinished.then(a,b)};JAX.FX.Scrolling.prototype.stop=function(){if(!this._isRunning)return this;for(;this._runningInterpolatorCount;)this._onScrollingFinished();return this};
JAX.FX.Scrolling.prototype.reverse=function(){this._isRunning&&this.stop();this._reversed=!this._reversed;this._promises.animationFinished=new JAK.Promise;for(var a=this._runningInterpolatorCount=0,b=this._settings.length;a<b;a++){var c=this._settings[a],d=this._reversed?Math.min(c.duration,this._currentTime):Math.max(c.duration-this._currentTime,0);this._startInterval(c.property,this._reversed?c.defValue:c.value,d)}this._isRunning=!0;this._startTime=(new Date).getTime();return this._promises.animationFinished};
JAX.FX.Scrolling.prototype.isRunning=function(){return this._isRunning};JAX.FX.Scrolling.prototype._startInterval=function(a,b,c){var d=this._jaxElm.scroll(a),e=function(b){this._jaxElm.scroll(a,b)}.bind(this);b=new JAK.Interpolator(d,b,c,e,{endCallback:this._onScrollingFinished});b.start();this._interpolators.push(b);this._runningInterpolatorCount++};
JAX.FX.Scrolling.prototype._onScrollingFinished=function(){this._runningInterpolatorCount--;if(!this._runningInterpolatorCount){this._interpolators=[];var a=(new Date).getTime()-this._startTime;this._reversed?(this._currentTime-=a,this._currentTime=Math.max(this._currentTime,0)):(this._currentTime+=a,this._currentTime=Math.min(this._currentTime,this._maxDuration));this._startTime=0;this._isRunning=!1;this._promises.animationFinished.fulfill(this._jaxElm);this._promises.animationFinished=null}};
